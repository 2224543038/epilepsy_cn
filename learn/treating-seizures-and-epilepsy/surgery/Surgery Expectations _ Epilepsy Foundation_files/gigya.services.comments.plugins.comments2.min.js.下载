// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.comments.plugins.comments2.js']) gigya.i18n['gigya.services.comments.plugins.comments2.js'] = { };
gigya.i18n['gigya.services.comments.plugins.comments2.js']['en'] = {"commenting_frequency_limit_reached": "Commenting frequency limit reached", "post_anonymously": "Post anonymously", "anonymous": "Anonymous", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.": "When posting anonymously, other users will not see your personal info next to your review.", "when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment.": "When posting anonymously, other users will not see your personal info next to your comment.", "daily_commenting_limit_reached": "Daily commenting limit reached", "comment_edit_rejected": "Your edited comment wasn't saved because it violates the site policy", "review_edit_rejected": "Your edited review wasn't saved because it violates the site policy", "this_comment_has_been_deleted": "This comment has been deleted", "this_comment_is_awaiting_moderation": "This comment is awaiting moderation", "this_review_has_been_deleted": "This review has been deleted", "this_review_is_awaiting_moderation": "This review is awaiting moderation", "deleted": "Deleted", "rich_text_formatting": "Rich-text formatting", "embed_a_media_item": "Embed a media item", "tag_commenters": "Tag commenters", "tip_use_trusted_urls": "Tip: Use URLs from trusted image, video and audio websites.", "edited": "Edited", "editing": "Editing", "edit": "Edit", "moderator": "Moderator", "review_summary": "Enter a title for your review", "write_a_review": "Write your review", "sign_in_with": "Sign in with:", "you_must_login_in_order_to_attach_a_media_item": "You must login in order to attach a media item", "enter_url": "Enter URL", "for_best_results_try_a_url_from_one_of_our_supported_services": "For best results, try a URL from one of our supported services.", "the_provided_url_is_not_supported": "The provided URL is not supported", "tag_a_commenter": "Tag a commenter", "unlike": "Unlike", "like": "Like", "review": "Review", "summary": "Summary", "write_a_comment": "Write a comment", "show_more": "Show more", "as_guest": "As Guest", "ratings": "Ratings", "most_voted": "Most voted", "oldest": "Oldest", "most_recent": "Most recent", "sort": "Sort", "share_colon": "Share:", "hello_username": "Hello %username", "via_provider": "Via %provider", "username_rated_pagetitle_as_rating_5": "%username rated %pageTitle as %rating/5", "username_commented_on_pagetitle": "%username commented on %pagetitle", "username_posted_a_review_on_pagetitle": "%username posted a review on %pagetitle", "delete": "Delete", "click_to_show": "Click to show", "1_review_was_recently_added": "1 review was recently added", "num_reviews_were_recently_added": "%num reviews were recently added", "1_new_review_was_recently_posted": "1 new review was recently posted", "num_new_reviews_were_recently_posted": "%num new reviews were recently posted", "1_comment_was_recently_added": "1 comment was recently added", "num_comments_were_recently_added": "%num comments were recently added", "1_new_comment_was_recently_posted": "1 new comment was recently posted", "num_new_comments_were_recently_posted": "%num new comments were recently posted", "new": "NEW", "resume_stream": "Resume stream", "pause_stream": "Pause stream", "enter_your_email_to_subscribe_to_new_comments_in_this_stream_colon": "Enter your email to subscribe to new comments in this stream:", "enter_your_email_to_subscribe_to_new_reviews_in_this_stream_colon": "Enter your email to subscribe to new reviews in this stream:", "follow_replies_to_my_comments": "Follow replies to my comments", "follow_replies_to_my_reviews": "Follow replies to my reviews", "your_review": "Your review", "my_rating_colon": "My rating:", "least_voted": "Least voted", "most_relevant": "Most relevant", "old_to_new": "Old to new", "new_to_old": "New to old", "comment_edited_by_a_moderator": "Comment edited by a Moderator", "review_edited_by_a_moderator": "Review edited by a Moderator", "share_to_provider": "Share to %provider", "new_comments_will_be_sent_directly_to_your_email_inbox": "New comments will be sent directly to your email inbox", "new_reviews_will_be_sent_directly_to_your_email_inbox": "New reviews will be sent directly to your email inbox", "you_have_successfully_unsubscribed_for_updates_in_the_current_discussion": "You have successfully unsubscribed for updates in the current discussion", "thank_you_for_subscribing": "Thank you for subscribing", "you_have_successfully_unsubscribed": "You have successfully unsubscribed", "enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon": "Enter your email to receive notifications when someone replies to your comments:", "enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon": "Enter your email to receive notifications when someone comments on your reviews:", "follow_my_reviews": "Follow my reviews", "unfollow": "Unfollow", "follow": "Follow", "following": "Following", "notify_me_when_someone_comments_on_my_review": "Notify me when someone comments on my review", "thank_you_for_subscribing,_new_reviews_will_be_sent_directly_to_your_email_inbox": "Thank you for subscribing, new reviews will be sent directly to your email inbox", "login_to_review": "Login to review", "rss": "RSS", "delete_review": "Delete review", "delete_comment": "Delete comment", "are_you_sure_you_want_to_permanently_delete_your_review_qm": "Are you sure you want to permanently delete your review?", "are_you_sure_you_want_to_permanently_delete_your_comment_qm": "Are you sure you want to permanently delete your comment?", "notify_me_when_someone_replies_to_my_comments": "Notify me when someone replies to my comments", "more_share_destinations": "More Share Destinations", "notifications_settings": "Notifications Settings", "follow_my_comments": "Follow my comments", "unsubscribe": "Unsubscribe", "subscribe": "Subscribe", "thank_you_for_subscribing,_new_comments_will_be_sent_directly_to_your_email_inbox.": "Thank you for subscribing, new comments will be sent directly to your email inbox.", "post_to_provider": "Post to %provider", "login_to_comment": "Login to comment", "i_rated_pagetitle_as_rating_5": "I rated %pageTitle as %rating/5", "my_review_on_colon_pagetitle": "My review on: %pageTitle", "commented_on_colon_pagetitle": "Commented on: %pageTitle", "rated_pagetitle": "Rated %pageTitle", "please_select_your_rating": "Please select your rating", "show_more_ratings": "Show more ratings", "please_login": "Please login", "please_provide_a_valid_email_address": "Please provide a valid email address", "overall_rating": "Overall Rating", "yes_flag_this_review": "Yes, flag this review", "are_you_sure_you_want_to_mark_this_review_as_inappropriate": "Are you sure you want to mark this review as inappropriate?", "report_review_to_site_owner": "Report review to site owner", "your_edited_comment_is_awaiting_moderation": "Your edited comment is awaiting moderation", "your_edited_review_is_awaiting_moderation": "Your edited review is awaiting moderation", "your_review_is_awaiting_moderation": "Your review is awaiting moderation", "one_day_ago": "1 day ago", "one_hour_ago": "1 hour ago", "one_minute_ago": "1 minute ago", "one_reply": "1 reply", "only_one_review_per_product_is_allowed": "Only one review per product is allowed", "please_fill_required_fields": "Please fill required fields", "one_review": "1 Review", "num_reviews": "%num Reviews", "i_love_it": "I love it", "i_like_it": "I like it", "its_ok": "It's OK", "i_dont_like_it": "I don't like it", "i_hate_it": "I hate it", "show_more_reviews": "Show more reviews", "comment_on_username_review": "Comment on %username's review", "comment": "Comment", "review_colon": "Review:", "summary_colon": "Summary:", "login_to_post_your_review": "Login to post your review", "post_your_review": "Post your review", "report_comment_to_site_owner": "Report comment to site owner", "are_you_sure_you_want_to_mark_this_comment_as_inappropriate": "Are you sure you want to mark this comment as inappropriate?", "yes_flag_this_comment": "Yes, flag this comment", "one_comment": "1 Comment", "show_more_comments": "Show more comments", "an_error_has_occurred_please_try_again_later": "An error has occurred, please try again later (%errorCode)", "num_replies": "%num replies", "share_to": "Share to:", "less_than_a_minute_ago": "Less than a minute ago", "nickname_should_be_at_least_3_characters": "Nickname should be at least 3 characters.", "change": "Change", "num_minutes_ago": "%num minutes ago", "num_days_ago": "%num days ago", "num_hours_ago": "%num hours ago", "your_comment_is_awaiting_moderation": "Your comment is awaiting moderation", "post": "Post", "reply_to_username": "Reply to %username", "email_not_displayed_publicly": "*Email not displayed publicly", "num_comments": "%num Comments", "email_optional": "Email (optional)", "nickname": "Nickname", "post_a_new_comment": "Post a new comment", "or": "Or", "guest": "Guest", "reply": "Reply", "share": "Share", "login": "Login", "logout": "Logout", "yes": "Yes", "no": "No", "ok": "OK", "cancel": "Cancel", "done": "Done", "more": "More", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var o=function(){function e(){}return e.getSelection=function(e){if(window.getSelection&&document.createRange){e.normalize();var t=window.getSelection().getRangeAt(0),i=t.cloneRange();i.selectNodeContents(e),i.setEnd(t.startContainer,t.startOffset);var o=t.cloneRange();o.selectNodeContents(t.startContainer),o.setEnd(t.startContainer,t.startOffset);var s=i.toString(),n=o.toString();return{start:s.length,end:s.length+t.toString().length,text:s,childContainer:o.startContainer,childOffset:n.length,childText:n}}if(document.selection&&document.body.createTextRange){var a=document.selection.createRange(),r=document.body.createTextRange();r.moveToElementText(e),r.setEndPoint("EndToStart",a);var g=r.text.length;return{start:g,end:g+a.text.length,text:r.text,childContainer:t.endContainer,endInChildContainer:0,childText:t.toString()}}},e.restoreSelection=function(e,t){if(window.getSelection&&document.createRange){var i=0,o=document.createRange();o.setStart(e,0),o.collapse(!0);for(var s,n=[e],a=!1,r=!1;!r&&(s=n.pop());)if(3==s.nodeType){var g=i+s.length;!a&&t.start>=i&&t.start<=g&&(o.setStart(s,t.start-i),a=!0),a&&t.end>=i&&t.end<=g&&(o.setEnd(s,t.end-i),r=!0),i=g}else for(var l=s.childNodes.length;l--;)n.push(s.childNodes[l]);var m=window.getSelection();m.removeAllRanges(),m.addRange(o)}else if(document.selection&&document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(e),d.collapse(!0),d.moveEnd("character",t.end),d.moveStart("character",t.start),d.select()}},e}();i.Selection=o;var s=function(){function e(){}return e.getPhotoFullName=function(e,i,o){return void 0===i&&(i=0),void 0===o&&(o="png"),t.imgBase+e+"_x"+(i>0?i:this.pixelRatio)+"."+o},e.pixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1,e}();i.Images=s;var n=function(){function e(){}return e.cancelEvent=function(e){e.stopPropagation&&e.stopPropagation()},e}();i.Events=n;var a=function(){function t(){}return t.createTaggedUserElement=function(t,i){var o=document.createElement("input");return o.type="button",o.value="@"+t,o.innerHTML=t,o.tabIndex=-1,e.utils.DOM.addClassToElement(o,"gig-usertagging-tag"),i&&o.setAttribute("data-gig-uid",i),o},t.replaceUserTagsWithSpans=function(t,i){for(var o=e.utils.DOM.getElementsByClass(t,"gig-usertagging-tag"),s=0;s<o.length;s++){var n=o[s],a=n.getAttribute("data-gig-uid");if(a){e.utils.array.indexOf(i,a)==-1&&i.push(a);var r=n.getAttribute("value");r||(r=n.innerHTML);var g=document.createElement("span");g.setAttribute("data-gig-uid",a),e.utils.DOM.addClassToElement(g,"gig-usertagging-tag"),r&&(g.innerHTML=r),n.parentElement.insertBefore(g,n),n.parentElement.removeChild(n)}}return t.innerHTML},t.replaceSpansWithUserTags=function(i){var o=e.utils.DOM.getElementsByClass(i,"gig-usertagging-tag");if(o)for(var s=0;s<o.length;s++){var n=o[s],a=n.getAttribute("data-gig-uid"),r=n.innerHTML.slice(1),g=t.createTaggedUserElement(r,a);n.parentElement.insertBefore(g,n),n.parentElement.removeChild(n)}},t}();i.UserTagging=a}(i=t.CommentsUtils||(t.CommentsUtils={}))}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.COMMENTS=0]="COMMENTS",e[e.REVIEWS=1]="REVIEWS"}(t=e.TextMode||(e.TextMode={}));var i;!function(e){e[e.user=0]="user",e[e.comment=1]="comment",e[e.moderator=2]="moderator"}(i=e.HightlighGroupTypeEnum||(e.HightlighGroupTypeEnum={}));var o;!function(e){e[e.commenterName=0]="commenterName",e[e.commentTime=1]="commentTime"}(o=e.BadgeLocationEnum||(e.BadgeLocationEnum={}));var s;!function(e){e[e.none=0]="none",e[e.rectangle=1]="rectangle"}(s=e.BadgeFrameEnum||(e.BadgeFrameEnum={}))}(t=e.comments||(e.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e,t){this.ID=e,this.parentID=t,this.replies=[]}return t.fromRawDataArray=function(e){if(!e)return null;for(var i=[],o=0;o<e.length;o++){var s=e[o];i.push(t.fromRawData(s))}return i},t.fromRawData=function(i){return i.replies&&i.replies.length>0&&(i.replies=t.fromRawDataArray(i.replies)),e.utils.object.merge([new t,i])},t.prototype.isReply=function(){return null!=this.parentID},t}();t.CommentData=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){t.imgBase=(e.thisScript?e._.getCdnResource():"")+"/gs/i/comments2/",t.defaultCss={reset:[".gig-comments-container *, *.gig-comments-container {","word-wrap:break-word;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;","font-family:arial;color:#333333;position:static;text-align:left;vertical-align:baseline;-moz-box-sizing: content-box;-webkit-box-sizing: content-box;box-sizing: content-box;}"].join(""),resetRtl:".gig-comments-container *, *.gig-comments-container {direction:rtl;text-align:right;}",global:[".gig-comments-container input {outline:none}",".gig-comments-container .gig-composebox-summary-input { font-weight: bold; }",".gig-comments-container .gig-composebox-summary-input.gig-comments-placeholder { font-weight: bold; }",".gig-comments-container .gig-comments-placeholder {color: #999;opacity:1}",".gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}",".gig-comments-container input::-moz-placeholder {color: #585858;opacity:1}",".gig-comments-container input::-webkit-input-placeholder  {color: #585858;opacity:1}",".gig-comments-container input:-moz-placeholder {color: #585858;opacity:1}","*.gig-comments-container u {text-decoration:underline}",".gig-comments-container li {margin:0;padding:0;list-style-type:none}",".gig-comments-container ul {margin:0;padding:0;}","*.gig-composebox-textarea ul, .gig-comment-body ul {padding-left:20px;}","*.gig-composebox-textarea li, .gig-comment-body li {list-style-type:disc}",".gig-comments-container * {}","*.gig-comments-container-progress {width:100%;height:38px;background-repeat:no-repeat;background-position:center center;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",1,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-container-progress {background-size:contain;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}","*.gig-clearfix {clear:both}","*.gig-comments-header {overflow:hidden;border-bottom: 1px solid #EBEBEB; margin-bottom:8px;padding-bottom:8px; }","*.gig-comments-count {font-size:16px;font-weight:bold;}","*.gig-comments-header-right {float:right;}","*.gig-comments-header-left {float:left;}","*.gig-comments-linksContainer {display:inline-block;}","*.gig-comments-linksContainer li, *.gig-comments-linksContainer a, *.gig-comments-linksContainer li a:hover, *.gig-comments-linksContainer a:active, *.gig-comments-linksContainer a:visited, *.gig-comments-linksContainer a:link {color:#999999; cursor:pointer;display:inline-block;}","*.gig-comments-linksContainer li {margin-right:3px;}",'*.gig-comments-linksContainer li:after {content:" "; width:2px; height:2px; background-color:#999999; vertical-align:middle; margin-left:3px; display:inline-block;}','*.gig-comments-linksContainer *.gig-comments-link-lastVisible:after {content:"";margin:0;display:none;}',"*.gig-comments-linksContainer *.gig-comments-link-lastVisible {margin-right:0;}","*.gig-comment { width: 100%; }","*.gig-comment * {color:#999999; }","*.gig-comment .gig-comment-content {padding-left:6px;transition-property:background-color, padding;}","*.gig-comment-newComment .gig-comment-content {padding: 6px; background-color: #CEFAD3; border-radius:4px;}","*.gig-comment-summary {display:inline-block;font-size: 13px;font-weight:bold;vertical-align:top; color:#333333;font-size: 14px;}","*.gig-comment-photo {float:left;width: 37px; height:37px;}","*.gig-comment-providerLogo {text-align:right;}","*.gig-comment-providerLogo img {width:14px;height:14px;margin-top:-11px; margin-right:-3px;display:inline-block;}","*.gig-comment-data {padding-left:41px;}","*.gig-comment-header { overflow:hidden; margin-bottom:6px; }","*.gig-comment-header-right { float:right; }","*.gig-comment-time {font-size: 11px;display:inline-block;margin:2px 0 0 10px; float: right;}","*.gig-comment-username {font-weight:bold;color:#333333; margin-right:6px; display:inline-block; }","*.gig-comment-body, .gig-comment-body * {color:#585858; line-height:18px;}","*.gig-comment-footer, *.gig-comment-replies {padding-left: 6px}","*.gig-comment-replies {transition-property: max-height;overflow:hidden;}","*.gig-comment-replies-collapsed {display:none;}","*.gig-comment-footer {font-size:11px;overflow:hidden;border-bottom: 1px solid #EBEBEB;margin: 10px 0; padding-bottom:10px;}",'*.gig-comment[data-level="0"]:last-of-type *.gig-comment-footer:last-ch {border-bottom:none;}',"*.gig-comment-footer-left {float:left;}","*.gig-comment-footer li{cursor:pointer;}","*.gig-comment .gig-comment-replybox {display:none;background-color:#F6F6F6; padding:4px 6px;}","*.gig-comment .gig-comment-replybox-open {display:block; margin-bottom: 10px;}","*.gig-comment .gig-composebox-title, *.gig-comment .gig-composebox-title * {font-weight:normal; font-style:italic;color:#333333}","*.gig-comment *.gig-composebox-username {font-weight:bold;}","*.gig-comment-repliesArrow div {display:inline-block}","*.gig-comment-repliesArrow-img {margin: 0 1px 0 6px; width: 9px; height:9px; margin-right:3px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Reply_Arrow",1)+"');background-repeat:no-repeat;background-position:0px 3px;}",".gig-comments-hires-icons *.gig-comment-repliesArrow-img {background-size:contain; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Reply_Arrow")+"');}","*.gig-comment-repliesArrow .gig-comment-repliesArrow-img {}","*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(270deg); transform:rotate(270deg);}","*.gig-comment-status {display:none;border-radius: 3px;color:#FFFFFF;padding:2px 8px; border-radius:3px;margin-bottom:6px;}","*.gig-comment-body a:link {color:#007ACF;text-decoration: underline;}","*.gig-comment-body a:visited {color:#61007d;text-decoration: underline;}","*.gig-comment-status-info {display:inline-block;background-color:#64B46F;}","*.gig-comment-status-error {display:inline-block;background-color:#D0605F;margin-bottom:6px;}","*.gig-comment-viaProvider {display:inline-block;font-style:italic;margin:0 12px;padding: 0 0 0 12px;background-repeat:no-repeat;background-position:left center;}","*.gig-comment-viaProvider-facebook {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("/providers/Facebook_9x9",1)+"');}",".gig-comments-hires-icons *.gig-comment-viaProvider-facebook {background-size:contain; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("/providers/Facebook_9x9")+"');}",".gig-comments-hires-icons *.gig-loginbox-provider {background-size:15px;}","img.gig-comment-img {border-radius:3px;}","*.gig-comment-footer-right {float:right;}","*.gig-comment-footer-right div {display:inline-block;height:17px;line-height:16px;vertical-align:bottom;}","*.gig-comment-vote-pos, *.gig-comment-vote-neg {cursor:pointer;background-repeat:no-repeat;background-position: 0 0;padding-left: 14px;}","*.gig-comment-vote-with-value {padding-left: 17px;}","*.gig-comment-vote-total {margin-right:5px;}","*.gig-comment-vote-pos {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up")+"')}","*.gig-comment-vote-pos-down {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down",1)+"');margin-left:15px;position:relative; background-position: 0 3px; }",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down")+"');}","*.gig-comment-vote-posneg *.gig-comment-vote-neg {margin-left:2px;}","*.gig-comment-vote-neg-down {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed")+"')}","*.gig-comment-flag {margin: 0 15px;vertical-align:top;display:inline-block;width: 14px; height: 14px; visibility:hidden; cursor:pointer;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Flag_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag {background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Flag_Icon")+"')}","*.gig-comment-flag-submitted {cursor:default;visibility:visible;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Flag_Icon_Submitted",1)+"')}",".gig-comments-hires-icons *.gig-comment-flag-submitted {background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Flag_Icon_Submitted")+"')}","*.gig-comments-more {cursor:pointer;border-radius:3px; line-height: 38px;border: 1px solid #F7F6F6; background-color:#F9F9F9;text-align:center;}","*.gig-comments-more:hover {background-color: #E5E5E5}","*.gig-comments-more-progress {cursor:default;width:100%;height:38px;background-repeat:no-repeat;background-position:center center; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}",".gig-comments-hires-icons *.gig-comments-more-progress {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("progress_ani_gif",0,"gif")+"')}","*.gig-comments-more-progress:hover {background-color:#F9F9F9;}","*.gig-comments-dialog {min-width: 367px;min-height:140px;border: 6px solid #858585; border-radius: 5px; background-color:#FFFFFF;}","*.gig-comments-dialog-close {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon",1)+"'); width:15px; height:15px; float:right; cursor:pointer;}",".gig-comments-hires-icons *.gig-comments-dialog-close {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size: contain;}","*.gig-comments-dialog-caption-container {overflow:hidden;background-color: #f3f3f3; padding: 5px 5px 5px 12px;overflow:auto;zoom:1;font-size: 14px;font-weight:bold;color: #4d4d4d;}","*.gig-comments-dialog-caption {display:inline-block;float:left;}","*.gig-comments-dialog-body{padding:24px 12px 12px 12px;}","*.gig-comments-dialog-buttons{margin-top:12px;text-align:right;margin: 20px;}","*.gig-comments-dialog-text {margin-bottom:10px;}","*.gig-comments-dialog-textbox-container {float:left}","*.gig-comments-dialog-textbox {width: 260px;color: #4D4D4D;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;padding:0 4px;background-color:white;border: 1px solid #C0C0C0;height:24px;box-shadow:inset 0 0 4px #DCDCDC; -moz-box-shadow:inset 0 0 4px #DCDCDC; -webkit-box-shadow:inset 0 0 4px #DCDCDC;}","*.gig-comments-dialog-subscribe-okIcon {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("ok_icon",1)+"');width:14px;height:14px;position:relative;top:2px;margin-right:2px;display:inline-block;}",".gig-comments-hires-icons *.gig-comments-dialog-subscribe-okIcon {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("ok_icon")+"');}","*.gig-comments-dialog-button {","line-height:22px;font-size:12px;margin-left:7px;font-weight:bold;min-width: 50px;","position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","box-shadow:0 0 2px RGBA(0,0,0,0.15);-webkit-box-shadow:0 0 2px RGBA(0,0,0,0.15);-moz-box-shadow:0 0 2px RGBA(0,0,0,0.15);","gradient(#FFFFFF,#EAEBEB)}}","*.gig-comments-dialog-button:hover {","color:#b4b4b4;cursor:default;","gradient(#EBEBEB,#FFFFFF)}","*.gig-comments-dialog-error {color: #ce585a;font-size:11px;margin-top:5px;clear:both;}","*.gig-comments-dialog-textbox-button {}","*.gig-composebox {margin-bottom: 23px;}","*.gig-composebox-login {}","*.gig-composebox-login div {display:inline-block;line-height:30px;font-weight: bold; }","*.gig-composebox-or {margin: 0 10px;}","*.gig-composebox-social-login, *.gig-composebox-guest-login, *.gig-composebox-site-login {","border-radius: 3px;cursor:pointer;padding: 0 15px;font-size: 14px;box-shadow: inset 1px 1px #fff;border: solid 1px #e2e2e2;","gradient(#f5f5f5,#f1f1f0);","}","*.gig-composebox-social-login:hover, *.gig-composebox-guest-login:hover, *.gig-composebox-site-login:hover {gradient(#EFEFEF,#E1E1E1);}","*.gig-composebox-social-login {padding:0 9px;background-repeat:no-repeat;background-position:right center;gradient(#f5f5f5,#f1f1f0);}","*.gig-composebox-social-login:hover {gradient(#EFEFEF,#E1E1E1);}","*.gig-composebox-login-icon {background-position:center;display:inline-block;width: 36px; height:17px;margin:0 7px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Login-icons-fb_tw",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-icon {background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Login-icons-fb_tw")+"')}","*.gig-composebox-login-drop-icon {background-position:center;display:inline-block;width: 9px; height:17px;vertical-align:middle;background-repeat:no-repeat;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Login_icons_arrow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-login-drop-icon {background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Login_icons_arrow")+"')}","*.gig-composebox-header { transition-property:max-height; overflow:hidden; margin-bottom:4px; }",".gig-composebox-open *.gig-composebox-header { margin-bottom:4px;}",".gig-comments-reviews .gig-composebox-header, .gig-comments-reviews .gig-composebox-open .gig-composebox-header {max-height:none;}","*.gig-composebox-header-left {float:left;}","*.gig-composebox-header-right {float:right;}","*.gig-composebox-header-right *, *.gig-composebox-header-left * {vertical-align:bottom;}","*.gig-composebox-title, *.gig-composebox-name {display:inline-block;font-size:14px;font-weight:bold;margin:0 5px 0 0;}","*.gig-composebox-logout {cursor:pointer;display:inline-block;font-size:11px; color: #999999;}","*.gig-composebox-logout span {font-size:12px; color:#0796c6}","*.gig-composebox-logout:hover span {text-decoration:underline}","*.gig-comment-replybox *.gig-composebox-close {display:inline-block; margin-left:5px; cursor:pointer; width: 15px; height: 15px; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comment-replybox *.gig-composebox-close {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size: contain; }","*.gig-comment-replybox *.gig-composebox-close:hover { background-color: #ebebeb; }","*.gig-composebox-follow {font-size:13px;cursor:pointer;display:inline-block; color:#919191;padding-left: 12px;","background-repeat: no-repeat; background-position: left center;background-size: 8px 8px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Follow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-follow {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Follow")+"')}","*.gig-composebox-following {background-size: 8px 8px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Following",1)+"')}",".gig-comments-hires-icons *.gig-composebox-following {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Following")+"')}","*.gig-composebox-following:hover {background-size: 8px 8px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Unfollow",1)+"')}",".gig-comments-hires-icons *.gig-composebox-following:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Unfollow")+"')}","*.gig-composebox-photo {float:left;width: 37px;height:37px}","*.gig-composebox-data {padding-left:47px;}","*.gig-comments-composebox *.gig-composebox-data {margin-bottom:20px;}","*.gig-composebox-footer {display:none;overflow:hidden;margin-top:4px;}",".gig-composebox-open *.gig-composebox-footer {display:block;}","*.gig-composebox-footer-left, *.gig-composebox-footer-right {padding: 2px 0;}","*.gig-composebox-footer-left {float:left;}","*.gig-composebox-footer-right {float:right;}","*.gig-composebox-cancel {cursor:pointer; padding: 0 18px; font-size: 14px; font-weight:bold; color: #484848; display:inline-block;","line-height: 28px; border-radius: 3px; background-color: #484848; box-shadow: 1px 1px rgba(255, 255, 255, 0.4) inset;","border: 1px solid #bfbfbf; gradient(#e2e2e2, #bfbfbf); margin-right: 6px;}","*.gig-composebox-cancel:hover {gradient(#e2e2e2, #bfbfbf);}","*.gig-composebox-post {cursor:pointer;padding: 0 18px; font-size: 14px; font-weight:bold; color: #FFFFFF; display:inline-block;","line-height: 28px; border-radius: 3px; background-color: #D8D8D8; box-shadow: 1px 1px rgba(255, 255, 255, 0.4) inset;","border: 1px solid #51AE48; gradient(#88cb82,#72c26d);}","*.gig-comments-button {cursor: -moz-user-select: none; -khtml-user-select: none; -webkit-user-select:none; -o-user-select:none; }","*.gig-composebox-post:hover {gradient(#7AB574,#68AF63);}","*.gig-composebox-postAnonymously {display:inline-block;}","*.gig-composebox-anon-text { vertical-align:middle;display:inline-block;font-family:arial;font-size:12px;color:#999999;padding:0 10px 0 5px;}","*.gig-composebox-anon-checkbox { vertical-align:middle;}","*.gig-composebox-summary {display:none;padding: 9px;}",".gig-composebox-open *.gig-composebox-summary {display:block;margin-bottom:5px;}","*.gig-composebox-summary input {width:100%;border:none;color:#585858;}","*.gig-composebox-editor {text-align: right;padding: 0 9px 9px 9px;}","*.gig-composebox-editor-with-sidebar {padding: 0 29px 9px 9px;}","*.gig-composebox-editor, *.gig-composebox-summary {","background-color: #FFFFFF; border: 1px solid #D5D5D5; ","border-radius: 3px;box-shadow: 0 0 5px rgba(0, 0, 0, 0.05) inset; border: solid 1px #d5d5d5;}","*.gig-composebox-textarea { line-height:18px;transition-property: min-height; text-align:left;cursor: text;min-height:17px;resize: none;border:none;margin-top:9px; outline:none}","*.gig-composebox-textarea, *.gig-composebox-textarea * {color:#585858;font-size: 14px;}","textarea.gig-composebox-textarea {overflow:hidden;width:100%;display:block;height:17px;}",".gig-composebox-open textarea.gig-composebox-textarea {height:65px;}",".gig-composebox-open *.gig-composebox-textarea {min-height:69px;}","*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:12px;}","*.gig-composebox-textarea:empty:not(:focus):before {color:#999; content:attr(data-placeholder);}","ul.gig-composebox-sidebar {display:none;background-color:#FFFFFF;float:right;margin-right:-29px;}","ul.gig-composebox-sidebar {transition-property:opacity;opacity:0;}",".gig-composebox-open *.gig-composebox-sidebar {opacity:1;display:inline-block;}",".gig-comments-hires-icons *.gig-composebox-sidebar-button {background-size: 18px 18px; }","*.gig-composebox-sidebar-button {border-radius:0px;background-color: #f0f0f0; width: 29px;height:29px;display:block;background-color:#F7F3F7;}","*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 0 3px; }","*.gig-composebox-sidebar-button:hover, *.gig-composebox-sidebar-button-down {background-color: #f1f1f1;box-shadow: inset 0 0 9px rgba(0,0,0,.26);}","*.gig-composebox-sidebar-font {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_up")+"')}","*.gig-composebox-sidebar-font:hover, *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-font:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-font.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_hover")+"')}","*.gig-composebox-sidebar-tag {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("User_tagging_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("User_tagging_up")+"')}","*.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("User_tagging_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-tag:hover, *.gig-composebox-sidebar-tag.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("User_tagging_hover",1)+"')}","*.gig-composebox-sidebar-media {cursor:pointer;width: 29px;height:29px;background-repeat:no-repeat;background-position:center; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Media_up",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Media_up")+"')}","*.gig-composebox-sidebar-media:hover, *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Media_hover",1)+"')}",".gig-comments-hires-icons *.gig-composebox-sidebar-media:hover, .gig-comments-hires-icons *.gig-composebox-sidebar-media.gig-composebox-sidebar-button-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Media_hover")+"')}","*.gig-composebox-field-error {border: 1px solid #F9888E;}","*.gig-composebox-error {border-radius:3px;color: #FFFFFF;text-align:center;line-height:22px;background:#F9888E;margin-bottom:7px;display:none;font-weight:bold;font-size:13px;}","*.gig-composebox-postAnonymously { cursor:pointer; vertical-align:top; padding-top:4px;}","*.gig-comments-checkbox { width: 10px;height: 10px; border:1px solid #C6C6C6;display:inline-block;\tborder-radius: 1px; background-color: #fff;box-shadow: 0 0 5px rgba(189, 189, 189, 0.25) inset}","*.gig-comments-checkbox-checked {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("shareToProviders/checkmark",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comments-checkbox-checked {background-size:contain; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("shareToProviders/checkmark")+"');}","*.gig-selfreview-header {overflow:hidden;}","*.gig-selfreview-header-left {float:left;}","*.gig-selfreview-header-right {float:right;}","*.gig-selfreview-summary-container, *.gig-selfreview-body-container {background-color:#EDEDED; margin: 5px 0;padding:6px 10px;border-radius:3px;}","*.gig-selfreview-field-title {font-weight:bold;margin:0 7px 0 0;}","*.gig-selfreview-nameAndLogout {padding: 0 0 0 47px;height:37px;}","*.gig-selfreview-yourReview {font-weight:bold;color:#919191;margin-bottom:3px;}","*.gig-selfreview-ratings {margin: 5px 0}","*.gig-selfreview-rating .gig-comment-rating-value {margin-left:2px; }","*.gig-selfreview-rating-_overall .gig-comment-rating-value {margin-left:0px; }","*.gig-selfreview-rating-_overall.gig-selfreview-rating {margin-bottom:5px;}","*.gig-comments-guestbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 3px 3px 3px; overflow:hidden;width:150px;font-size:10px;color:#919191;padding: 0 13px 0 13px}","*.gig-comments-guestbox input {width:150px;border-radius:3px; height:24px; line-height:22px;color:#919191;border:1px solid #C0C0C0;padding-left:2px;}","*.gig-guestbox-fields {margin: 16px 0 0px;}","*.gig-guestbox-nickname {margin: 0px 0 10px;}","*.gig-guestbox-text {font-size:10px;margin: 5px 0;}","*.gig-guestbox-ok {margin-bottom: 8px;float:right;display:inline-block;cursor:pointer;padding: 0 9px;font-weight: bold;color: #222121;text-shadow: 0 2px rgba(255, 255, 255, .4);","line-height: 22px;border-radius: 3px;background-color: #f2f2f2;box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 0 2px rgba(255, 255, 255, .24);","border: solid 1px #c4c7cd; }","*.gig-guestbox-error {margin-left: 4px; display:inline-block;color:#e70707;font-size:10px;width:100px;float:left;margin-bottom: 8px;}","*.gig-comments-loginbox {transition-property: max-height;background-color:#FFFFFF;border: 1px solid #E2E2E2; border-radius: 0 0 3px 3px; overflow:hidden;min-width:115px;font-size:10px;color:#919191;}","*.gig-comments-loginbox-open {}","*.gig-loginbox-provider {background-repeat:no-repeat; background-position:left center; margin-left:9px; padding:8px 8px 8px 22px; cursor:pointer;border-bottom: 1px solid #EAEAEA}","*.gig-loginbox-provider:last-child {border-bottom:none;}","*.gig-loginbox-provider:hover {background-color:#F9F9F9}","*.gig-loginbox-provider[data-provider=more] { padding-left:0px }","*.gig-signinbox-provider {margin-left:8px; padding:8px 8px 8px 1px; cursor:default; border-bottom: 1px solid #EAEAEA}","*.gig-comments-usertaggingbox { width:290px; border-radius:3px; background-color:#FFF; border: solid 1px #d5d5d5; font-family:arial; }","*.gig-usertagging-title { color:#666666; background-color:#F4F4F4; font-size:10px; border-radius:2px; padding:7px; font-family:inherit; }","*.gig-usertagging-suggestions { list-style-type:none; margin:0; padding:0px; font-family:inherit; font-size:12px; }","*.gig-usertagging-suggestions li { cursor:pointer;padding-left:8px; border-top:solid 1px #eaeaea;height:18px;padding-top:4px;padding-bottom:4px;","}","*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-left:8px;vertical-align:top;line-height:20px; }","*.gig-usertagging-suggestions li *.gig-usertagging-userimage { border-radius:3px;width:18px;height:18px; }","*.gig-usertagging-suggestions li.gig-usertagging-selected { background-color:#f9f9f9; }","*.gig-usertagging-tag { -webkit-appearance: none; border-radius:8px 9px 9px 8px / 8px 8px 10px 10px; background-color:#d5e4f2; border-style:none; padding:0px 4px 0px 4px;"," }","*.gig-composebox-share {vertical-align:top;overflow:hidden;background-color:#F4F4F4; border-radius:3px; padding-left:4px;}","*.gig-comment .gig-composebox-share {border: 1px solid #E8E8E8}","*.gig-composebox-share-text {line-height:26px;vertical-align:top;display:inline-block;color:#999999;}","*.gig-composebox-share-providers {display:inline-block;}","*.gig-comments-share-provider {display:none;height:18px;width:36px;background-position: 23px center;padding:4px 3px;background-repeat:no-repeat;cursor:pointer; border-right: 1px solid #FFFFFF;}",".gig-comments-hires-icons *.gig-comments-share-provider {background-size:16px 16px}","*.gig-comments-share-provider-shown {display:inline-block;}","*.gig-comments-share-more {cursor:pointer; vertical-align:top; padding:4px; display:inline-block; height:18px; width:16px; background-position:center; background-repeat:no-repeat; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("sharetoProviders/Share_More_providers",1)+"')}",".gig-comments-hires-icons *.gig-comments-share-more {background-size:8px 8px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("sharetoProviders/Share_More_providers")+"')}","*.gig-comments-share-provider-checkbox { margin-top:3px; }","*.gig-composebox-morebox {width: 265px;border: 5px solid #858585; border-radius:3px;}","*.gig-composebox-morebox-caption {background-color:#F3F3F3;overflow:hidden;line-height: 15px;padding: 3px;}","*.gig-composebox-morebox-title {margin-left:3px;font-weight:bold; float:left;background-color:#F3F3F3;overflow:hidden;color:#4D4D4D;}","*.gig-composebox-morebox-close {float:right; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon",1)+"'); width:15px; height:15px; cursor:pointer; background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-composebox-morebox-close {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size:contain;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers {padding: 0 6px; background-color:#FFFFFF;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left: 18px; margin: 4px 0; width: 105px;display:inline-block;background-repeat:no-repeat;cursor:pointer;background-size: 14px;}","*.gig-comments-sortbox {margin-top:9px;border-radius: 3px;background-color: #fff;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: solid 1px #b0b0b0;padding: 3px 8px;display:inline-block;}",'*.gig-comments-sortbox:before {content:"";width: 13px;right: 12px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+t.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle",1)+"')}",".gig-comments-hires-icons *.gig-comments-sortbox:before {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-comments-sortbox li {color:#999999;cursor:pointer; min-width: 80px; padding: 7px 5px; border-bottom: 1px solid #EAEAEA;}","*.gig-comments-sortbox li:last-child {border-bottom: none}","*.gig-comments-sortbox li:hover {color:#848484;background-color:#F4F4F4;}","*.gig-comments-sortbox-selected {font-weight:bold}","*.gig-comments-fontbox {padding-right: 8px;padding-top:7px;transition: opacity 0.25s; opacity:0; }",'*.gig-comments-fontbox ul:after {content:"";width: 8px;height:13px;display:inline-block;position:absolute;right:1px;top: 12px;background-image:url(\''+t.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox ul:after {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-comments-fontbox ul {padding: 2px; width: 69px;background-color:#FFFFFF; border: 1px solid #B0B0B0; border-radius:2px;cursor:pointer;}","*.gig-comments-fontbox li {border: 1px none #EEEEEE;width: 33px;height:33px;display:inline-block;background-position:center;background-repeat:no-repeat}","*.gig-comments-fontbox *.gig-composebox-font-bold {border-right-style:solid;border-bottom-style:solid;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_bold",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bold {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_bold")+"')}","*.gig-comments-fontbox *.gig-composebox-font-italic {border-bottom-style:solid;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_italic",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-italic {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_italic")+"')}","*.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_underline",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-underline {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_underline")+"')}","*.gig-comments-fontbox *.gig-composebox-font-bullets {border-left-style:solid;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_align",1)+"')}",".gig-comments-hires-icons *.gig-comments-fontbox *.gig-composebox-font-bullets {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rich_Text_align")+"')}","*.gig-comments-mediabox { padding-right: 8px; transition: opacity 0.25s; opacity:0; "," }","*.gig-mediabox-fields {  padding:12px 6px 10px; width:382px; border: solid 1px #b0b0b0; border-radius: 2px; background-color: #fff; -webkit-box-shadow: -1px 2px 1px rgba(35,31,32,.07); -moz-box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); box-shadow: -1px 2px 1px rgba(35, 31, 32, .07); }",'*.gig-mediabox-fields:after { content:""; width: 8px; height:13px; position:absolute; display:inline-block; right:1px; top:12px; background-image:url(\''+t.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub",1)+"')}",".gig-comments-hires-icons *.gig-mediabox-fields:after { background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Sidebar_box_thub")+"')}","*.gig-mediabox-url { vertical-align:top; padding-left:8px; margin-bottom:10px; margin-right:5px; width: 307px; height: 28px; border-radius: 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15); border: solid 1px #d5d5d5; }","*.gig-mediabox-url:empty:before {color:#585858; content:attr(data-placeholder);}","*.gig-mediabox-ok { vertical-align:top; cursor:pointer; text-align:center; display:inline-block; font-weight:bold; font-size:14px; color:#333333; line-height:28px; width: 57px; height: 28px; border-radius: 3px; background-color: #f2f2f1; box-shadow: inset 1px 1px #fff; -moz-box-shadow: inset 1px 1px #fff; -webkit-box-shadow: inset 1px 1px #fff; border: solid 1px #d5d5d5; gradient(#f5f5f5,#f1f1f0); }","*.gig-mediabox-ok:hover { gradient(#efefef, #e9e9e9); }","*.gig-mediabox-text { font-family:arial; font-size:12px; color:#666666; line-height:14px; }","*.gig-composebox-media-display { margin-bottom:12px; }","*.gig-media-caption { font-family:arial; font-size:12px; color:#666666; line-height:17px; margin:4px 12px 0px 1px; }","*.gig-media-caption-text { text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-wrap:normal; }","*.gig-media-caption-url { display:block; padding-left:23px; text-decoration:underline; word-wrap:normal; color:#0796c6; cursor:pointer; font-size:12px; text-overflow:ellipsis; white-space:","nowrap; overflow:hidden; vertical-align:text-top; background-repeat:no-repeat; background-position:left; background-size: contain;}","*.gig-media-thumbnail { height: 303px; }","*.gig-media-thumbnail-image { margin:auto; display:block; }","*.gig-media-overlay { position:relative;top:-303px;height:0px; }","*.gig-media-play { display:none; opacity:0.85; width: 75px; height: 45px; border-radius: 10px; background-color: #545454; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_play",1)+"'); ","background-position:center center; background-repeat:no-repeat; cursor:pointer; position:relative;","box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -moz-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); -webkit-box-shadow: 0 -1px 3px rgba(0,0,0,.4), inset 0 1px rgba(255,255,255,.29); }",".gig-comments-hires-icons *.gig-media-play { background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_play")+"'); }","*.gig-media-play:hover { background-color:#666565; }","*.gig-media-cancel { cursor:pointer; margin-top:-18px; margin-right:0px; float:right; width: 13px; height: 13px; border-radius: 2px; background-color: #c9c6c6;","box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -moz - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26); -webkit - box-shadow: inset 0 0 9px rgba(0, 0, 0, .26);","background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_close_icon",1)+"'); background-position:center center; background-repeat:no-repeat; }",".gig-comments-hires-icons *.gig-media-cancel {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_close_icon")+"'); }","*.gig-media-cancel:hover { background-color: #ebebeb; }","*.gig-comment-mediaitem { margin-top:7px; }","*.gig-comment-content .gig-media-thumbnail-image { margin-left:0px; margin-right: 0px; }","*.gig-comment-content .gig-media-caption { margin:8px 12px 0px 0px; }","*.gig-composebox-media-preview { padding-left:4px; padding-right:4px; border-radius: 0px 0px 3px 3px; background-color: #fff; -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,.15); -moz-box-shadow: inset 0 0 5px rgba(0,0,0,.15); box-shadow: inset 0 0 5px rgba(0,0,0,.15);","border: solid 1px #d5d5d5; border-top:none; padding-top:23px; padding-bottom:5px; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_loader_gif",1,"gif")+"'); background-repeat:no-repeat; background-position:center center; }",".gig-comments-hires-icons *.gig-composebox-media-preview { background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("media_loader_gif",0,"gif")+"');}","*.gig-composebox-editor-with-media { border-radius:3px 3px 0px 0px; }","*.gig-comments-mediaplayer-dimmer { top:0px;left:0px;height:100%;width:100%;transition:opacity 0.25s;position:fixed; filter: 'alpha(opacity=50)';background-color:black;}","*.gig-comments-mediaplayer { top:50%;left:50%;transition:opacity 0.25s;padding-left:18px;padding-right:18px; position:fixed;background-color:#ffffff;border-radius:3px; }","*.gig-comments-mediaplayer-top { height:14px;padding-top:3px;padding-bottom-2px;padding-right:3px; }","*.gig-comments-mediaplayer-top .gig-media-cancel { margin-right:-18px;padding-right:0px;margin-top:0px; }","*.gig-comments-mediaplayer-bottom { margin:5px 0px 5px 0px; background-color:#d5d6d6; border-radius:3px; }","*.gig-comments-mediaplayer-caption { background-size:contain; background-repeat:no-repeat; background-position:left;font-size:13px;font-family:arial; padding-left:23px;line-height:17px; }","*.gig-comments-updates {transition-property: opacity, height; height:0; opacity:0; visibility:hidden; border-radius:3px; background-color:#90D890;}","*.gig-comments-updates-visible {opacity:1; visibility:visible; height:25px; margin: 5px 0;}","*.gig-comments-updates-text {text-align:center; line-height: 25px; color:#FFFFFF; font-weight:bold;}","*.gig-comments-updates-link {cursor:pointer; font-size:12px; color: #FFFFFF;}","*.gig-comments-updates-full {text-align:right;}","*.gig-comments-updates-full .gig-comments-updates-link {display:inline-block; line-height: 25px;top: -25px; position:relative; margin-right: 11px;","padding-left:15px;background-repeat:no-repeat;background-position:left center; background-size:11px 11px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Pause_Stream",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Pause_Stream")+"')}","*.gig-comments-updates-full .gig-comments-updates-link:hover { background-size:11px 11px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Pause_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full .gig-comments-updates-link:hover { background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Pause_Stream_hover")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-size:11px 11px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Resume_Stream",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Resume_Stream")+"')}","*.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-size:11px 11px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Resume_Stream_hover",1)+"')}",".gig-comments-hires-icons *.gig-comments-updates-full.gig-comments-updates-paused .gig-comments-updates-link:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Resume_Stream_hover")+"')}","*.gig-comments-updates-countonly {text-align:center;}","*.gig-comments-updates-countonly .gig-comments-updates-text {display:inline-block}","*.gig-comments-updates-countonly .gig-comments-updates-link {display:inline-block; margin-left:5px; font-weight:bold; text-decoration:underline;}","*.gig-comments-updates-countonly .gig-comments-updates-link:hover {text-decoration:none;}","*.gig-comment-title * {vertical-align:bottom;display:inline-block;}","*.gig-comment-title {margin-bottom:8px;}","*.gig-comment-rating-drop {margin: 0 3px; cursor:pointer; width: 13px; height: 14px;0 7px 0 2px;vertical-align:bottom;background-repeat:no-repeat;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon",1)+"')}","*.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-drop:hover, *.gig-comment-rating-drop-down {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Rating_Drop_Icon_hover",1)+"')}","*.gig-comment-rating-title, *.gig-comment-rating-value, *.gig-composebox-rating-title, *.gig-composebox-rating-value {display:inline-block;vertical-align:top;}","*.gig-comment-rating-title {margin:0 10px 0 0;vertical-align:bottom;min-width:53px;}","*.gig-composebox-rating-value {margin-left:3px; }","*.gig-composebox-rating-title {margin-right:10px;vertical-align:bottom;}","*.gig-comment-rating-star, *.gig-composebox-rating-star, *.gig-selfreview-rating-star {display:inline-block;vertical-align:bottom;background-repeat:no-repeat;padding-right:3px; width: 16px; height:16px;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-size: contain;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_small")+"')}","*.gig-comment-rating-star-full, *.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_small",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-size: contain;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_small")+"')}","*.gig-comment-rating-dimensions {display:inline-block;margin-top:9px;position:absolute;padding: 10px;background-color:#FFFFFF;box-shadow: -1px 2px 1px rgba(35,31,32,.07);border: 1px solid #B0B0B0;border-radius:2px;white-space:nowrap}",'*.gig-comment-rating-dimensions:before {margin-left: -7px;content:"";width: 13px;height:7px;display:inline-block;position:absolute;top:-7px;background-image:url(\''+t.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle",1)+"')}",".gig-comments-hires-icons *.gig-comment-rating-dimensions:before {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Sort_dropdown_triangle")+"')}","*.gig-composebox-rating-star {cursor:pointer;}","*.gig-composebox-ratings {margin-bottom:5px;}","*.gig-composebox-rating-_overall .gig-composebox-rating-value {margin-left:0 }","*.gig-composebox-rating-_overall {font-weight:bold;margin: 5px 0;}","*.gig-composebox-rating-_overall .gig-composebox-rating-star, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ","{padding-right: 4px; width: 21px; height: 20px; background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star ","{background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-_overall .gig-composebox-rating-star-full, *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-composebox-rating-star-full, *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ","{background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error:hover .gig-comments-hires-icons .gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-_overall .gig-selfreview-rating-star-full ","{background-size:contain;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-_overall.gig-composebox-field-error {border: none;}","*.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_red_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-_overall.gig-composebox-field-error .gig-composebox-rating-star {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_red_big")+"')}","*.gig-comment-colored-background {border-radius:4px; padding: 3px 6px 6px 6px;}","div.gig-comment-pinned-background {background-color: #fffcd2;}","*.gig-comment-withBadges *.gig-comment-header-right {text-align: right;}","*.gig-comment-withBadges *.gig-comment-username { margin-bottom:5px; }","*.gig-composebox-withBadges *.gig-composebox-logout  {display:block; }","*.gig-composebox-withBadges *.gig-composebox-header-right {  text-align:right; margin-bottom: 4px;}","*.gig-composebox-withBadges *.gig-composebox-title { position: relative; bottom: 7px; }","*.gig-comment-commentBadge { display: inline-block; font-size:11px; font-weight: bold; background-repeat: no-repeat; padding-right: 22px; background-position: right; height:17px; line-height: 17px;}","*.gig-comment-userBadge { margin-bottom: 5px; margin-right: 6px; display: inline-block; font-size:11px; font-weight: bold; line-height: 15px;}","*.gig-badge-border {border: 1px solid; border-radius: 2px; padding: 0px 5px;}","*.gig-comment .gig-comment-editbox {display:none;background-color:#F6F6F6; padding:4px 6px 4px 6px; margin-left:-41px;}","*.gig-comment .gig-comment-editbox .gig-composebox-ratings * {color:#585858;}","*.gig-comment .gig-comment-editbox-open {display:block; margin-bottom: 10px;}","*.gig-comment-editbox *.gig-composebox-close {display:inline-block; margin-left:5px; cursor:pointer; width: 15px; height: 15px; background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon",1)+"'); background-position:center; background-repeat:no-repeat;}",".gig-comments-hires-icons *.gig-comment-editbox *.gig-composebox-close {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("close_icon")+"'); background-size: contain; }","*.gig-comment-editbox *.gig-composebox-close:hover { background-color: #ebebeb; }","*.gig-comment-edited {font-size: 11px; display:inline-block; margin:2px 0 0 5px; float:right; font-style:italic; color:#999999}","*.gig-comment-data-removed {margin-left: -41px;}","*.gig-comment-data-removed .gig-comment-content {padding-left: 0px;}","*.gig-comment-data-removed .gig-comment-body {color:#999999; font-size:12px; font-style:italic; line-height:16.5px;}","*.gig-comment-data-removed .gig-comment-footer {margin: 4px 0px 10px; padding-left: 0px;}","*.gig-comment-data-removed .gig-comment-footer .gig-comment-footer-left .gig-comment-flag {display: none;}","*.gig-comment-data-removed .gig-comment-footer-right, *.gig-comment-data-removed .gig-comment-header {display:none;}","*.gig-comment-data-removed .gig-comment-replyLink , *.gig-comment-data-removed .gig-comment-likeLink , *.gig-comment-data-removed .gig-comment-shareLink , *.gig-comment-data-removed .gig-comment-deleteLink , *.gig-comment-data-removed .gig-comment-editLink {display:none;}","*.gig-comment-data-removed .gig-comment-content {transition: none; -webkit-transition: none}","*.gig-comment-data-removed .gig-comment-content {transition: none; -webkit-transition: none}","*.gig-comment-title-removed {display:none;}","*.gig-comment-photo-removed {display:none;}"].join(""),
rtl:["*.gig-comment-data {padding-left:0;padding-right:41px;}","*.gig-comment-footer-right, *.gig-comments-header-right, *.gig-composebox-footer-right, *.gig-composebox-header-right, *.gig-comment-header-right, *.gig-comments-dialog-close, *.gig-comments-dialog-button, *.gig-selfreview-header-right {float:left}","*.gig-comment-footer-left, *.gig-comments-header-left, *.gig-composebox-footer-left, *.gig-composebox-header-left, *.gig-comment-header-left,*.gig-comments-dialog-caption,*.gig-comments-dialog-textbox-container, *.gig-selfreview-header-left, *.gig-composebox-photo, *.gig-comment-photo {float:right}","*.gig-composebox-data {padding-left:0;padding-right: 47px;}","*.gig-loginbox-provider {padding: 8px 22px 8px 8px;background-position:right center; margin-right:8px;}","*.gig-composebox-editor-with-sidebar {padding: 0 9px 9px 29px;text-align:left;}","*.gig-composebox-textarea {text-align:right}","*.gig-comments-fontbox *.gig-composebox-font-bold {border-left-style:solid;border-right-style:none;}","*.gig-comments-fontbox *.gig-composebox-font-bullets {border-right-style:solid;border-left-style:none;}","*.gig-comments-share-provider-shown {background-position:6px;}","*.gig-comments-share-provider {border-right:none;border-left:1px solid #FFFFFF}","*.gig-comments-linksContainer li:after {margin-left:0;margin-right: 3px;}","*.gig-comments-linksContainer li {margin-right:0;margin-left: 3px;}","*.gig-composebox-follow {padding-right:12px;padding-left:0;background-position:right;}","*.gig-comment-footer, *.gig-comment-replies {padding-left: 0;padding-right: 6px;}","*.gig-comment-replybox *.gig-composebox-close {margin-left:0;margin-right:5px;}","*.gig-comment-editbox *.gig-composebox-close {margin-left:0;margin-right:5px;}","*.gig-comments-dialog-caption-container {padding: 5px 12px 5px 5px}","*.gig-composebox-title {margin-right:0;margin-left:5px;}","*.gig-comment .gig-comment-content {padding-left:0;padding-right:6px;}","*.gig-composebox-morebox *.gig-composebox-morebox-providers li {padding-left:0; padding-right: 18px; background-position:right;}","*.gig-comments-dialog-button {margin: 0 7px 0 0}","*.gig-comments-updates-full {text-align:left;}","*.gig-comments-updates-full .gig-comments-updates-link {margin: 0 0 0 11px;padding:0 15px 0 0; background-position:right center;}","*.gig-comments-updates-countonly .gig-comments-updates-link {margin-right:5px;}","*.gig-comments-fontbox {margin-left:8px;}","*.gig-comments-fontbox ul:after {left:-7px;right:auto;-webkit-transform:rotate(180deg);transform:rotate(180deg);}","ul.gig-composebox-sidebar {float:left;margin-left:-29px}","*.gig-composebox-textarea ul, .gig-comment-body ul {padding-right:20px;}","*.gig-selfreview-field-title {margin:0 0 0 7px;}","*.gig-selfreview-nameAndLogout {padding: 0 47px 0 0;}","*.gig-composebox-title, *.gig-composebox-name {margin:0 0 0 5px;}","*.gig-comment-rating-title {margin:0 0 0 10px; min-width:53px;}","*.gig-comment-providerLogo {text-align:left;}","*.gig-comment-providerLogo img {margin-left:-2px;margin-right:0;}","*.gig-comment-viaProvider {background-position:right center;padding: 0 12px 0 0;}","*.gig-usertagging-suggestions li { padding-right:8px; }","*.gig-usertagging-suggestions li *.gig-usertagging-username { margin-right:8px; }","*.gig-comment-content .gig-media-caption { margin:8px 0px 0px 12px; }","*.gig-media-caption-url { background-position:right; padding-right:23px; padding-left:0px; }","*.gig-comments-mediaplayer-caption { background-position:right;padding-right:23px;text-align:right; }","*.gig-mediabox-url { padding-right:8px; margin-left:5px;padding-left:0px;margin-right:0px; }","*.gig-comments-mediabox { padding-right:0px;padding-left:8px; }","*.gig-mediabox-fields:after { left:1px; right:auto; -webkit-transform:rotate(180deg);transform:rotate(180deg); }","*.gig-composebox-sidebar-button:last-child:nth-child(-n+2) { border-radius:0 0 3px 0; }","*.gig-composebox-sidebar-button { transform:scaleX(-1);-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1); }","*.gig-comment-vote-neg {margin: 0 15px 0 0;}","*.gig-comment-repliesArrow-collapsed .gig-comment-repliesArrow-img {-webkit-transform:rotate(-270deg); transform:rotate(-270deg);}","*.gig-comment-time {margin:2px 10px 0 0;}","*.gig-composebox-cancel { margin-left: 6px; margin-right: 0px}","*.gig-comment-edited { margin:2px 5px 0 0; float: left;}","*.gig-comment .gig-comment-editbox {margin-left:0px;margin-right:-41px;}","*.gig-comment-footer-right * {direction:ltr;text-align:right;}","*.gig-comment-vote-posneg *.gig-comment-vote-neg {margin-left:0;margin-right:2px;}","*.gig-comment-vote-total {margin-right:0;margin-left:5px;}","*.gig-comment-data-removed {margin-right: -41px;}","*.gig-comment-userBadge { margin-right: 0px; margin-left: 6px;}","*.gig-comment-withBadges *.gig-comment-username { margin-right:0px; margin-left:6px; }","*.gig-comment-withBadges *.gig-comment-time { float:left; margin-right:6px;}"].join(""),mobile:[".gig-comments-container {padding: 0 10px; -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}",".gig-comments-container * {transition: none;font-size:16px;-webkit-text-size-adjust:none;}","*.gig-comments-linksContainer li {padding: 0 3px 0 0;margin-right:3px;}","*.gig-comments-linksContainer li:after {margin-bottom:7px;margin-left:7px;}","*.gig-comment-time {font-size: 13px;}","*.gig-comment-footer * {font-size:15px}","*.gig-composebox-follow {font-size:16px; padding-left: 20px;}","*.gig-comments-share-provider {height:23px;background-position: 31px center;padding:4px 10px;width:39px;}","*.gig-comments-checkbox {width: 16px;height: 16px; }","*.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("sharetoProviders/checkmark",1)+"')}",".gig-comments-hires-icons *.gig-comments-checkbox-checked *.gig-comments-share-provider-checkbox {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("sharetoProviders/checkmark")+"')}","*.gig-composebox-share-text {line-height:30px;}","*.gig-comments-share-more {height: 22px;}","*.gig-comment-data {padding: 0}","*.gig-comment-self-data {padding-left:41px;}","*.gig-comment-replies {padding-left: 15px}",".gig-composebox-open textarea.gig-composebox-textarea {height:45px;}","*.gig-comment-replybox *.gig-composebox-close { vertical-align:middle; }","*.gig-comment-editbox *.gig-composebox-close { vertical-align:middle; }",".gig-composebox-open *.gig-composebox-textarea {min-height:45px;}","*.gig-comments-dialog {width: auto;min-width:0;}","*.gig-comments-dialog-textbox-button {float:right;margin-top:10px;}","*.gig-comments-dialog-body {overflow:hidden}","*.gig-composebox-textarea, *.gig-composebox-textarea *, *.gig-composebox-summary input {font-size:18px;}","*.gig-comments-count {line-height:30px}","*.gig-comment-vote-pos, .gig-comment-vote-neg {padding-left:30px;}","*.gig-comment-vote-pos {background-size:27px 27px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up")+"')}","*.gig-comment-vote-pos-down{background-size:27px 27px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down{background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg {background-size:27px 27px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down")+"');}","*.gig-comment-vote-neg-down {background-size:27px 27px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down_pressed",1)+"');background-position:0 6px}",".gig-comments-hires-icons *.gig-comment-vote-neg-down {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("mobile/Thumbs_down_pressed")+"');}","*.gig-comment-footer-right div {height:31px;line-height:31px;}","*.gig-composebox-header-left *, *.gig-composebox-header-right *, *.gig-composebox-logout span {font-size:15px;}","*.gig-comment .gig-comment-replybox {margin-bottom:10px;}","*.gig-comment .gig-comment-editbox {margin-bottom:10px;}","*.gig-comment-flag {display:none}","*.gig-comment-rating, *.gig-comment-rating-drop {margin-bottom:3px;}","*.gig-comment-summary {margin-left:2px;}","*.gig-comments-container.gig-comment-rating-dimensions {padding: 10px;}","*.gig-composebox-rating, *.gig-selfreview-rating {padding: 3px 0; margin: 5px 0}","*.gig-composebox-rating-star, *.gig-selfreview-rating-star {padding-right:4px;width: 21px; height:20px;background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star, .gig-comments-hires-icons *.gig-selfreview-rating-star {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_gray_big")+"')}","*.gig-composebox-rating-star-full, *.gig-selfreview-rating-star-full {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_big",1)+"')}",".gig-comments-hires-icons *.gig-composebox-rating-star-full, .gig-comments-hires-icons *.gig-selfreview-rating-star-full {background-image:url('"+t.CommentsUtils.Images.getPhotoFullName("Star_yellow_big")+"')}","*.gig-composebox-rating-value {margin:0;}","*.gig-selfreview-rating .gig-comment-rating-value {margin: 2px 5px}","ul.gig-comments-header-right {margin-left:10px}","*.gig-comments-count {line-height:normal}","*.gig-comment-footer-right {margin-left:10px;}","*.gig-comment-footer-left, *.gig-comments-header-left *, *.gig-comments-linksContainer {line-height:31px;}","*.gig-comments-linksContainer li:after {margin-bottom:10px;}","*.gig-comments-guestbox {width: 178px;}","*.gig-composebox-morebox {padding:0}","*.gig-comments-updates-visible {height:auto;min-height:50px;}","*.gig-comments-updates-full .gig-comments-updates-link {top:0}","*.gig-comment-body, .gig-comment-body * {line-height:20px;}","*.gig-composebox-withBadges *.gig-composebox-title { bottom: 5px; }","*.gig-comment .gig-comment-editbox {margin-left:0;}"].join(""),mobileRtl:["*.gig-comment-replies {padding-left:0;padding-right:15px;}","*.gig-comment-data {padding: 0}","*.gig-comment-self-data {padding-left:0;padding-right:41px;}","*.gig-comments-share-provider {background-position:11px;}","*.gig-comment .gig-comment-editbox {margin-right:0;}"].join(""),nonMobile:[".gig-comments-container *  {font-size:12px;transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86); -webkit-transition: none 500ms cubic-bezier(0.785, 0.135, 0.15, 0.86)}","*.gig-comments-linksContainer li:hover, *.gig-comments-linksContainer a:hover {text-decoration:underline;text-decoration-skip:all}","*.gig-comment-vote-pos:hover {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_hover")+"')}","*.gig-comment-vote-neg:hover {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_hover",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_hover")+"')}","*.gig-comment-footer li:hover, *.gig-comment-repliesArrow:hover div {text-decoration:underline}","*.gig-comment-self-data:hover *.gig-comment-flag, *.gig-comment-flag-visible {visibility:visible; }","*.gig-comment-vote-pos-down:hover {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-pos-down:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_up_pressed")+"')}","*.gig-comment-vote-neg-down:hover {background-size:14px 14px;background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed",1)+"')}",".gig-comments-hires-icons *.gig-comment-vote-neg-down:hover {background-image: url('"+t.CommentsUtils.Images.getPhotoFullName("Thumbs_down_pressed")+"')}"].join("")}}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){e.defaultTemplates={commentsPlugin:['<div class="gig-comments-composebox"></div>','<div class="gig-comments-header"></div>','<div class="gig-comments-updates"></div>','<div class="gig-comments-comments"></div>','<div class="gig-comments-more"></div>'].join(""),commentsPluginComposeBottom:['<div class="gig-comments-header"></div>','<div class="gig-comments-updates"></div>','<div class="gig-comments-comments"></div>','<div class="gig-comments-more"></div>','<div class="gig-comments-composebox"></div>'].join(""),header:['<div class="gig-comments-header-left">','<div class="gig-comments-count"></div>',"</div>",'<ul class="gig-comments-header-right gig-comments-linksContainer">','<li class="gig-comments-sort">$sort</li>','<li class="gig-comments-subscribe">$subscribe</li>','<li class="gig-comments-rss">$rss</li>',"</ul>"].join(""),updates:['<div class="gig-comments-updates-text"></div>','<div class="gig-comments-updates-link"></div>'].join(""),comment:['<div class="gig-comment-title"></div>','<div class="gig-comment-photo"></div>','<div class="gig-comment-data">','<div class="gig-comment-editbox"></div>','<div class="gig-comment-self-data">','<div class="gig-comment-content">','<div class="gig-comment-header">','<div class="gig-comment-header-right">','<div class="gig-comment-viaProvider"></div>','<span class="gig-comment-edited">($edited)</span>','<span class="gig-comment-time"></span>',"</div>",'<div class="gig-comment-header-left">','<span class="gig-comment-username"></span>',"</div>","</div>",'<div class="gig-comment-status"></div>','<div class="gig-comment-body"></div>','<div class="gig-comment-mediaItem"></div>',"</div>",'<div class="gig-comment-footer">','<div class="gig-comment-footer-left">','<ul class="gig-comments-linksContainer">','<li class="gig-comment-likeLink">$like</li>','<li class="gig-comment-replyLink">$reply</li>','<li class="gig-comment-editLink">$edit</li>','<li class="gig-comment-deleteLink">$delete</li>','<li class="gig-comment-shareLink">$share</li>','<li class="gig-comment-repliesArrow">','<div class="gig-comment-repliesArrow-text"></div>','<div class="gig-comment-repliesArrow-img"></div>',"</li>","</ul>",'<div class="gig-comment-flag"></div>',"</div>",'<div class="gig-comment-footer-right">','<div class="gig-comment-vote-total"></div>','<div class="gig-comment-vote-pos" title="$like"></div>','<div class="gig-comment-vote-neg" title="$unlike"></div>',"</div>","</div>","</div>",'<div class="gig-comment-replybox"></div>','<div class="gig-comment-replies"></div>',"</div>"].join(""),mediaItem:['<div class="gig-media-display">','<div class="gig-media-thumbnail"></div>','<div class="gig-media-overlay">','<div class="gig-media-cancel"></div>','<div class="gig-media-play"></div>',"</div>","</div>",'<div class="gig-media-caption" > ','<a href="$url" target="_blank" class="gig-media-caption-url" style="background-image:url($providerIcon);">$displayUrl</a>','<div class="gig-media-caption-text">$caption</div>',"</div>"].join(""),dialog:['<div class="gig-comments-dialog">','<div class="gig-comments-dialog-caption-container">','<div class="gig-comments-dialog-caption"></div>','<div class="gig-comments-dialog-close"></div>',"</div>",'<div class="gig-comments-dialog-body"></div>','<div class="gig-comments-dialog-buttons">','<div class="gig-comments-dialog-button gig-comments-dialog-button-ok"></div>','<div class="gig-comments-dialog-button gig-comments-dialog-button-cancel"></div>',"</div>","</div>"].join(""),emailTextboxDialogBody:['<div class="gig-comments-dialog-text">$text</div>','<div class="gig-comments-dialog-textbox-container">','<input type="textbox" class="gig-comments-dialog-textbox" value="$email" />',"</div>",'<div class="gig-comments-dialog-button gig-comments-dialog-textbox-button">$buttonText</div>','<div class="gig-comments-dialog-error"></div>'].join(""),photo:['<img class="gig-comment-img" alt="" src="$photoURL" style="vertical-align:top" />$providerImage'].join(""),providerImage:'<div class="gig-comment-providerLogo"><img alt="" src="$providerImageUrl" style="vertical-align:top" /></div>',composebox:['<div class="gig-composebox-error"></div>','<div class="gig-composebox-header">','<div class="gig-composebox-login">','<div class="gig-composebox-social-login gig-comments-button">$login<div class="gig-composebox-login-icon"></div><div class="gig-composebox-login-drop-icon"></div></div>','<div class="gig-composebox-site-login">$login</div>','<div class="gig-composebox-or">$or</div>','<div class="gig-composebox-guest-login gig-comments-button">$guest</div>',"</div>",'<div class="gig-composebox-header-right">','<div class="gig-composebox-follow"></div>','<div class="gig-composebox-close"></div>',"</div>",'<div class="gig-composebox-header-left">','<div class="gig-composebox-title"></div>','<div class="gig-composebox-logout">(<span>$logout</span>)</div>','<div class="gig-composebox-ratings"></div>',"</div>","</div>",'<div class="gig-composebox-photo"></div>','<div class="gig-composebox-data">','<div class="gig-composebox-summary"><input class="gig-composebox-summary-input" data-placeholder="$summary" /></div>','<div class="gig-composebox-editor"></div>','<div class="gig-composebox-mediaItem"></div>','<div class="gig-composebox-footer">','<div class="gig-composebox-footer-right">','<div class="gig-composebox-postAnonymously">','<div class="gig-composebox-anon-checkbox gig-comments-checkbox"></div>','<div class="gig-composebox-anon-text">$postAnonymously</div>',"</div>",'<div class="gig-composebox-cancel gig-comments-button">$cancel</div>','<div class="gig-composebox-post gig-comments-button">$post</div>',"</div>",'<div class="gig-composebox-footer-left">','<div class="gig-composebox-share">','<div class="gig-composebox-share-text">$share</div>','<div class="gig-composebox-share-providers"></div>',"</div>","</div>","</div>","</div>"].join(""),editor:['<ul class="gig-composebox-sidebar">','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-font" title="$fontAlt"></li>','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-media" title="$mediaAlt"></li>','<li class="gig-composebox-sidebar-button gig-composebox-sidebar-tag" title="$tagAlt"></li>',"</ul>",'<div class="gig-composebox-textarea" contenteditable="true" data-placeholder="$write_a_comment"></div>',"<p></p>"].join(""),mediaItemPlayer:['<div class="gig-comments-mediaplayer-top">','<div class="gig-media-cancel"></div>',"</div>",'<div class="gig-comments-mediaplayer-content" style="height:${playerHeight}px;">$playerHTML</div>','<div class="gig-comments-mediaplayer-bottom">','<div class="gig-comments-mediaplayer-caption" style="background-image:url($providerIcon);">$caption</div>',"</div>"].join(""),guestbox:['<div class="gig-guestbox-fields">','<input type="text" class="gig-guestbox-nickname" data-placeholder="$nickname" />','<input type="text" class="gig-guestbox-email" data-placeholder="$email" />',"</div>",'<div class="gig-guestbox-text">${email_not_displayed_publicly}</div>','<div class="gig-guestbox-ok">$ok</div>','<div class="gig-guestbox-error"></div>'].join(""),sortbox:["<ul>",'<li data-sort="dateDesc">$most_recent</li>','<li data-sort="dateAsc">$oldest</li>','<li data-sort="votesDesc">$most_voted</li>','<li data-sort="ratingDesc">$ratings</li>',"</ul>"].join(""),fontbox:["<ul>",'<li class="gig-composebox-font-bold" data-command="bold"></li>','<li class="gig-composebox-font-italic" data-command="italic"></li>','<li class="gig-composebox-font-underline" data-command="underline"></li>','<li class="gig-composebox-font-bullets" data-command="bullets"></li>',"</ul>"].join(""),mediabox:['<div class="gig-mediabox-fields">','<input type="text" class="gig-mediabox-url" placeholder="${enter_url}" value="$url" />','<div class="gig-mediabox-ok">$ok</div>','<div class="gig-mediabox-text">${add_media_item}</div>',"</div>"].join(""),composeShareMoreBox:['<div class="gig-composebox-morebox-caption">','<div class="gig-composebox-morebox-title">$more_share_destinations</div>','<div class="gig-composebox-morebox-close"></div>',"</div>",'<ul class="gig-composebox-morebox-providers">',"</ul>"].join(""),userTaggingBox:['<div class="gig-comments-usertaggingbox gig-comments-container">','<div class="gig-usertagging-title">$title</div>','<ul class="gig-usertagging-suggestions">',"</ul > ","</div> "].join(""),userTaggingOption:['<img src="$photoURL" alt="" class="gig-usertagging-userimage"/><span class="gig-usertagging-username">$name</span>'].join(""),rating:'<div class="gig-comment-rating-title"></div><div class="gig-comment-rating-value"></div>',composeboxRating:'<div class="gig-composebox-rating-title"></div><div class="gig-composebox-rating-value"></div>',commentTitle:['<div class="gig-comment-rating"></div>','<div class="gig-comment-rating-drop"></div>','<div class="gig-comment-summary"></div>'].join(""),myReview:['<div class="gig-selfreview-header">','<div class="gig-selfreview-header-left">','<div class="gig-composebox-photo"></div>','<div class="gig-selfreview-nameAndLogout">','<div class="gig-selfreview-yourReview">$your_review</div>','<div class="gig-composebox-name"></div>','<div class="gig-composebox-logout">(<span>$logout</span>)</div>',"</div>",'<div class="gig-selfreview-ratings"></div>',"</div>",'<div class="gig-selfreview-header-right">','<div class="gig-composebox-follow"></div>',"</div>","</div>",'<div class="gig-selfreview-summary-container">','<span class="gig-selfreview-field-title">$summary</span><span class="gig-selfreview-summary"></span>',"</div>",'<div class="gig-selfreview-body-container">','<span class="gig-selfreview-field-title">$review</span><span class="gig-selfreview-body"></span>',"</div>"]}}(t=e.comments||(e.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(t,i,o,s){this.plugin=t,this.container=i,this.onClose=s,this.lastSelection={start:-1},this.data=e.utils.object.clone(o,!0,!1),this.data.ratings||(this.data.ratings={})}return i.prototype.getText=function(e,t,i){return this.plugin.getText(e,t,i)},i.prototype.getElement=function(t){var i=e.utils.DOM.getElementsByClass(this.container,"gig-composebox-"+t);return i&&i.length>0?i[0]:null},i.prototype.buildUIElementsObj=function(){this.uiElements={header:this.getElement("header"),title:this.getElement("title"),photo:this.getElement("photo"),textArea:this.getElement("textarea"),editor:this.getElement("editor"),summary:this.getElement("summary"),mediaItem:this.getElement("mediaItem"),summaryInput:this.getElement("summary-input"),name:this.getElement("name"),sidebar:this.getElement("sidebar"),sidebarButtons:{richText:this.getElement("sidebar-font"),addMediaItem:this.getElement("sidebar-media"),tagUser:this.getElement("sidebar-tag")},submitButton:this.getElement("post"),closeButton:this.getElement("close"),cancelButton:this.getElement("cancel"),loginBar:this.getElement("login"),socialLoginButton:this.getElement("social-login"),siteLoginButton:this.getElement("site-login"),guestLoginButton:this.getElement("guest-login"),logoutLink:this.getElement("logout"),followLink:this.getElement("follow"),shareSection:this.getElement("share"),shareProviders:this.getElement("share-providers"),postAnonymouslySection:this.getElement("postAnonymously"),postAnonymouslyCheckbox:this.getElement("anon-checkbox"),ratings:this.getElement("ratings"),ratingsOverall:this.getElement("rating-_overall"),errorMessage:this.getElement("error")}},i.prototype.getLoginProvider=function(){var e=this.plugin.user.loginProvider;if(!e)for(var t in this.plugin.user.identities){e=t;break}return e},i.prototype.isLoginDropdownEnabled=function(){return!this.data.isReply()&&(1==this.plugin.params.showLoginBar||this.plugin.settings.useSiteLogin)},i.prototype.hideElement=function(e,t){e&&(t?e.parentElement.removeChild(e):e.style.display="none")},i.prototype.open=function(){this.render(),this.focus()},i.prototype.render=function(){if(!this.container)return void(this.container.style.display="none");var i=this.plugin.textMode==t.TextMode.COMMENTS?this.getText("write_a_comment"):this.getText("write_a_review");this.container.innerHTML=e.utils.templates.fill(this.plugin.templates.composebox,{write_a_comment:i,logout:this.getText("logout"),post:this.getSubmitText(),cancel:this.getText("cancel"),postAnonymously:this.getText("post_anonymously"),share:this.getText("share_colon"),login:this.getText("login"),or:this.getText("or"),guest:this.getText("guest"),summary:this.plugin.textMode==t.TextMode.COMMENTS?this.getText("summary"):this.getText("review_summary")});var o=this.getElement("editor");o.innerHTML=e.utils.templates.fill(this.plugin.templates.editor,{write_a_comment:i,fontAlt:this.getText("rich_text_formatting"),mediaAlt:this.getText("embed_a_media_item"),tagAlt:this.getText("tag_commenters")}),this.buildUIElementsObj();var s=this.getGuestUser();if(!this.plugin.user.isConnected&&s.isGuest&&this.plugin.settings.allowGuest&&(this.plugin.user=s),this.uiElements.editor&&"disabled"==this.plugin.settings.enableCommentBody&&(this.uiElements.editor.style.display="none"),this.uiElements.summary){if(this.uiElements.summaryInput){var n=this.uiElements.summaryInput.getAttribute("data-placeholder");e.global.setPlaceholder(this.uiElements.summaryInput,n,"gig-comments-placeholder")}this.uiElements.summary.style.display=this.data.isReply()||"disabled"==this.plugin.settings.enableCommentTitles?"none":""}this.renderSidebar(),this.renderRatings(),this.afterRender(),this.activateOnRender(),this.bindEvents()},i.prototype.activateOnRender=function(){var i=this;(this.data.isReply()||this.plugin.textMode==t.TextMode.REVIEWS)&&(e.utils.DOM.addClassToElement(this.container,"gig-comment-replybox-open"),this.plugin.isMobileUI?this.activate():window.setTimeout(function(){return i.activate()},10))},i.prototype.renderSidebar=function(){if(this.uiElements.sidebar){if(!this.uiElements.editor||"disabled"==this.plugin.settings.enableCommentBody||this.plugin.isMobileUI)return void(this.uiElements.sidebar.style.display="none");if(this.uiElements.sidebarButtons.richText){var t=this.uiElements.sidebarButtons.richText;this.plugin.settings.enableRichTextEditing||(t.parentElement.removeChild(t),this.uiElements.sidebarButtons.richText=null)}if(this.uiElements.sidebarButtons.addMediaItem){var t=this.uiElements.sidebarButtons.addMediaItem;this.plugin.settings.enableMediaItems||(t.parentElement.removeChild(t),this.uiElements.sidebarButtons.addMediaItem=null)}if(this.uiElements.sidebarButtons.tagUser){var t=this.uiElements.sidebarButtons.tagUser;this.plugin.settings.enableUserTagging||(t.parentElement.removeChild(t),this.uiElements.sidebarButtons.tagUser=null)}(this.uiElements.sidebarButtons.richText||this.uiElements.sidebarButtons.addMediaItem||this.uiElements.sidebarButtons.tagUser)&&e.utils.DOM.addClassToElement(this.uiElements.editor,"gig-composebox-editor-with-sidebar")}},i.prototype.activate=function(){e.utils.DOM.addClassToElement(this.container,"gig-composebox-open")},i.prototype.close=function(t){this.container&&(this.container.innerHTML="",e.utils.DOM.removeClassFromElement(this.container,"gig-comment-replybox-open")),this.onClose&&this.onClose(t)},i.prototype.focus=function(){this.uiElements.textArea&&this.uiElements.textArea.focus()},i.prototype.updateUI=function(){this.uiElements&&(this.uiElements.name&&(this.uiElements.name.innerHTML=this.plugin.getUsername()),this.updateUserBadges(),this.updateLoginLogoutElements(),this.updateProfilePhoto(),this.updateTitle(),this.updateFollow(),this.updateRatings())},i.prototype.updateUserBadges=function(){if(this.uiElements.header&&(e.utils.DOM.removeClassFromElement(this.uiElements.header.parentElement,"gig-composebox-withBadges"),this.plugin.removeUserBadges(this.uiElements.header),this.plugin.user.isLoggedIn&&this.plugin.userHighlightingGroups)){var t=this.uiElements.title,i=this.plugin.createUserHighlightingBadges(t,this.plugin.userHighlightingGroups);i&&e.utils.DOM.addClassToElement(this.uiElements.header.parentElement,"gig-composebox-withBadges")}},i.prototype.updateTitle=function(){if(this.uiElements.title){var e=this.getTitle();e?(this.uiElements.title.style.display="",this.uiElements.title.innerHTML=e):(this.uiElements.title.style.display="none",this.uiElements.title.innerHTML=e)}},i.prototype.updateProfilePhoto=function(){var i=this;if(this.uiElements.photo){var o=this.getLoginProvider(),s=e.utils.templates.fill(this.plugin.templates.photo,{photoURL:e.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL,t.CommentsUtils.Images.getPhotoFullName("Avatar_empty",this.plugin.pixelRatio)),providerImage:o&&"site"!=o&&"customopenid"!=o.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:t.imgBase+"providers/"+this.getLoginProvider()+"User_x1.png"});this.uiElements.photo.style.visibility="hidden",this.uiElements.photo.innerHTML=s;var n=this.uiElements.photo.getElementsByTagName("img");if(n&&n.length>0){var a=n[0];e.utils.DOM.addEventListener(a,"load",function(){e.global.scaleImageToContainer(n[0],!0,function(){i.uiElements.photo.style.visibility=""})})}}},i.prototype.updateLoginLogoutElements=function(){this.uiElements.logoutLink&&(this.plugin.user.isConnected||this.plugin.user.isGuest&&!this.isGuestLocked()?this.uiElements.logoutLink.style.display="":this.uiElements.logoutLink.style.display="none")},i.prototype.bindEvents=function(){var t=this;e.utils.DOM.addEventListener(this.uiElements.submitButton,"click",function(e){t.onSubmitClicked()}),e.utils.DOM.addEventListener(this.uiElements.cancelButton,"click",function(){t.close()}),e.utils.DOM.addEventListener(this.uiElements.closeButton,"click",function(){t.close()}),e.utils.DOM.addEventListener(this.uiElements.socialLoginButton,"click",function(){t.onLoginClick(t.uiElements.socialLoginButton)}),e.utils.DOM.addEventListener(this.uiElements.siteLoginButton,"click",function(){t.onSiteLoginClick()}),e.utils.DOM.addEventListener(this.uiElements.guestLoginButton,"click",function(){t.onGuestClick(t.uiElements.guestLoginButton)}),e.utils.DOM.addEventListener(this.uiElements.sidebarButtons.richText,"mousedown",function(i){t.showFontBox(t.uiElements.sidebarButtons.richText),e.utils.DOM.cancelEvent(i)}),e.utils.DOM.addEventListener(this.uiElements.sidebarButtons.addMediaItem,"mousedown",function(i){t.showMediaBox(t.uiElements.sidebarButtons.addMediaItem),e.utils.DOM.cancelEvent(i)}),e.utils.DOM.addEventListener(this.uiElements.sidebarButtons.tagUser,"mousedown",function(i){t.onSidebarTagClicked(i),e.utils.DOM.cancelEvent(i)}),this.uiElements.textArea&&(e.utils.DOM.addEventListener(this.uiElements.textArea,"keydown",function(o){e.utils.array.indexOf(i.allowedOnLimitKeys,o.keyCode)==-1&&t.uiElements.textArea.textContent.length>=t.plugin.settings.maxCommentLength&&e.utils.DOM.cancelEvent(o)}),e.utils.DOM.addEventListener(this.uiElements.textArea,"click",function(){t.activate()}),e.utils.DOM.addEventListener(this.uiElements.textArea,"keyup",function(e){(86==e.keyCode&&(e.ctrlKey||e.metaKey)||45==e.keyCode&&e.shiftKey)&&setTimeout(function(){t.handleUpdatedText()},1)}),e.utils.DOM.addEventListener(this.uiElements.textArea,"blur",function(){t.stopPolling(),"<br>"==t.uiElements.textArea.innerHTML&&(t.uiElements.textArea.innerHTML="")}),e.utils.DOM.addEventListener(this.uiElements.textArea,"focus",function(){t.startPolling()})),this.uiElements.logoutLink&&e.utils.DOM.addEventListener(this.uiElements.logoutLink,"click",function(){
t.plugin.user.isGuest?t.logoutGuest():e.socialize.logout(t.plugin.params)});var o=this.uiElements.followLink;if(o){e.utils.DOM.addEventListener(o,"click",function(){t.onFollowClick(o)}),e.utils.DOM.addEventListener(o,"mouseover",function(){t.plugin.isUserFollowing()&&(o.innerHTML=t.getText("unfollow"))});var s=function(){t.updateFollow()};e.utils.DOM.addEventListener(o,"mouseout",s),s()}this.uiElements.summaryInput&&e.utils.DOM.addEventListener(this.uiElements.summaryInput,"blur",function(){t.pendingValidation&&t.validate()})},i.prototype.onSubmitClicked=function(){this.validate()&&(this.updateDataFromUI(),this.submit(),this.plugin.mainComposeBox.updateUI())},i.prototype.updateDataFromUI=function(){var e=this.uiElements.summaryInput;null==this.data.commentText&&(this.data.commentText="");var i=[];this.uiElements.textArea&&(this.data.commentText=t.CommentsUtils.UserTagging.replaceUserTagsWithSpans(this.uiElements.textArea,i)),e?e.value&&e.placeholderCleared?this.data.commentTitle=e.value:this.data.commentTitle="":this.data.commentTitle=null,this.data.taggedUsers=i,this.data.mediaItems=this.mediaItem?[this.mediaItem]:[],this.data.highlightGroups=this.plugin.userHighlightingGroups,this.data.status=1===this.plugin.settings.moderationState?"pending":""},i.prototype.onStarClick=function(e){var t=e.target||e.srcElement,i=t.parentNode,o=i.getAttribute("data-dimension"),s=t.getAttribute("data-value");this.data.ratings||(this.data.ratings={}),this.data.ratings[o]=parseInt(s),this.pendingValidation&&this.validate(),this.onStarMouseOut(e)},i.prototype.onStarMouseOver=function(e){var t=e.target||e.srcElement,i=t.parentNode,o=t.getAttribute("data-value"),i=t.parentNode;this.updateStarsToValue(i,parseInt(o))},i.prototype.onStarMouseOut=function(e){var t=e.target||e.srcElement,i=t.parentNode,o=i.getAttribute("data-dimension");this.updateStarsToValue(i,this.data.ratings[o])},i.prototype.updateStarsToValue=function(t,i){if(void 0===i&&(i=0),t)for(var o=t.getElementsByClassName("gig-composebox-rating-star"),s=0;s<o.length;s++){var n=o[s];parseInt(n.getAttribute("data-value"))<=i?e.utils.DOM.addClassToElement(n,"gig-composebox-rating-star-full"):e.utils.DOM.removeClassFromElement(n,"gig-composebox-rating-star-full")}},i.prototype.onLoginClick=function(i,o,s){var n=this;e.utils.DOM.addClassToElement(i,"gig-composebox-social-login-down");var a=(e.utils.DOM.getElementPosition(i),document.createElement("div"));a.className="gig-comments-container gig-comments-loginbox"+(this.plugin.autoPixelRatio?" gig-comments-hires-icons":"");var r=this.plugin.params.enabledProviders||"*",g=this.plugin.params.disabledProviders||"",l=e.socialize.getProvidersByName(r);l=e.socialize.hideProvidersByName(l,g);var m,d=function(e){n.onLoginProviderClick(e,b,i,s)};if(l){var c=document.createElement("div");c.className="gig-signinbox-provider",c.innerHTML=this.getText("sign_in_with"),a.appendChild(c)}for(var p=0;p<l.length;p++){var u=l[p];if(u){var c=document.createElement("div");c.className="gig-loginbox-provider",c.style.backgroundImage='url("'+e._.getCdnResource("/gs/i/HTMLLogin/"+u.name+"_15.png")+'")',c.setAttribute("data-provider",u.name),p>1&&(c.style.display="none",m=!0),c.innerHTML=u.displayName,e.utils.DOM.addEventListener(c,"click",d),a.appendChild(c)}}if(o){var h=document.createElement("div");h.className="gig-loginbox-provider",h.style.backgroundImage="url('"+t.CommentsUtils.Images.getPhotoFullName("login_as_guest",this.plugin.pixelRatio)+"')",h.setAttribute("data-provider","guest"),h.innerHTML=this.getText("as_guest"),e.utils.DOM.addEventListener(h,"click",d),a.appendChild(h)}if(m){var x=document.createElement("div");x.className="gig-loginbox-provider",x.setAttribute("data-provider","more"),x.innerHTML=this.getText("show_more"),e.utils.DOM.addEventListener(x,"click",d),a.appendChild(x)}var b=e.pluginUtils.DOM.addPopoverNearElement(i,a,"bottom",0,this.plugin.isRtl,!1,"slideDown",function(o,s){s&&(o.target==i||e.utils.DOM.isChildOf(o.target,i))&&t.CommentsUtils.Events.cancelEvent(o)})},i.prototype.onLoginProviderClick=function(t,i,o,s){var n=t.target||t.srcElement,a=n.getAttribute("data-provider");if("more"==a){for(var r=e.utils.DOM.getElementsByClass(i,"gig-loginbox-provider"),g=0;g<r.length;g++)r[g].style.display="";n.style.display="none",e.pluginUtils.DOM.placePopoverNearElement(o,i,"bottom",0,this.plugin.isRtl,!1)}else"guest"==a?(this.onGuestClick(o,s),i.parentNode.removeChild(i)):(e.socialize.addConnection(this.plugin.params,{provider:a,callback:s}),i.parentNode.removeChild(i))},i.prototype.onGuestClick=function(i,o){var s=this;e.utils.DOM.addClassToElement(i,"gig-composebox-guest-login-down");var n=e.utils.DOM.getElementPosition(i),a=document.createElement("div");a.style.position="absolute",null!=a.style.zIndex&&(a.style.zIndex=(e.utils.DOM._nextZIndex++).toString()),a.className="gig-comments-container gig-comments-guestbox",e.utils.DOM.appendToBody(a);var r=e.utils.viewport.getInnerSize(),g=Math.max(0,e.localInfo.quirksMode?n.left-2:n.left);g+a.offsetWidth>r.w-40&&(g=r.w-a.offsetWidth-40),a.style.left=""+g+"px",a.style.top=""+(n.top+i.offsetHeight-2+(e.localInfo.quirksMode?-2:0))+"px",a.innerHTML=e.utils.templates.fill(this.plugin.templates.guestbox,{nickname:this.getText("nickname"),email:e.utils.sanitize.sanitizeAttribute(this.plugin.settings.isGuestEmailRequired?this.getText("email"):this.getText("email_optional")),ok:this.getText("ok"),email_not_displayed_publicly:this.getText("email_not_displayed_publicly")});var l=e.utils.DOM.getElementsByClass(a,"gig-guestbox-nickname")[0],m=e.utils.DOM.getElementsByClass(a,"gig-guestbox-email")[0];this.plugin.settings.requireGuestName?l&&e.global.setPlaceholder(l,l.getAttribute("data-placeholder"),"gig-comments-placeholder"):l.style.display="none",m&&e.global.setPlaceholder(m,m.getAttribute("data-placeholder"),"gig-comments-placeholder"),e.utils.DOM.appendToBody(a),this.plugin.isMobileUI||e.pluginUtils.animation.slideDown(a);var d=function(t){var i=(t||window.event,t.keyCode);27==i?(a.parentNode.removeChild(a),e.utils.DOM.removeEventListener(p,"click",h)):13==i&&h()},c=function(){e.utils.DOM.removeEventListener(document,"keydown",d),e.utils.DOM.removeEventListener(p,"click",h)};e.pluginUtils.DOM.removeElementOnDocClick(a,function(o,s){s&&(o.target==i||e.utils.DOM.isChildOf(o.target,i))&&t.CommentsUtils.Events.cancelEvent(o)},null,"click");var p=e.utils.DOM.getElementsByClass(a,"gig-guestbox-ok")[0],l=e.utils.DOM.getElementsByClass(a,"gig-guestbox-nickname")[0],m=e.utils.DOM.getElementsByClass(a,"gig-guestbox-email")[0],u=e.utils.DOM.getElementsByClass(a,"gig-guestbox-error")[0];if(l&&m&&p){var h=function(){var t="",i=m.placeholderCleared?m.value:"",n=l.placeholderCleared?l.value:"",r=""!=i.replace(/ /g,""),g=n.replace(/ /g,"").length>=3;s.plugin.settings.requireGuestName&&!g?t=s.getText("nickname_should_be_at_least_3_characters"):(s.plugin.settings.isGuestEmailRequired&&!r||r&&!e.pluginUtils.validation.isEmailValid(i))&&(t=s.getText("please_provide_a_valid_email_address")),u.innerHTML=t,t||(s.loginAsGuest(n,i),a.parentNode.removeChild(a),c(),o&&o())};e.utils.DOM.addEventListener(p,"click",h),e.utils.DOM.addEventListener(document,"keydown",d)}},i.prototype.renderRatings=function(){if(this.uiElements.ratings)if(this.data.isReply()||"disabled"==this.plugin.settings.enableRatings)this.uiElements.ratings.style.display="none";else{var t=[{id:"_overall",name:this.getText("overall_rating")}];this.plugin.settings.ratingDims&&(t=t.concat(this.plugin.settings.ratingDims)),this.uiElements.ratings.style.display="",this.uiElements.ratings.innerHTML="";for(var i=0,o=0;o<t.length;o++){var s=t[o],n=this.getRatingElement(s);"_overall"===s.id&&(this.uiElements.ratingsOverall=n),this.uiElements.ratings.appendChild(n);var a=e.utils.DOM.getElementsByClass(n,"gig-composebox-rating-title")[0];a&&(i=Math.max(a.offsetWidth,i))}i>0&&e._.plugins.utils.css.addCss("#"+this.plugin.containerID+" *.gig-composebox-rating-title { width:"+(i+1)+"px; }",this.plugin.params.cssPrefix)}},i.prototype.updateRatings=function(){if(this.uiElements.ratings){var t=[{id:"_overall",name:this.getText("overall_rating")}];this.plugin.settings.ratingDims&&(t=t.concat(this.plugin.settings.ratingDims));for(var i=0;i<t.length;i++){var o=t[i],s=e.utils.DOM.getElementsByAttribute(this.uiElements.ratings,"*","data-dimension",o.id)[0];this.updateStarsToValue(s,this.data.ratings[o.id])}}},i.prototype.getRatingElement=function(t){var i=this,o=document.createElement("div");o.className="gig-composebox-rating gig-composebox-rating-"+t.id,o.innerHTML=this.plugin.templates.composeboxRating;var s=e.utils.DOM.getElementsByClass(o,"gig-composebox-rating-title")[0];s&&(s.innerHTML=t.name+":");var n=e.utils.DOM.getElementsByClass(o,"gig-composebox-rating-value")[0];if(n){n.setAttribute("data-dimension",t.id);for(var a=1;a<6;a++){var r=document.createElement("div");r.setAttribute("data-value",a.toString()),e.utils.DOM.addClassToElement(r,"gig-composebox-rating-star"),e.utils.DOM.addEventListener(r,"mouseover",function(e){return i.onStarMouseOver(e)}),e.utils.DOM.addEventListener(r,"mouseout",function(e){return i.onStarMouseOut(e)}),e.utils.DOM.addEventListener(r,"click",function(e){return i.onStarClick(e)}),n.appendChild(r)}}return o},i.prototype.loginAsGuest=function(t,i){e.utils.cookie.set("_gig_comments_is_guest","1"),t&&e.utils.cookie.set("_gig_comments_nickname",t),i&&e.utils.cookie.set("_gig_comments_email",i),this.plugin.setUser(this.getGuestUser())},i.prototype.logoutGuest=function(){e.utils.cookie.remove("_gig_comments_is_guest"),e.utils.cookie.remove("_gig_comments_email"),e.utils.cookie.remove("_gig_comments_nickname"),this.plugin.setUser({})},i.prototype.onSiteLoginClick=function(t){t||(t=function(){}),e.events.dispatchForWidget({eventName:"siteLoginClicked",callback:t},this.plugin.params)},i.prototype.getGuestUser=function(){var t=e.utils.cookie.get("_gig_comments_is_guest"),i=e.utils.cookie.get("_gig_comments_nickname")||"",o=e.utils.cookie.get("_gig_comments_email")||"",s={UID:"",nickname:i,isGuest:"1"==t,email:o};return s},i.prototype.lockGuest=function(){e.utils.cookie.set("_gig_comments_locked","1")},i.prototype.isGuestLocked=function(){return e.utils.cookie.get("_gig_comments_locked")},i.prototype.startPolling=function(){var e=this;this.pollingInterval=setInterval(function(){e.handleUpdatedText()},100)},i.prototype.stopPolling=function(){"undefined"!=typeof this.pollingInterval&&(clearInterval(this.pollingInterval),delete this.pollingInterval)},i.prototype.validate=function(t){var i,o="gig-composebox-field-error",s=this.uiElements.textArea?this.uiElements.textArea.innerHTML:"",n=!0;return this.uiElements.editor&&e.utils.DOM.removeClassFromElement(this.uiElements.editor,o),this.uiElements.summary&&e.utils.DOM.removeClassFromElement(this.uiElements.summary,o),this.uiElements.ratingsOverall&&e.utils.DOM.removeClassFromElement(this.uiElements.ratingsOverall,o),"mandatory"!=this.plugin.settings.enableCommentTitles.split("_")[1]||!this.uiElements.summaryInput||this.data.isReply()||""!=this.uiElements.summaryInput.value.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")&&this.uiElements.summaryInput.placeholderCleared||(this.uiElements.summary&&e.utils.DOM.addClassToElement(this.uiElements.summary,o),i||(i=this.uiElements.summaryInput),n=!1),!this.data.isReply()&&"mandatory"!=this.plugin.settings.enableCommentBody.split("_")[1]||""!=s.replace(/ /g,"").replace(/\n/g,"").replace(/\r/g,"")||(this.uiElements.editor&&e.utils.DOM.addClassToElement(this.uiElements.editor,o),i||(i=this.uiElements.textArea),n=!1),!this.uiElements.ratingsOverall||"mandatory"!=this.plugin.settings.enableRatings.split("_")[1]||this.data.ratings&&this.data.ratings._overall||(e.utils.DOM.addClassToElement(this.uiElements.ratingsOverall,o),n=!1),this.uiElements.errorMessage&&(n?(this.pendingValidation=!1,this.uiElements.errorMessage.innerHTML="",this.uiElements.errorMessage.style.display="none"):(this.pendingValidation=!0,this.uiElements.errorMessage.innerHTML="ratingsOnly"==this.plugin.settings.mode?this.getText("please_select_your_rating"):this.getText("please_fill_required_fields"),this.uiElements.errorMessage.style.display="block",i&&t&&i.focus())),n},i.prototype.clear=function(){this.uiElements.textArea&&(this.uiElements.textArea.innerHTML="",this.uiElements.textArea.style.minHeight=""),this.uiElements.summaryInput&&(this.uiElements.summaryInput.value="",this.uiElements.summaryInput.refreshPlaceholder()),this.mediaItem&&(this.uiElements.mediaItem&&(this.uiElements.mediaItem.innerHTML=""),this.mediaItem=null),this.clearRatings()},i.prototype.clearRatings=function(){this.data.ratings={},this.updateRatings()},i.prototype.handleUpdatedText=function(){if(document.activeElement==this.uiElements.textArea){try{var i=t.CommentsUtils.Selection.getSelection(this.uiElements.textArea)}catch(e){this.stopPolling()}var o=this.uiElements.textArea.innerHTML;if(this.lastCommentHTML!=o){var s=this.stripUnallowedTags(o);if(s=this.stripCRLFTags(s),o!=s){s.length-o.length;this.uiElements.textArea.innerHTML=s,t.CommentsUtils.Selection.restoreSelection(this.uiElements.textArea,i)}this.uiElements.textArea.textContent.length>this.plugin.settings.maxCommentLength&&this.truncateTextNodes(this.uiElements.textArea,this.plugin.settings.maxCommentLength),this.lastCommentHTML=this.uiElements.textArea.innerHTML}i&&!this.plugin.isMobileUI&&(this.updateUserTaggingIfNeeded(i),this.lastSelection=e.utils.object.clone(i))}},i.prototype.getTextNodes=function(e,t){if(3===e.nodeType)t.push(e);else if(1===e.nodeType)for(var i=e.childNodes,o=0;o<i.length;o++)this.getTextNodes(i[o],t)},i.prototype.truncateTextNodes=function(e,t){var i=[];this.getTextNodes(e,i);for(var o=0;o<i.length;o++){var s=i[o];t>s.nodeValue.length?t-=s.nodeValue.length:0==t?s.nodeValue="":(s.nodeValue=s.nodeValue.substring(0,t),t=0)}},i.prototype.stripUnallowedTags=function(e){if(e){var t=i.alwaysAllowedTags+(this.plugin.settings.enableRichTextEditing?"|"+i.richTextAllowedTags:""),o=new RegExp("<((?!("+t+")[ >/])[a-z]+)[^<]*>|</((?!("+t+")[ >/])[a-z]+)>","gi");e=e.replace(o,""),e.indexOf('style="')!=-1&&(e=e.replace(/style="((.|\n)*?)"/g,""))}return e},i.prototype.stripCRLFTags=function(e){return e&&(e=e.replace(/\r|\n/g,"")),e},i.prototype.updateUserTaggingIfNeeded=function(e){var i=this;if(this.plugin.settings.enableUserTagging&&e&&e.start!=this.lastSelection.start&&e.start==e.end){var o=e.childText.replace(String.fromCharCode(160)," "),s=o.match(/\S+/g);if(s&&s.length>=0)var n=s[s.length-1];if(this.userTaggingBox)this.userTaggingBox.processTextChanged(o);else if(!this.userTaggingBox&&"undefined"!=typeof n&&0===n.lastIndexOf("@")){this.userTaggingBox=new t.UserTaggingBox(this,function(e,t){e&&t?i.insertUserTag(t,a):delete i.userTaggingBox},o);var a=o.lastIndexOf("@")}}},i.prototype.insertUserTag=function(e,i){if(i!==-1&&window.getSelection){this.uiElements.textArea.focus(),t.CommentsUtils.Selection.restoreSelection(this.uiElements.textArea,this.lastSelection);var o=window.getSelection();if(o.getRangeAt&&o.rangeCount){var s=o.getRangeAt(0);"undefined"!=typeof i&&(s.setStart(s.startContainer,i),s.deleteContents());var n=document.createTextNode(String.fromCharCode(160));s.insertNode(n),s.insertNode(e),n=document.createTextNode(String.fromCharCode(160)),s.insertNode(n);var a=document.createRange();a.setStartAfter(n),o.removeAllRanges(),o.addRange(a)}}},i.prototype.onFollowClick=function(i){var o=this;if(this.plugin.isUserFollowing())this.unfollow();else{var s=(this.plugin.textMode==t.TextMode.REVIEWS?"review":"comment",e.utils.templates.fill(this.plugin.templates.emailTextboxDialogBody,{text:this.plugin.textMode==t.TextMode.REVIEWS?this.getText("enter_your_email_to_receive_notifications_when_someone_comments_on_your_reviews_colon"):this.getText("enter_your_email_to_receive_notifications_when_someone_replies_to_your_comments_colon"),buttonText:this.getText("follow"),email:this.plugin.user.email})),n=this.plugin.showDialog(this.getText("notifications_settings"),s),a=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-textbox-button")[0];e.utils.DOM.addEventListener(a,"click",function(t){var i=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-textbox")[0];if(i){var s=i.value;if(e.pluginUtils.validation.isEmailValid(s))o.follow(i.value),n.parentNode.removeChild(n);else{var a=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-error")[0];a.innerHTML=o.getText("please_provide_a_valid_email_address")}}})}},i.prototype.follow=function(i){this.plugin.textMode==t.TextMode.REVIEWS?"review":"comment";e.comments.setUserOptions(this.plugin.params,{replyNotifications:"immediate",notificationsEmail:i,notificationsLanguage:this.plugin.params.lang}),this.plugin.userOptions||(this.plugin.userOptions={}),this.plugin.userOptions.replyNotifications="immediate",this.updateFollow()},i.prototype.unfollow=function(){e.comments.setUserOptions(this.plugin.params,{replyNotifications:"disabled"}),this.plugin.userOptions.replyNotifications="disabled",this.updateFollow()},i.prototype.updateFollow=function(){var i=e.utils.DOM.getElementsByClass(this.container,"gig-composebox-follow")[0];i&&(this.plugin.user.isConnected&&!this.plugin.user.isTempUser?(this.plugin.isUserFollowing()?(e.utils.DOM.addClassToElement(i,"gig-composebox-following"),i.innerHTML=this.getText("following"),i.title=""):(e.utils.DOM.removeClassFromElement(i,"gig-composebox-following"),this.plugin.isMobileUI?i.innerHTML=this.getText("follow"):i.innerHTML=this.plugin.textMode==t.TextMode.REVIEWS?this.getText("follow_replies_to_my_reviews"):this.getText("follow_replies_to_my_comments"),i.title=this.plugin.textMode==t.TextMode.REVIEWS?this.getText("notify_me_when_someone_comments_on_my_review"):this.getText("notify_me_when_someone_replies_to_my_comments")),i.style.display=""):i.style.display="none")},i.prototype.toggleSidebarButton=function(t,i){i?e.utils.DOM.addClassToElement(t,"gig-composebox-sidebar-button-down"):e.utils.DOM.removeClassFromElement(t,"gig-composebox-sidebar-button-down")},i.prototype.onSidebarTagClicked=function(i){var o=this,s=i.target||i.srcElement;this.userTaggingBox||s.className.indexOf("gig-composebox-sidebar-button-down")!=-1||(e.utils.DOM.addClassToElement(s,"gig-composebox-sidebar-button-down"),this.userTaggingBox&&this.userTaggingBox.cancel(),this.userTaggingBox=new t.UserTaggingBox(this,function(t,i){t&&i&&o.insertUserTag(i),delete o.userTaggingBox,e.utils.DOM.removeClassFromElement(s,"gig-composebox-sidebar-button-down")},""))},i.prototype.showSidebarBox=function(i,o,s){var n=this;if(i){var a=e.utils.DOM.getElementPosition(i);this.toggleSidebarButton(i,!0),o.style.position="absolute",null!=o.style.zIndex&&(o.style.zIndex=(e.utils.DOM._nextZIndex++).toString()),e.pluginUtils.animation.fadeIn(o),e.utils.DOM.appendToBody(o),this.plugin.isRtl?o.style.left=Math.max(0,a.left+i.offsetWidth)+"px":o.style.left=Math.max(0,a.left-o.offsetWidth)+"px",o.style.top=a.top+"px",e.pluginUtils.DOM.removeElementOnDocClick(o,function(e,o){o&&(n.toggleSidebarButton(i,!1),e.target==i&&t.CommentsUtils.Events.cancelEvent(e),s&&s())})}},i.prototype.showMediaBox=function(t){var i=this,o=document.createElement("div");o.className="gig-comments-container gig-comments-mediabox",o.innerHTML=e.utils.templates.fill(this.plugin.templates.mediabox,{url:this.mediaItem?this.mediaItem.url:"",enter_url:this.plugin.getText("enter_url"),add_media_item:this.plugin.getText("tip_use_trusted_urls"),ok:this.plugin.getText("ok")});var s=e.utils.DOM.getElementsByClass(o,"gig-mediabox-url")[0],n=e.utils.DOM.getElementsByClass(o,"gig-mediabox-ok")[0];if(n){var a=function(){e.utils.DOM.removeEventListener(document,"keydown",r),e.utils.DOM.removeEventListener(n,"click",g)},r=function(e){var t=(e||window.event,e.keyCode);27==t?(o.parentElement.removeChild(o),a()):13==t&&g()},g=function(){s&&s.value?(o.parentElement.removeChild(o),i.showMediaItemPreview(),i.toggleSidebarButton(t,!1),e.comments.analyzeMediaItem({categoryID:i.plugin.params.categoryID,urls:s.value,callback:function(t){!t.errorCode&&t.mediaItems&&1==t.mediaItems.length?(i.mediaItem=t.mediaItems[0],i.updateMediaItem()):(i.uiElements.errorMessage.style.display="block",i.uiElements.errorMessage.innerHTML=i.plugin.getText("the_provided_url_is_not_supported"),e.pluginUtils.DOM.hideElementOnDocClick(i.uiElements.errorMessage),i.removeMediaItemPreview())}})):(o.parentElement.removeChild(o),i.toggleSidebarButton(t,!1)),a()};e.utils.DOM.addEventListener(document,"keydown",r),e.utils.DOM.addEventListener(n,"click",g)}this.showSidebarBox(t,o,a),s.focus()},i.prototype.removeMediaItemPreview=function(){this.uiElements.mediaItem&&(this.uiElements.mediaItem.innerHTML=""),this.mediaItem=null},i.prototype.showMediaItemPreview=function(){if(this.uiElements.mediaItem){this.uiElements.mediaItem.innerHTML="",this.uiElements.editor&&e.utils.DOM.addClassToElement(this.uiElements.editor,"gig-composebox-editor-with-media");var t=document.createElement("div");e.utils.DOM.addClassToElement(t,"gig-composebox-media-preview"),this.uiElements.mediaItem.appendChild(t),t.style.height=.75*t.offsetWidth+"px"}},i.prototype.updateMediaItem=function(){var t=this;if(this.uiElements.mediaItem){var i=this.uiElements.mediaItem.childNodes[0];i.style.backgroundImage="";var o=function(){t.uiElements.mediaItem.innerHTML="",t.mediaItem=null,t.uiElements.editor&&e.utils.DOM.removeClassFromElement(t.uiElements.editor,"gig-composebox-editor-with-media")};this.plugin.buildMediaItemElement(i,this.mediaItem,!0,o)}},i.prototype.showFontBox=function(t){var i=this,o=document.createElement("div");o.innerHTML=this.plugin.templates.fontbox,o.className="gig-comments-container gig-comments-fontbox";for(var s=o.getElementsByTagName("li"),n=0;n<s.length;n++){var a=s[n];e.utils.DOM.addEventListener(a,"mousedown",function(s){var n=s.target||s.srcElement,a=n.getAttribute("data-command");a&&(o.parentNode.removeChild(o),i.toggleSidebarButton(t,!1),i.setFontCommand(a)),e.utils.DOM.cancelEvent(s)})}this.showSidebarBox(t,o)},i.prototype.setFontCommand=function(e){switch(e){case"bold":document.execCommand("bold",!1,!0);break;case"italic":document.execCommand("italic",!1,!0);break;case"underline":document.execCommand("underline",!1,!0);break;case"bullets":document.execCommand("InsertUnorderedList",!1,"newUL")}},i.prototype.submit=function(){},i.prototype.submitCallback=function(i){var o=this.plugin.getComment(this.data.ID);if(i.errorCode>0){var s;switch(i.errorCode){case 403037:s=this.getText("only_one_review_per_product_is_allowed");break;case 400124:s=this.getText("daily_commenting_limit_reached");break;case 400125:s=this.getText("commenting_frequency_limit_reached");break;case 403038:s=this.plugin.textMode==t.TextMode.COMMENTS?this.getText("comment_edit_rejected"):this.getText("review_edit_rejected");break;default:s=this.getText("an_error_has_occurred_please_try_again_later","%errorCode",i.errorCode)}s&&o.updateStatus(s),e.events.dispatchErrorFromResponse(this.plugin.params,i)}else i.comment&&(o.isTemp=!1,o.isPost=!0,o.reset(t.CommentData.fromRawData(i.comment)))},i.prototype.getSubmitText=function(){return""},i.prototype.afterRender=function(){},i.prototype.getTitle=function(){return""},i.alwaysAllowedTags="div|br|p|input|span",i.richTextAllowedTags="ul|li|u|i|b|strong|em",i.allowedOnLimitKeys=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145],i}();t.BaseComposeBox=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(t,i,o){var s=this;this.composeBox=t,this.onResult=i;var n=null;this.selectedIndex=0,o&&(n=this.getUserPrefix(o)),this.fetchRelatedUsers(n),this.keydownDelegate=function(e){s.processKeyDown(e)},e.utils.DOM.addEventListener(t.uiElements.textArea,"keydown",this.keydownDelegate)}return i.prototype.fetchRelatedUsers=function(t){var i=this,o=this.composeBox.plugin.getComment(this.composeBox.data.parentID);e.comments.getRelatedUsers({usernamePrefix:t,categoryID:this.composeBox.plugin.params.categoryID,streamID:this.composeBox.plugin.params.streamID,parentCommentID:o?o.id:null,limit:10,cacheTimeout:3e4,callback:function(e){e.relatedUsers?(i.relatedUsers=e.relatedUsers,i.container?i.updateUsers():i.draw()):i.cancel()}})},i.prototype.draw=function(){var i=this,o=this.composeBox.uiElements.editor,s=document.createElement("div");s.innerHTML=e.utils.templates.fill(this.composeBox.plugin.templates.userTaggingBox,{title:this.composeBox.plugin.getText("tag_a_commenter")}),this.container=e.pluginUtils.DOM.addPopoverNearElement(o,s,"bottom",0,!this.composeBox.plugin.isRtl,!1,null,function(e,o){i.cancel(),e&&o&&t.CommentsUtils.Events.cancelEvent(e)},[this.composeBox.uiElements.textArea],"mousedown"),this.changeSelectedByIndex(0),this.updateUsers();var n=this.getElement("suggestions");e.utils.DOM.addEventListener(n,"mouseover",function(t){for(var o=t.target||t.srcElement;o&&!e.utils.DOM.isElementClass(o,"gig-usertagging-user");)o=o.parentElement;var s=i.getChildNodeIndex(n,o);i.changeSelectedByIndex(s)}),e.utils.DOM.addEventListener(n,"mousedown",function(t){e.utils.DOM.cancelEvent(t),i.confirmSelection()})},i.prototype.getChildNodeIndex=function(e,t){for(var i=0;i<e.childNodes.length;i++)if(e.childNodes[i]==t)return i;return-1},i.prototype.updateUsers=function(){if(0==this.relatedUsers.length)this.cancel();else{for(var i=!1,o=this.getElement("suggestions"),s=0,n=o.childElementCount,a=0;a<n;a++){var r={};s<this.relatedUsers.length&&(r=this.relatedUsers[s]);var g=o.childNodes[s];r.uid&&r.uid==g.getAttribute("data-gig-uid")?(r.uid==this.selectedUID&&(i=!0,this.selectedIndex=s),s++):o.removeChild(g)}for(var a=s;a<this.relatedUsers.length;a++){var l=this.relatedUsers[a],m=document.createElement("li");e.utils.DOM.addClassToElement(m,"gig-usertagging-user"),l.uid&&m.setAttribute("data-gig-uid",l.uid),m.innerHTML=e.utils.templates.fill(this.composeBox.plugin.templates.userTaggingOption,{name:l.name,photoURL:e.global.getPhotoURL(l.photoURL,t.CommentsUtils.Images.getPhotoFullName("Avatar_empty",this.composeBox.plugin.pixelRatio))}),this.selectedUID&&l.uid==this.selectedUID&&(e.utils.DOM.addClassToElement(m,"gig-usertagging-selected"),this.selectedIndex=a,i=!0),o.appendChild(m);var d=m.getElementsByTagName("img");if(d&&d.length>0){var c=d[0];c.style.visibility="hidden",e.utils.DOM.addEventListener(c,"load",function(t){var i=t.target||t.srcElement;e.global.scaleImageToContainer(i,!0,function(){i.style.visibility=""})})}}i||this.changeSelectedByIndex(0)}},i.prototype.cancel=function(){this.container&&this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.onResult&&this.onResult(null,null),e.utils.DOM.removeEventListener(this.composeBox.uiElements.textArea,"keydown",this.keydownDelegate)},i.prototype.getUserPrefix=function(e,t){if("undefined"==typeof t&&(t=e.lastIndexOf("@")),t!=-1){var i="";return e.length>1&&(i=e.substring(t+1)),i}},i.prototype.processTextChanged=function(e){var t=e.lastIndexOf("@");if(0===t||t>0&&" "==e.charAt(t-1)){var i=this.getUserPrefix(e,t);"undefined"!=typeof i&&this.fetchRelatedUsers(i)}else this.cancel()},i.prototype.getElement=function(t){return e.utils.DOM.getElementsByClass(this.container,"gig-usertagging-"+t)[0]},i.prototype.changeSelectedByIndex=function(t){var i=this.getElement("suggestions"),o=this.relatedUsers.length;this.selectedUID="",this.selectedIndex>=0&&this.selectedIndex<o&&e.utils.DOM.removeClassFromElement(i.childNodes[this.selectedIndex],"gig-usertagging-selected"),t>=0&&t<o?(this.selectedUID=this.relatedUsers[t].uid,e.utils.DOM.addClassToElement(i.childNodes[t],"gig-usertagging-selected")):t<0?t=-1:t>=o&&(t=o),this.selectedIndex=parseInt(t)},i.prototype.confirmSelection=function(){if(this.onResult){var i=this.relatedUsers[this.selectedIndex],o=t.CommentsUtils.UserTagging.createTaggedUserElement(i.name,i.uid);this.onResult(i.uid,o)}this.container&&this.container.parentElement.removeChild(this.container),e.utils.DOM.removeEventListener(this.composeBox.uiElements.textArea,"keydown",this.keydownDelegate)},i.prototype.processKeyDown=function(t){if(i.taggingConfirmationKeys.indexOf(t.keyCode)!=-1)this.relatedUsers&&this.selectedIndex<this.relatedUsers.length&&(e.utils.DOM.cancelEvent(t),this.confirmSelection());else if(i.taggingTerminatorKeys.indexOf(t.keyCode)!=-1)e.utils.DOM.cancelEvent(t),this.cancel();else if(t.keyCode in i.verticalKeys){var o=i.verticalKeys[t.keyCode];"up"==o?this.changeSelectedByIndex(this.selectedIndex-1):this.changeSelectedByIndex(this.selectedIndex+1),e.utils.DOM.cancelEvent(t)}},i.taggingTerminatorKeys=[27],i.taggingConfirmationKeys=[9,13],i.verticalKeys={38:"up",40:"down"},i.horizontalKeys={37:"left",39:"right"},i}();t.UserTaggingBox=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(e,t,i,o,s,n,a,r){void 0===i&&(i=0),void 0===s&&(s=!1),void 0===n&&(n=!1),this.plugin=e,this.level=i,this.viaProvider=o,this.isTemp=s,this.isNew=n,this.error=a,this.info=r,this.replies=[],this.descendantsCount=0,this.reset(t),this.updateParents()}return i.prototype.updateParents=function(){var t=this.getParent();t&&t.data&&t.data.replies&&e.utils.array.indexOf(t.data.replies,this.data)==-1&&t.data.replies.push(this.data),t&&t.replies&&e.utils.array.indexOf(t.replies,this)==-1&&t.replies.push(this),t||e.utils.array.indexOf(this.plugin.comments,this)!=-1||this.plugin.comments.push(this)},i.prototype.updateDescendantsCountInParents=function(e){for(;e;)e.descendantsCount=(e.descendantsCount||0)+(this.isRemovedComment()||!this.data.status?0:1),e.updateRepliesCount(),this.plugin.setLinks(e.getContainer()),e=e.getParent()},i.prototype.setElementHtml=function(e,t){var i=this.getElement(e);i&&(i.innerHTML=t)},i.prototype.bindToElement=function(t,i,o){var s=this.getElement(t);s&&e.utils.DOM.addEventListener(s,i,o.bind(this))},i.prototype.getElement=function(t){var i=e.utils.DOM.getElementsByClass(this.getContainer(),"gig-comment-"+t);return i.length>0?i[0]:null},i.prototype.dispose=function(){this.plugin.removeComment(this)},i.prototype.reset=function(e,t,o){if(delete this.plugin.commentInstances[this.id],this.id=e.ID,this.plugin.commentInstances[this.id]=this,this.data=e,isNaN(this.data.posVotes)&&(this.data.posVotes=0),isNaN(this.data.negVotes)&&(this.data.negVotes=0),e.sender.name&&"anonymous"==e.sender.name.toLowerCase()?e.sender.name=this.plugin.getText("anonymous"):!e.sender.name&&e.isModerator?e.sender.name=this.plugin.getText("moderator"):e.sender.name&&"guest"==e.sender.name.toLowerCase()&&(e.sender.name=this.plugin.getText("guest")),this.updateAll(),e.replies){this.descendantsCount=0;for(var s=0;s<e.replies.length;s++){var n=e.replies[s],a=this.plugin.getComment(n.ID);a?a.reset(n,t):a=new i(this.plugin,n,this.level+1,null,null,this.isNew||t)}this.updateRepliesCount()}this.updateDescendantsCountInParents(this.getParent())},i.prototype.removeChild=function(t){e.utils.array.removeByProperty(this.replies,"id",t),e.utils.array.removeByProperty(this.data.replies,"ID",t)},i.prototype.getUsername=function(){return this.data.sender.name||(this.data.isModerator?this.plugin.getText("moderator"):this.plugin.getText("guest"))},i.prototype.getContainer=function(){return this.container},i.prototype.getParent=function(){return this.plugin.getComment(this.data.parentID)},i.prototype.getText=function(e,t,i){return this.plugin.getText(e,t,i)},i.prototype.expand=function(){var t=this.getElement("repliesArrow"),i=this.getElement("replies");t&&i&&(e.utils.DOM.removeClassFromElement(i,"gig-comment-replies-collapsed"),e.utils.DOM.removeClassFromElement(t,"gig-comment-repliesArrow-collapsed")),this.updateReplies(!0)},i.prototype.collapse=function(){var t=this.getElement("repliesArrow"),i=this.getElement("replies");t&&i&&(window.setTimeout(function(){e.utils.DOM.addClassToElement(i,"gig-comment-replies-collapsed")},1),
e.utils.DOM.addClassToElement(t,"gig-comment-repliesArrow-collapsed")),this.detachReplies(),i.innerHTML=""},i.prototype.isCollapse=function(){return this.container.getElementsByClassName("gig-comment-replies-collapsed").length>0},i.prototype.expandCollapse=function(){var t=this.getElement("replies");t&&(e.utils.DOM.isElementClass(t,"gig-comment-replies-collapsed")?this.expand():this.collapse())},i.prototype.detachReplies=function(){for(var e=0;e<this.replies.length;e++){var t=this.replies[e];t.container=null,t.plugin.tempComposeBox&&t.plugin.tempComposeBox.close(),t.detachReplies()}},i.prototype.updateRepliesCount=function(){var e=this.getContainer();if(e){var i=this.getElement("repliesArrow"),o=this.getElement("repliesArrow-text"),s=this.descendantsCount||0;if(s>0){if(i&&(i.style.display=""),o){var n;n=1==s?this.plugin.textMode==t.TextMode.COMMENTS?"one_reply":"one_comment":this.plugin.textMode==t.TextMode.COMMENTS?"num_replies":"num_comments";var a=this.getText(n,"%num",s.toString());"fr"==this.plugin.params.lang&&0==s&&(a=this.getText(this.plugin.textMode==t.TextMode.COMMENTS?"one_reply":"one_comment","%num",s.toString()),a=a.replace("1","0")),o.innerHTML=a}}else i&&(i.style.display="none");this.plugin.setLinks(e)}},i.prototype.markAsFlagged=function(){this.isFlagged=!0;var t=this.getElement("flag");t&&e.utils.DOM.addClassToElement(t,"gig-comment-flag-submitted"),this.plugin.state.flags||(this.plugin.state.flags={});var i=this.plugin.user.isGuest?"guest":this.plugin.user.UID;this.plugin.state.flags[i+"_"+this.id]=!0},i.prototype.getHtml=function(){return e.utils.templates.fill(this.plugin.templates.comment,{commentId:this.id,like:this.getText("like"),unlike:this.getText("unlike"),reply:this.plugin.textMode==t.TextMode.COMMENTS?this.getText("reply"):this.getText("comment"),delete:this.getText("delete"),share:this.getText("share"),edit:this.getText("edit"),edited:this.getText("edited").toLowerCase()})},i.prototype.getChildrenHtml=function(){for(var e=[],t=0;t<this.replies.length;t++)e.push(this.replies[t].getHtml());return e.join("")},i.prototype.isRemovedComment=function(){return!this.isPost&&["rejected","pending"].indexOf(this.data.status)!=-1||"deleted"===this.data.status},i.prototype.isPostPending=function(){return this.isPost&&this.data&&"pending"==this.data.status},i.prototype.updateCommentIDAttribute=function(){this.container.setAttribute("data-comment-id",this.data.ID)},i.prototype.updateCommentUIDAttribute=function(){this.data.sender.UID&&this.container.setAttribute("data-gig-uid",this.data.sender.UID)},i.prototype.updateAll=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var o=!1;if(!this.container||!this.container.parentNode){o=!0,t=!0;var s=this.getParent();if(!s&&this.data.parentID)return;var n=s?s.getElement("replies"):this.plugin.getElement("comments");if(!n)return;var a=document.createElement("div");if(a.setAttribute("class","gig-comment"),this.isNew&&(e.utils.DOM.addClassToElement(a,"gig-comment-newComment"),this.plugin.isMobileUI&&window.setTimeout(function(){e.utils.DOM.removeClassFromElement(a,"gig-comment-newComment"),this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups)},5e3)),a.setAttribute("data-level",this.level.toString()),this.data.tags)for(var r=0;r<this.data.tags.length;r++)a.setAttribute("data-tag-"+this.data.tags[r].replace(/[^A-Za-z0-9]/g,"_"),"1");a.innerHTML=this.getHtml(),(this.isTemp||this.isNew)&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),this.container=a}t&&(this.container.innerHTML=this.getHtml()),this.isRemovedComment()&&!this.isTemp&&this.setRemovedCommentProp(),this.updateComment(t),this.updateVote(),this.updateRepliesCount(),this.updateMediaItem(),this.updateTitle(t),this.updateCommentIDAttribute(),this.updateCommentUIDAttribute(),i&&this.updateReplies(t),this.plugin.setLinks(this.getContainer()),(o||t)&&this.bindAll()},i.prototype.setRemovedCommentProp=function(){"pending"==this.data.status?this.data.commentText=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("this_review_is_awaiting_moderation"):this.getText("this_comment_is_awaiting_moderation"):this.data.commentText=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("this_review_has_been_deleted"):this.getText("this_comment_has_been_deleted"),this.data.mediaItems=null,this.data.taggedUsers=null,this.data.ratings=null,this.data.highlightGroups=null,e.utils.DOM.addClassToElement(this.getElement("self-data"),"gig-comment-data-removed"),e.utils.DOM.addClassToElement(this.getElement("photo"),"gig-comment-photo-removed"),e.utils.DOM.addClassToElement(this.getElement("title"),"gig-comment-title-removed"),this.data.replies&&0!==this.data.replies.length||this.dispose()},i.prototype.showRatings=function(){var t=this.getElement("rating-drop");e.utils.DOM.addClassToElement(t,"gig-comment-rating-drop-down");var i=0,o=document.createElement("div");o.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),e.utils.DOM.appendToBody(o),o.className="gig-comments-container gig-comment-rating-dimensions",o.id="gig_"+(new Date).getTime();var s=this.plugin.settings.ratingDims;if(s&&o&&this.data.ratings){for(var n=0;n<s.length;n++){var a=s[n];if("_overall"!=a.id&&this.data.ratings[a.id]){var r=document.createElement("div");r.innerHTML=this.plugin.templates.rating,r.className="gig-comment-rating",o.appendChild(r);var g=e.utils.DOM.getElementsByClass(r,"gig-comment-rating-title")[0];g&&(g.innerHTML=a.name+":"),i=Math.max(i,g.offsetWidth+2);var l=e.utils.DOM.getElementsByClass(r,"gig-comment-rating-value")[0];l&&(l.innerHTML="",this.updateStarsElement(l,a.id))}}e._.plugins.utils.css.addCss("#"+o.id+" *.gig-comment-rating-title { width:"+i+"px; }","");var m=e.utils.DOM.getElementPosition(t);o.style.top=m.top+t.offsetHeight+"px";var d=Math.max(5,m.left+(t.offsetWidth-o.offsetWidth)/2);o.style.left=d+"px";var c=m.left-d-11;e._.plugins.utils.css.addCss("#"+o.id+".gig-comment-rating-dimensions:before {margin-left: "+c+"px}","")}e.pluginUtils.DOM.removeElementOnDocClick(o,function(i,o){e.utils.DOM.removeClassFromElement(t,"gig-comment-rating-drop-down"),o&&i.target==t&&(i.stopPropagation(),i.preventDefault())},null,"click")},i.prototype.updateTitle=function(t){var i=e.utils.DOM.getElementsByClass(this.container,"gig-comment-title")[0];if(i){if(t&&this.setElementHtml("title",this.plugin.templates.commentTitle),this.data.ratings&&this.data.ratings._overall||this.data.commentTitle&&!this.data.parentID){i.style.display="",this.setElementHtml("summary",this.data.commentTitle||"");var o=this.getElement("rating"),s=this.getElement("rating-drop");if(o)if(s&&(s.style.display="none"),o.innerHTML="",this.data.ratings&&this.data.ratings._overall){o.style.display="",this.updateStarsElement(o,"_overall");for(var n in this.data.ratings)if("_overall"!=n){s&&(s.style.display="");break}}else o.style.display="none"}else i.style.display="none";var a=this.getElement("header-left");this.plugin.removeUserBadges(a);var r=this.getElement("username"),g=this.plugin.createUserHighlightingBadges(r,this.data.highlightGroups),l=this.getElement("self-data");g?e.utils.DOM.addClassToElement(l,"gig-comment-withBadges"):e.utils.DOM.removeClassFromElement(l,"gig-comment-withBadges")}},i.prototype.updateStarsElement=function(t,i){for(var o=this.data.ratings[i],s=0;s<5;s++){var n=document.createElement("div");e.utils.DOM.addClassToElement(n,"gig-comment-rating-star");var a="";s<Math.floor(o)?a="gig-comment-rating-star-full":s==o-.5&&(a="gig-comment-rating-star-half"),e.utils.DOM.addClassToElement(n,a),t.appendChild(n)}},i.prototype.updateMediaItem=function(){var e=this.getElement("mediaItem");if(e)if(this.data.mediaItems&&this.data.mediaItems.length>0){e.style.display="";var t=this.data.mediaItems[0];e.innerHTML="",this.plugin.buildMediaItemElement(e,t)}else e.style.display="none"},i.prototype.updateVote=function(){this.plugin.user||(this.data.vote="none");var t=this.getElement("vote-pos"),i=this.getElement("vote-neg"),o=this.getElement("vote-total"),s=this.getElement("likeLink"),n=this.plugin.settings.enableVoting,a=this.plugin.settings.allowNegativeVoting;t&&(t.style.display=n?"":"none"),i&&(i.style.display=n?"":"none"),o&&(o.style.display=n?"":"none");var r=this.getElement("footer-right");switch(r&&(this.plugin.settings.displayPosNegVotes?e.utils.DOM.removeClassFromElement(r,"gig-comment-vote-posneg"):e.utils.DOM.addClassToElement(r,"gig-comment-vote-posneg")),i&&(i.style.display=a?"":"none"),this.data.vote){case"pos":t&&e.utils.DOM.addClassToElement(t,"gig-comment-vote-pos-down"),i&&e.utils.DOM.removeClassFromElement(i,"gig-comment-vote-neg-down"),s&&(s.innerHTML=this.getText("unlike"));break;case"neg":t&&e.utils.DOM.removeClassFromElement(t,"gig-comment-vote-pos-down"),i&&e.utils.DOM.addClassToElement(i,"gig-comment-vote-neg-down");break;default:t&&e.utils.DOM.removeClassFromElement(t,"gig-comment-vote-pos-down"),i&&e.utils.DOM.removeClassFromElement(i,"gig-comment-vote-neg-down"),s&&(s.innerHTML=this.getText("like"))}if(o)if(!this.plugin.settings.displayPosNegVotes&&this.plugin.settings.allowNegativeVoting){var g=this.data.posVotes-this.data.negVotes,l=g.toString();g>0&&(l="+"+g),o.innerHTML=l,o.style.display=""}else o.style.display="none";t&&(this.plugin.settings.displayPosNegVotes||!this.plugin.settings.allowNegativeVoting?(t.innerHTML=this.data.posVotes.toString(),e.utils.DOM.addClassToElement(t,"gig-comment-vote-with-value")):(e.utils.DOM.removeClassFromElement(t,"gig-comment-vote-with-value"),t.innerHTML="")),i&&(this.plugin.settings.displayPosNegVotes?(i.innerHTML=this.data.negVotes.toString(),e.utils.DOM.addClassToElement(i,"gig-comment-vote-with-value")):(i.innerHTML="",e.utils.DOM.removeClassFromElement(i,"gig-comment-vote-with-value"))),r&&(this.isTemp?r.style.display="none":r.style.display="")},i.prototype.listenForCombination=function(t){if(t||(t=window.event),40==t.keyCode&&t.shiftKey){var i=e.utils.stringUtils.format('<div class="gig-comments-container">Stream ID: {0}<br />Comment ID: {1}</div>',this.plugin.params.streamID,this.id);e.global.putGMBalloonNextTo(this.getContainer(),i,"Comment Data",400,100),t.preventDefault&&t.preventDefault()}},i.prototype.mouseOver=function(){var t=this;this.plugin.isMobileUI||(this.keydownDelegate||(this.keydownDelegate=function(e){return t.listenForCombination(e)}),e.utils.DOM.isElementClass(this.container,"gig-comment-newComment")&&(e.utils.DOM.removeClassFromElement(this.container,"gig-comment-newComment"),this.updateCommentHighlightingBadgesBackgroundColorForNewComment(this.data.highlightGroups),this.plugin.newCommentsCount--,this.plugin.updateStrip()),e.utils.DOM.addEventListener(document,"keydown",this.keydownDelegate))},i.prototype.mouseOut=function(){try{e.utils.DOM.removeEventListener(document,"keydown",this.keydownDelegate)}catch(e){}},i.prototype.updateComment=function(i){this.updateStatus();var o=e.utils.sanitize.sanitizeHTML(e.global.wbr(this.getUsername(),20)).replace(/\$/g,"&#36;");this.setElementHtml("username",o),this.setElementHtml("time",this.getTimeString());var s=this.getElement("viaProvider");s&&(this.viaProvider?(s.innerHTML=this.getText("via_provider","%provider",this.viaProvider),e.utils.DOM.addClassToElement(s,"gig-comment-viaProvider-"+this.viaProvider.toLowerCase()),s.style.display=""):(s.innerHTML="",s.style.display="none"));var n=this.createCommentHighlightingBadges(this.data.highlightGroups),a=this.getElement("self-data");n?e.utils.DOM.addClassToElement(a,"gig-comment-withBadges"):e.utils.DOM.removeClassFromElement(a,"gig-comment-withBadges");var r=(this.data.commentText||"").replace(/\$/g,"&#36;");r=r.replace(/\n/g,"<br />"),this.plugin.settings.enableLinks&&(r=e._.plugins.utils.DOM.replaceLinksWithHTMLElements(r)),this.setElementHtml("body",r);var g=this.getElement("edited");g&&(this.plugin.settings.userEditComment&&this.data.edited?g.style.display="":g.style.display="none");var l=this.getElement("likeLink");l&&(this.plugin.settings.enableVoting&&!this.plugin.settings.allowNegativeVoting?l.style.display="":l.style.display="none");var m=this.getElement("editLink");m&&(this.plugin.settings.userEditComment&&this.data.sender.isSelf&&!this.plugin.settings.readOnly?m.style.display="":m.style.display="none");var d=this.getElement("deleteLink");d&&(this.plugin.settings.allowCommentDeletion&&this.data.sender.isSelf&&!this.plugin.user.isGuest?d.style.display="":d.style.display="none");var c=this.getElement("replyLink");if(c){!this.isTemp&&!this.viaProvider&&"pending"!=this.data.status&&this.level<this.plugin.settings.threadingDepth&&!this.plugin.settings.readOnly&&"disabled"!=this.plugin.settings.enableCommentBody&&"readOnly"!=this.plugin.streamInfo.status?c.style.display="":c.style.display="none";this.getElement("likeLink")}var p=this.getElement("shareLink");if(p&&(p.style.display=this.plugin.params.shareUserAction&&!this.plugin.params.hideShareButtons&&this.plugin.shareEnabled?"":"none"),this.plugin.setLinks(this.container),this.data.ratings){var u="",h=this.plugin.templates.rating;for(var x in this.data.ratings)u+=e.utils.templates.fill(h,{starClassName:"gig-comments-star",ratingID:x,value:this.data.ratings[x]});this.setElementHtml("ratings",u)}var b=this.data.sender.loginProvider,v=e.utils.templates.fill(this.plugin.templates.photo,{photoURL:e.global.getPhotoURL(this.data.sender.photoURL,t.CommentsUtils.Images.getPhotoFullName(this.data.isModerator?"mod_icon":"Avatar_empty",this.plugin.pixelRatio)),providerImage:b&&"site"!=b.toLowerCase()&&"customopenid"!=b.toLowerCase()?this.plugin.templates.providerImage:"",providerImageUrl:b?t.CommentsUtils.Images.getPhotoFullName("providers/"+this.data.sender.loginProvider+"User",this.plugin.pixelRatio):""}),f=this.getElement("photo");if(f&&""==f.innerHTML){f.style.visibility="hidden",f.innerHTML=v;var y=f.getElementsByTagName("img");if(y&&y.length>0){var C=y[0];e.utils.DOM.addEventListener(C,"load",function(){e.global.scaleImageToContainer(y[0],!0,function(){f.style.visibility=""})})}}var E=this.getElement("flag");if(E){var k=this.plugin.user.isGuest?"guest":this.plugin.user.UID;E.style.display=!this.plugin.settings.enableFlagging||e.localInfo.isTouch||this.isTemp?"none":"",this.plugin.state.flags&&this.plugin.state.flags[k+"_"+this.id]&&this.markAsFlagged()}},i.prototype.createCommentHighlightingBadges=function(i){var o=this.getElement("header-right"),s=this.plugin.getHighlightingBadges(i,["comment"]),n=s?s[0]:null,a=this.getElement("commentBadge"),r=this.getElement("content"),g=this.getElement("photo");return e.utils.DOM.removeClassFromElement(r,"gig-comment-badge-",!0),n?(a?(a.innerHTML="",e.utils.DOM.removeClassFromElement(a,"gig-badge-",!0),e.utils.DOM.removeClassFromElement(a,"gig-badge-border")):(a=document.createElement("div"),o.appendChild(a)),e.utils.DOM.addClassToElement(a,"gig-comment-commentBadge"),e.utils.DOM.addClassToElement(a,n.className),this.plugin.isMobileUI||(a.innerHTML=n.badgeText),t.BadgeFrameEnum[n.badgeFrame]===t.BadgeFrameEnum.rectangle&&e.utils.DOM.addClassToElement(a,"gig-badge-border"),e.utils.DOM.addClassToElement(r,"gig-comment-colored-background"),e.utils.DOM.isElementClass(this.container,"gig-comment-newComment")||e.utils.DOM.addClassToElement(r,n.commentClassName),!0):(e.utils.DOM.removeClassFromElement(g,"gig-comment-photo-badge"),e.utils.DOM.removeClassFromElement(r,"gig-comment-colored-background"),a&&(a.style.display="none"),!1)},i.prototype.updateCommentHighlightingBadgesBackgroundColorForNewComment=function(t){if(t){var i=this.plugin.getHighlightingBadges(t,["comment"]),o=i[0];if(o){var s=this.getElement("self-data");e.utils.DOM.addClassToElement(s,o.commentClassName)}}},i.prototype.clearError=function(){this.error=null},i.prototype.updateStatus=function(i){null!=i&&(this.error=i);var o=this.getElement("status");o&&(e.utils.DOM.removeClassFromElement(o,"gig-comment-status-info"),e.utils.DOM.removeClassFromElement(o,"gig-comment-status-error"),e.utils.DOM.removeClassFromElement(o,"gig-comment-status-pending"),e.utils.DOM.removeClassFromElement(o,"gig-comment-status-moderator-edited"),this.error?(e.utils.DOM.addClassToElement(o,"gig-comment-status-error"),o.innerHTML=this.error):this.info?(e.utils.DOM.addClassToElement(o,"gig-comment-status-info"),o.innerHTML=this.info):this.isPostPending()?(e.utils.DOM.addClassToElement(o,"gig-comment-status-info"),o.innerHTML=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("your_review_is_awaiting_moderation"):this.getText("your_comment_is_awaiting_moderation")):this.data.moderatorEdit?(e.utils.DOM.addClassToElement(o,"gig-comment-status-moderator-edited"),e.utils.DOM.addClassToElement(o,"gig-comment-status-info"),o.innerHTML=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("review_edited_by_a_moderator"):this.getText("comment_edited_by_a_moderator")):o.innerHTML="")},i.prototype.updateReplies=function(e){void 0===e&&(e=!1);for(var t=0;t<this.replies.length;t++)this.replies[t].updateAll(e)},i.prototype.getTimeString=function(){var e="",t=(new Date).getTime(),i=new Date;i.setTime(this.data.timestamp);var o=(t-this.data.timestamp)/1e3/60/60;return e=60*o<1?this.getText("less_than_a_minute_ago"):o<1?1==Math.round(60*o)?this.getText("one_minute_ago"):this.getText("num_minutes_ago","%num",Math.round(60*o).toString()):o<24?1==Math.round(o)?this.getText("one_hour_ago"):this.getText("num_hours_ago","%num",Math.round(o).toString()):1==Math.round(o/24)?this.getText("one_day_ago"):this.getText("num_days_ago","%num",Math.round(o/24).toString())},i.prototype.bindAll=function(){var t=this,i=this.getContainer();i&&(this.bindToElement("repliesArrow","click",this.expandCollapse),this.bindToElement("deleteLink","click",this.showDeleteDialog),this.bindToElement("replyLink","click",this.showReplyBox),this.bindToElement("likeLink","click",this.onVotePosClick),this.bindToElement("vote-pos","click",this.onVotePosClick),this.bindToElement("vote-neg","click",this.onVoteNegClick),this.bindToElement("shareLink","click",this.onShareClick),this.bindToElement("editLink","click",this.onEditClick),this.bindToElement("flag","click",this.showFlagDialog),this.bindToElement("rating-drop","click",this.showRatings),e.utils.DOM.addEventListener(this.getContainer(),"mouseover",function(){return t.mouseOver()}),e.utils.DOM.addEventListener(this.getContainer(),"mouseout",function(){return t.mouseOut()}),e.utils.DOM.enableSafeCopy(i))},i.prototype.onEditClick=function(e){var i=this,o=this.getElement("editbox");if(o){this.plugin.tempComposeBox&&(this.plugin.tempComposeBox.data.ID==this.id?this.plugin.tempComposeBox.focus():this.plugin.tempComposeBox.close());var s=this.getElement("self-data");s.style.display="none",o.style.display="block";var n=this.getElement("photo");n&&(n.style.display="none");var a=this.getElement("title"),r=a.style.display;a&&(a.style.display="none"),this.plugin.tempComposeBox=new t.EditCommentBox(this.plugin,o,this.data,function(){s.style.display="",o.style.display="none",n&&(n.style.display=""),a&&(a.style.display=r),i.plugin.tempComposeBox=null}),this.plugin.tempComposeBox.open()}},i.prototype.showReplyBox=function(){var e=this;if(this.plugin.tempComposeBox){if(this.plugin.tempComposeBox.data.parentID==this.id)return void this.plugin.tempComposeBox.focus();this.plugin.tempComposeBox.close()}this.composebox=new t.NewCommentBox(this.plugin,this.getElement("replybox"),this.data.ID,function(){e.composebox=null,e.plugin.tempComposeBox=null}),this.plugin.tempComposeBox=this.composebox,this.composebox.open()},i.prototype.onShareClick=function(t){var i=this;if(t.target==this.plugin.simpleShareSource)this.plugin.simpleShareSource=null;else{var o=this.getElement("shareLink");o.id||(o.id=this.id+"_lnkShare"),this.plugin.simpleShareSource=o;var s=this.getShareUserAction(this.level>0);if(s&&this.plugin.settings.enableDirectCommentLinking&&(s.linkBack=e._.plugins.utils.URL.addOrReplaceHashFragment(s.linkBack,"gig_comment_id",this.id)),this.data.mediaItems&&this.data.mediaItems.length>0){var n=this.data.mediaItems[0];"rich"!=n.type.toLowerCase()&&"video"!=n.type.toLowerCase()||s.setDescription(s.description+"\n"+n.url)}e.socialize.showShareUI(this.plugin.params,{containerID:null,width:null,height:null,operationMode:"simpleShare",snapToElementID:o.id,userAction:s,onClose:function(){i.plugin.simpleShareSource=null}})}},i.prototype.getShareUserAction=function(e){var t=this.plugin.params.shareUserAction;if(t)return t=t.clone(),t.description&&t.setDescription(this.replacePlaceholders(t.description)),t.title&&t.setTitle(this.replacePlaceholders(t.title)),t},i.prototype.replacePlaceholders=function(e){return e.replace(/%username/gi,this.data.sender.name||this.plugin.getText("guest")).replace(/%pagetitle/gi,document.title).replace(/%rating/gi,this.data.ratings&&this.data.ratings._overall?this.data.ratings._overall.toString():"").replace(/%commenttext/gi,this.data.commentText).replace(/%commenttitle/gi,this.data.commentTitle)},i.prototype.setVote=function(t,i){var o=this;if(!this.plugin.user||!this.plugin.user.isConnected)return void(this.plugin.settings.useSiteLogin?this.plugin.mainComposeBox.onSiteLoginClick():this.plugin.mainComposeBox.onLoginClick(i,!1,function(){o.setVote(t,i)}));if(!this.voteInProgress){switch(this.voteInProgress=!0,e.comments.vote(this.plugin.params,{vote:t,commentID:this.id,callback:function(){o.voteInProgress=!1}}),t){case"pos":this.data.posVotes++;break;case"neg":this.data.negVotes++}switch(this.data.vote){case"pos":this.data.posVotes--;break;case"neg":this.data.negVotes--}this.data.vote=t,this.updateVote();var s={eventName:"commentVoted",categoryID:this.plugin.params.categoryID,streamID:this.plugin.params.streamID,comment:this.data,vote:t,mode:this.plugin.textMode};e.events.dispatchForWidget(s,this.plugin.params),s=e.utils.object.clone(s),s.eventName="commentVote",e.events.dispatchForWidget(s,this.plugin.params)}},i.prototype.onVotePosClick=function(e){var t=e.target||e.srcElement;"pos"==this.data.vote?this.setVote("none",t):this.setVote("pos",t)},i.prototype.onVoteNegClick=function(e){var t=e.target||e.srcElement;"neg"==this.data.vote?this.setVote("none",t):this.setVote("neg",t)},i.prototype.showDeleteDialog=function(){var e=this;if(this.plugin.settings.allowCommentDeletion){var i=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("delete_review"):this.getText("delete_comment"),o=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("are_you_sure_you_want_to_permanently_delete_your_review_qm"):this.getText("are_you_sure_you_want_to_permanently_delete_your_comment_qm");this.plugin.showDialog(i,o,this.getText("yes"),function(){e.deleteComment()},this.getText("no"))}},i.prototype.showFlagDialog=function(){var i=this;if(this.plugin.settings.enableFlagging&&!this.isFlagged){e.utils.DOM.addClassToElement(this.getElement("flag"),"gig-comment-flag-visible");var o=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("report_review_to_site_owner"):this.getText("report_comment_to_site_owner"),s=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("are_you_sure_you_want_to_mark_this_review_as_inappropriate"):this.getText("are_you_sure_you_want_to_mark_this_comment_as_inappropriate"),n=this.plugin.textMode==t.TextMode.REVIEWS&&0==this.level?this.getText("yes_flag_this_review"):this.getText("yes_flag_this_comment");this.plugin.showDialog(o,s,n,function(){i.flag()},this.getText("cancel"),function(){e.utils.DOM.removeClassFromElement(i.getElement("flag"),"gig-comment-flag-visible")})}},i.prototype.flag=function(){e.comments.flagComment(this.plugin.params,{commentID:this.id}),this.markAsFlagged(),this.plugin.saveState()},i.prototype.deleteComment=function(){e.comments.deleteComment(this.plugin.params,{commentID:this.id});for(var t=this.getParent();t;)t.descendantsCount--,t.updateRepliesCount(),t=t.getParent();this.plugin.updateCount(),this.changeStatus("deleted"),"published"===this.data.previousStatus&&(this.plugin.streamInfo.commentCount--,this.data.isReply()||this.plugin.streamInfo.ratingCount--),this.updateAll(),this.plugin.updateCount()},i.prototype.changeStatus=function(e){this.data.previousStatus=this.data.status,this.data.status=e},i}();t.Comment=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(e,t,i,o){void 0===o&&(o={}),this.container=e,this.plugin=t,this.providers=i,this.userIdentities=o,this.selectedProviders={},this.shownProviders={},this.initUI(),this.loadSelected()}return i.prototype.getSelected=function(){var e=[];for(var t in this.selectedProviders)e.push(t);return e},i.prototype.isProviderConnected=function(e){return this.userIdentities&&null!=this.userIdentities[e]},i.prototype.initUI=function(){var i=this;this.container.innerHTML="";for(var o=[],s=[],n=0;n<this.providers.length;n++){var a=this.providers[n];this.isProviderConnected(a.name)?o.push(a):s.push(a)}this.providers=o.concat(s);for(var r=this.plugin.params.minShareOptions||(this.plugin.isMobileUI?1:2),g=Math.max(r,o.length),n=0;n<this.providers.length;n++){var a=this.providers[n];if(!this.getProviderElement(a.name)){var l=this.isProviderConnected(a.name),m=document.createElement("div");m.className="gig-comments-share-provider",m.style.backgroundImage='url("'+t.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+a.name+"_"+(l?"color":"grey"),this.plugin.pixelRatio)+'")',m.setAttribute("data-provider",a.name),m.innerHTML='<div class="gig-comments-share-provider-checkbox gig-comments-checkbox" data-provider="'+a.name+'"></div>',e.utils.DOM.addEventListener(m,"click",function(e){return i.providerClick(e)}),this.container.appendChild(m),n<g&&this.showProvider(a.name)}}if(this.providers.length>g){var d=document.createElement("div");d.className="gig-comments-share-more",d.setAttribute("data-provider","more"),this.container.appendChild(d),e.utils.DOM.addEventListener(d,"click",function(){i.showMore(d)})}},i.prototype.showProvider=function(t){this.shownProviders[t]=1;var i=this.getProviderElement(t);i&&e.utils.DOM.addClassToElement(i,"gig-comments-share-provider-shown")},i.prototype.check=function(t,i){if(this.isProviderConnected(t)){this.selectedProviders[t]=1;var o=this.getProviderElement(t),s=e.utils.DOM.getElementsByClass(o,"gig-comments-checkbox")[0];e.utils.DOM.addClassToElement(s,"gig-comments-checkbox-checked")}else i||this.connectProvider(t)},i.prototype.uncheck=function(t){delete this.selectedProviders[t];var i=this.getProviderElement(t),o=e.utils.DOM.getElementsByClass(i,"gig-comments-checkbox")[0];e.utils.DOM.removeClassFromElement(o,"gig-comments-checkbox-checked")},i.prototype.isProviderChecked=function(e){return null!=this.selectedProviders[e]},i.prototype.providerClick=function(t){var i=this,o=t.target||t.srcElement,s=o.getAttribute("data-provider");this.plugin.user.isConnected?this.isProviderChecked(s)?this.uncheck(s):this.check(s):e.socialize.login(this.plugin.params,{provider:s,callback:function(e){0==e.errorCode&&e.user&&e.user.identities&&(i.userIdentities=e.user.identities,i.updateProviderIcon(s),i.check(s))}})},i.prototype.getProviderElement=function(t){return e.utils.DOM.getElementsByAttribute(this.container,"*","data-provider",t)[0]},i.prototype.showMore=function(i){var o=this,s=e.utils.DOM.getElementPosition(i),n=document.createElement("div");this.divMore=n,n.style.position="absolute",null!=n.style.zIndex&&(n.style.zIndex=(e.utils.DOM._nextZIndex++).toString()),n.className="gig-comments-container gig-composebox-morebox",document.body.appendChild(n);var a=e.utils.viewport.getInnerSize(),r=Math.max(0,e.localInfo.quirksMode?s.left-2:s.left);r+n.offsetWidth>a.w-40&&(r=(a.w-n.offsetWidth)/2),n.style.left=""+r+"px",n.style.top=""+(s.top+i.offsetHeight-2+(e.localInfo.quirksMode?-2:0))+"px",n.innerHTML=e.utils.templates.fill(this.plugin.templates.composeShareMoreBox,{more_share_destinations:this.plugin.getText("more_share_destinations")});var g=e.utils.DOM.getElementsByClass(n,"gig-composebox-morebox-providers")[0];if(g)for(var l=0;l<this.providers.length;l++){var m=this.providers[l];if(!this.shownProviders[this.providers[l].name]&&m){var d=document.createElement("li");d.style.backgroundImage='url("'+t.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+m.name+"_color",this.plugin.pixelRatio)+'")',d.innerHTML=m.displayName,d.setAttribute("data-provider",m.name),e.utils.DOM.addEventListener(d,"click",function(e){return o.moreProviderClick(e)}),g.appendChild(d)}}var c=e.utils.DOM.getElementsByClass(n,"gig-composebox-morebox-close")[0];e.utils.DOM.addEventListener(c,"click",function(e){return o.closeMore()}),e.pluginUtils.DOM.removeElementOnDocClick(n,function(e,o){o&&e.target==i&&t.CommentsUtils.Events.cancelEvent(e)},null,"click")},i.prototype.closeMore=function(){this.divMore&&this.divMore.parentNode.removeChild(this.divMore)},i.prototype.moreProviderClick=function(e){var t=e.target||e.srcElement,i=t.getAttribute("data-provider");this.isProviderConnected(i)||this.connectProvider(i),this.closeMore(),this.showProvider(i)},i.prototype.connectProvider=function(t){var i=this;e.socialize.addConnection(this.plugin.params,{provider:t,callback:function(e){0==e.errorCode&&e.user&&e.user.identities&&(i.userIdentities=e.user.identities,i.updateProviderIcon(t),i.check(t))}})},i.prototype.updateProviderIcon=function(e){var i=this.isProviderConnected(e),o=this.getProviderElement(e);o&&(o.style.backgroundImage='url("'+t.CommentsUtils.Images.getPhotoFullName("shareToProviders/"+e+"_"+(i?"color":"grey"),this.plugin.pixelRatio)+'")')},i.prototype.updateIcons=function(){this.userIdentities=this.plugin.user.identities;for(var e in this.shownProviders)this.updateProviderIcon(e);if(this.plugin.user.isConnected)this.loadSelected();else for(var e in this.shownProviders)this.uncheck(e)},i.prototype.saveSelected=function(){e.utils.cookie.set("_gig_comments_selected_providers",this.getSelected().join(","))},i.prototype.loadSelected=function(){var t=e.utils.cookie.get("_gig_comments_selected_providers"),i=t?t.split(","):[],o=this.plugin.settings.shareToSNCheckboxChecked&&null==t;for(var s in this.shownProviders)o||e.utils.array.indexOf(i,s)>-1?this.check(s,!0):this.uncheck(s)},i}();t.ComposeShare=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(i){function o(e,t,o,s){return i.call(this,e,t,o,s)||this}return __extends(o,i),o.prototype.render=function(){i.prototype.render.call(this),this.populateFromCommentData(),this.renderMediaItemIfNeeded(),this.updateUI(),this.activate()},o.prototype.renderMediaItemIfNeeded=function(){this.data.mediaItems&&0!==this.data.mediaItems.length&&(this.mediaItem=this.data.mediaItems[0],this.showMediaItemPreview(),this.updateMediaItem())},o.prototype.populateFromCommentData=function(){this.uiElements.summaryInput&&this.data.commentTitle&&(this.uiElements.summaryInput.value=this.data.commentTitle,this.uiElements.summaryInput.refreshPlaceholder()),this.uiElements.textArea&&"undefined"!=typeof this.data.commentText&&(this.uiElements.textArea.innerHTML=this.data.commentText,t.CommentsUtils.UserTagging.replaceSpansWithUserTags(this.uiElements.textArea))},o.prototype.submitCallback=function(e){for(var t=[],o=e.comment.ID;o;){var s=this.plugin.getComment(o);t.push({comment:s,oldDescendantsCount:s.descendantsCount}),o=s.data.parentID}if(i.prototype.submitCallback.call(this,e),0==e.errorCode){var n=this.plugin.getComment(e.comment.ID);n.data.replies=this.data.replies;for(var a=0,r=t;a<r.length;a++){var g=r[a],l=g.comment,m=g.oldDescendantsCount;l.descendantsCount=m,l.updateRepliesCount()}"pending"===n.data.status&&(this.plugin.streamInfo.commentCount--,this.plugin.updateCount())}},o.prototype.updateUI=function(){return this.plugin.user.isConnected?void i.prototype.updateUI.call(this):void this.close()},o.prototype.getSubmitText=function(){return this.getText("done");
},o.prototype.submit=function(){var i=this,o={commentID:this.data.ID,commentText:"disabled"!=this.plugin.settings.enableCommentBody?this.data.commentText:null,commentTitle:"disabled"==this.plugin.settings.enableCommentTitles||this.data.isReply()?null:this.data.commentTitle,taggedUsers:this.plugin.settings.enableUserTagging?this.data.taggedUsers:null,ratings:this.plugin.textMode==t.TextMode.REVIEWS?this.data.ratings:null,callback:function(e){return i.submitCallback(e)}};this.plugin.settings.enableMediaItems&&(o.mediaItems=this.data.mediaItems.length>0?this.data.mediaItems[0].url:[]),e.comments.updateComment(this.plugin.params,o);var s=this.plugin.getComment(this.data.ID);s.data=this.data,s.data.edited=!0,s.info="",s.error="",s.isPost=!0,s.isPostPending()&&(s.info=this.plugin.textMode==t.TextMode.REVIEWS&&0==s.level?this.getText("your_edited_review_is_awaiting_moderation"):this.getText("your_edited_comment_is_awaiting_moderation")),this.close(),s.updateAll()},o.prototype.afterRender=function(){this.hideElement(this.uiElements.logoutLink),this.hideElement(this.uiElements.shareSection),this.hideElement(this.uiElements.postAnonymouslySection),this.hideElement(this.uiElements.loginBar),this.uiElements.logoutLink=null,this.uiElements.shareSection=null,this.uiElements.postAnonymouslySection=null,this.uiElements.loginBar=null},o.prototype.getTitle=function(){return this.getText("editing")+"..."},o}(t.BaseComposeBox);t.EditCommentBox=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(i){function o(e,o,s,n){return i.call(this,e,o,new t.CommentData("newComment",s),n)||this}return __extends(o,i),o.prototype.render=function(){this.plugin.settings.readOnly||"readOnly"==this.plugin.streamInfo.status||(i.prototype.render.call(this),this.renderSelfReviewIfNeeded(),this.renderShareOptions(),this.renderPostAnonymously(),this.updateUI())},o.prototype.renderShareOptions=function(){if(this.uiElements.shareSection&&this.uiElements.shareProviders){var i=this.plugin.params.enabledShareProviders||this.plugin.params.enabledProviders||"*",o=this.plugin.params.disabledShareProviders||this.plugin.params.disabledProviders||"",s=e.socialize.getProvidersByName(i);s=e.socialize.hideProvidersByName(s,o),s=e.socialize.getProvidersForRequiredCapabilities(s,["actions"]),this.share=new t.ComposeShare(this.uiElements.shareProviders,this.plugin,s,this.plugin.user.identities)}},o.prototype.renderPostAnonymously=function(){if(this.uiElements.postAnonymouslySection)if(this.plugin.settings.allowAnonymous){this.updatePostAnonymously();var e;e=this.plugin.textMode==t.TextMode.COMMENTS?this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_comment."):this.getText("when_posting_anonymously,_other_users_will_not_see_your_personal_info_next_to_your_review.");for(var i=e.split(" "),o=6;o<i.length;o+=6)i.splice(o,0,["\n"]);this.uiElements.postAnonymouslySection.setAttribute("title",i.join(" "))}else this.uiElements.postAnonymouslySection.parentElement.removeChild(this.uiElements.postAnonymouslySection)},o.prototype.renderSelfReviewIfNeeded=function(){return this.selfReview=this.plugin.getSelfReview(),!(!this.selfReview||this.plugin.settings.allowMultipleReviewsPerUser||this.data.isReply())&&(this.container.innerHTML=e.utils.templates.fill(this.plugin.templates.myReview,{logout:this.getText("logout"),your_review:this.getText("your_review"),summary:this.getText("summary_colon"),review:this.getText("review_colon")}),this.buildUIElementsObj(),this.bindEvents(),this.updateSelfReview(),!0)},o.prototype.getSelfRatingDimensionElement=function(t,i){var o=t.data.ratings[i],s=document.createElement("div");s.innerHTML=this.plugin.templates.rating,s.className="gig-selfreview-rating gig-selfreview-rating-"+i;var n;if("_overall"==i)n=this.getText("my_rating_colon");else{var a=this.plugin.settings.ratingDims;if(a)for(var r=0;r<a.length;r++)if(a[r].id==i){n=a[r].name+":";break}}if(n){var g=e.utils.DOM.getElementsByClass(s,"gig-comment-rating-title")[0];g&&(g.innerHTML=n);var l=e.utils.DOM.getElementsByClass(s,"gig-comment-rating-value")[0];if(l){l.innerHTML="",l.title=o.toString();for(var r=0;r<5;r++){var m=document.createElement("div");e.utils.DOM.addClassToElement(m,"gig-selfreview-rating-star");var d="";r<Math.floor(o)&&(d="gig-selfreview-rating-star-full"),e.utils.DOM.addClassToElement(m,d),l.appendChild(m)}}return s}},o.prototype.getUserAction=function(i,o){void 0===o&&(o=null),o||(o=this.data.isReply()?this.plugin.params.replyUserAction:this.plugin.params.userAction),o=o?o.clone():new e.socialize.UserAction,o.title||(this.plugin.textMode!=t.TextMode.REVIEWS||this.data.isReply()?o.title=this.getText("commented_on_colon_pagetitle","%pageTitle",document.title):i.ratings&&i.ratings._overall?o.title=this.getText("i_rated_pagetitle_as_rating_5","%rating",i.ratings._overall.toString()).replace("%pageTitle",document.title):o.title=this.getText("my_review_on_colon_pagetitle","%pageTitle",document.title)),o.linkBack||(o.linkBack=e._.plugins.utils.URL.addOrReplaceHashFragment(document.location.href,"gig_comment_id","$commentID$"));var s=document.createElement("p");s.innerHTML=i.commentText.replace(/<br>/g,"\n").replace(/<\/?div>/g,"\n"),o.userMessage=s.innerText||s.textContent;var n={commentTitle:i.commentTitle,commentText:i.commentText,rating:i.ratings?i.ratings._overall:null};return n.ratingDescription=[this.getText("i_hate_it"),this.getText("i_dont_like_it"),this.getText("its_ok"),this.getText("i_like_it"),this.getText("i_love_it")][n.rating-1],e.global.fillUserActionTemplate(o,n)},o.prototype.bindEvents=function(){var t=this;i.prototype.bindEvents.call(this),e.utils.DOM.addEventListener(this.uiElements.postAnonymouslySection,"click",function(){t.postAnonymously=!t.postAnonymously,t.updatePostAnonymously()})},o.prototype.updateUI=function(){if(this.uiElements){var e=this.plugin.getSelfReview();if(!this.data.isReply()&&!this.plugin.settings.allowMultipleReviewsPerUser){if(e!=this.selfReview)return void this.render();e&&this.updateSelfReview()}i.prototype.updateUI.call(this),this.updateShareOptions(),this.updatePostAnonymously()}},o.prototype.updateSelfReview=function(){var t=e.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary-container")[0],i=e.utils.DOM.getElementsByClass(this.container,"gig-selfreview-summary")[0];i&&(this.selfReview&&this.selfReview.data.commentTitle?(i.innerHTML=this.selfReview.data.commentTitle,t&&(t.style.display="")):(i.innerHTML="",t&&(t.style.display="none")));var o=e.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body")[0];if(o)if(this.selfReview&&this.selfReview.data.commentText)o.innerHTML=e.global.wbr(this.selfReview.data.commentText.replace(/\n/g,"<br />"),20);else{o.innerHTML="";var s=e.utils.DOM.getElementsByClass(this.container,"gig-selfreview-body-container")[0];s&&(s.style.display="none")}var n=0,a=e.utils.DOM.getElementsByClass(this.container,"gig-selfreview-ratings")[0];if(a&&(a.id="gig_"+(new Date).getTime(),a.innerHTML="",a&&this.selfReview.data.ratings)){for(var r in this.selfReview.data.ratings){var g=this.getSelfRatingDimensionElement(this.selfReview,r);if(g){"_overall"==r&&a.firstChild?a.insertBefore(g,a.firstChild):a.appendChild(g);var l=e.utils.DOM.getElementsByClass(g,"gig-comment-rating-title")[0];n=Math.max(n,l.offsetWidth)}}e._.plugins.utils.css.addCss("#"+a.id+" *.gig-comment-rating-title { width:"+n+"px; }","")}},o.prototype.updateShareOptions=function(){this.uiElements.shareSection&&((this.plugin.user.isConnected||!this.plugin.user.isGuest)&&this.share.providers.length>0&&this.plugin.shareEnabled?(this.uiElements.shareSection.style.display="",this.share.updateIcons()):this.uiElements.shareSection.style.display="none")},o.prototype.updatePostAnonymously=function(){this.uiElements.postAnonymouslySection&&this.uiElements.postAnonymouslyCheckbox&&(!this.plugin.user.isConnected||this.plugin.user.isGuest?this.uiElements.postAnonymouslySection.style.display="none":(this.uiElements.postAnonymouslySection.style.display="",this.postAnonymously?e.utils.DOM.addClassToElement(this.uiElements.postAnonymouslyCheckbox,"gig-comments-checkbox-checked"):e.utils.DOM.removeClassFromElement(this.uiElements.postAnonymouslyCheckbox,"gig-comments-checkbox-checked")))},o.prototype.updateLoginLogoutElements=function(){i.prototype.updateLoginLogoutElements.call(this);var e=this.getElement("or");this.uiElements.loginBar&&(this.isLoginDropdownEnabled()?this.plugin.user.isConnected||this.plugin.user.isGuest?this.uiElements.loginBar.style.display="none":(this.plugin.settings.useSiteLogin&&this.uiElements.siteLoginButton?(this.uiElements.siteLoginButton.style.display="",this.uiElements.socialLoginButton&&(this.uiElements.socialLoginButton.style.display="none")):(this.uiElements.siteLoginButton&&(this.uiElements.siteLoginButton.style.display="none"),this.uiElements.socialLoginButton&&(this.uiElements.socialLoginButton.style.display="")),this.uiElements.loginBar.style.display=""):this.uiElements.loginBar.style.display="none"),this.uiElements.guestLoginButton&&(this.plugin.settings.allowGuest&&this.isLoginDropdownEnabled()?(this.uiElements.guestLoginButton.style.display="",e&&(e.style.display="")):(this.uiElements.guestLoginButton.style.display="none",e&&(e.style.display="none")))},o.prototype.afterRender=function(){this.hideElement(this.uiElements.cancelButton)},o.prototype.getSubmitText=function(){return this.getText("post")},o.prototype.getTitle=function(){var i,o=this.plugin.getComment(this.data.parentID);if(null!=o){var s=this.plugin.textMode==t.TextMode.REVIEWS?"comment_on_username_review":"reply_to_username";i=this.getText(s,"%username",'<span class="gig-composebox-username">'+e.utils.sanitize.sanitizeHTML(o.getUsername())+"</span>")}else i=this.plugin.user.isConnected||this.plugin.user.isGuest?this.getText("hello_username","%username",this.plugin.getUsername()):"";return i},o.prototype.submit=function(i){var o=this,s=this.uiElements.submitButton;this.uiElements.summaryInput;if(!this.plugin.user.isGuest&&!this.plugin.user.isConnected){var n=function(){o.submit()};return void(this.plugin.settings.useSiteLogin?this.onSiteLoginClick(n):this.onLoginClick(s,this.plugin.settings.allowGuest,n))}var a=(new Date).getTime(),r="pending_"+a;this.data.isReply()&&this.close(),this.data=e.utils.object.merge([this.data,{ID:r,timestamp:a,threadTimestamp:a,sender:{photoURL:e.global.getPhotoURL(this.plugin.user.thumbnailURL||this.plugin.user.photoURL),loginProvider:this.getLoginProvider(),name:this.plugin.getUsername(),UID:this.plugin.user?this.plugin.user.UID:null},tags:this.plugin.params.commentTags}]),this.postAnonymously&&(this.data.highlightGroups=[],this.data.sender={name:this.plugin.getText("anonymous")});var g=e.utils.object.removeUndefined({commentText:"disabled"!=this.plugin.settings.enableCommentBody?this.data.commentText:null,parentID:this.data.parentID?this.data.parentID:null,commentTitle:"disabled"==this.plugin.settings.enableCommentTitles||this.data.isReply()?null:this.data.commentTitle,taggedUsers:this.data.taggedUsers.length>0?this.data.taggedUsers.join(","):null,mediaItems:this.data.mediaItems.length>0?this.data.mediaItems[0].url:null,ratings:this.plugin.textMode==t.TextMode.REVIEWS?this.data.ratings:null,enabledProviders:i||!this.share||0==this.share.getSelected().length?" ":this.share.getSelected().join(","),tags:this.plugin.params.commentTags,anonymous:!!this.postAnonymously||null,guestName:this.plugin.user.isGuest?this.plugin.user.nickname:null,guestEmail:this.plugin.user.isGuest?this.plugin.user.email:null,callback:function(e){return o.submitCallback(e)}});if(this.share)for(var l=0;l<this.share.getSelected().length;l++){var m=this.share.getSelected()[l],d=m+"UserAction";this.plugin.params[d]=this.getUserAction(this.data,this.plugin.params[d])}var c=g;if(c.guestName||(c.guestName=""),c.guestEmail||(c.guestEmail=""),c.eventName="beforeCommentSubmitted",0!=e.events.dispatchForWidget(c,this.plugin.params)){g=c,""==c.guestName&&delete c.guestName,""==c.guestEmail&&delete c.guestEmail;var p=this.plugin.getComment(this.data.parentID),u=p?p.level+1:0,h=null;"pending"==this.data.status&&(h=this.plugin.textMode==t.TextMode.REVIEWS&&0==u?this.getText("your_review_is_awaiting_moderation"):this.getText("your_comment_is_awaiting_moderation")),this.plugin.addComments([this.data],u,!1,!0,null,h),e.comments.postComment(this.plugin.params,g),this.share&&this.share.saveSelected(),this.plugin.setStreamInfoIfNeeded(),this.clear()}},o.prototype.submitCallback=function(o){if(i.prototype.submitCallback.call(this,o),0==o.errorCode){var s=this.plugin.getComment(o.comment.ID);"published"===s.data.status&&(this.plugin.streamInfo.commentCount++,this.data.isReply()||this.plugin.streamInfo.ratingCount++,this.plugin.updateCount());var n=e.utils.object.removeUndefined({eventName:"commentSubmitted",streamID:this.plugin.params.streamID,categoryID:this.plugin.params.categoryID,commentText:s.data.commentText,comment:e.utils.object.clone(s.data,!0,!0),mode:this.plugin.textMode==t.TextMode.REVIEWS?"reviews":"comments",ratings:s.data.ratings,commentTitle:s.data.commentTitle,providerPostIDs:s.data.providerPostIDs,user:this.plugin.user.UID?this.plugin.user:null,guestUser:this.plugin.user.isGuest?{nickname:this.plugin.user.nickname,email:this.plugin.user.email}:null});this.plugin.userCommentsData.push(s.data),this.plugin.setUserComments(this.plugin.userCommentsData),e.events.dispatchForWidget(n,this.plugin.params)}},o}(t.BaseComposeBox);t.NewCommentBox=i}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(i,o){var s=this;this.params=i,this.refString=o,this.version=2,this.commentInstances={},this.templates=e.utils.object.clone(t.defaultTemplates,!1),this.settings={},this.state={flags:{}},this.streamInfo={},this.userCommentsData=[],this.userOptions={},this.userComments=[],this.newCommentsCount=0,this.userHighlightingGroups=[],this.autoPixelRatio=!1,this.pixelRatio=1,this.simpleShareSource=null,this.loadState(),this.shareEnabled=this.isSharePossible(),this.containerID=i.containerID,this.container=this.getContainer(),this.params.useHiResIcons&&(this.autoPixelRatio=!0,this.pixelRatio=0),this.params.templates?this.params.ctag&&(this.params.ctag+="_templates"):this.params.templates={},this.templates=e.utils.object.merge([this.templates,this.params.templates]),this.params.pinnedCommentID=e._.plugins.utils.URL.getHashParamValue(document.location.href,"gig_comment_id"),this.params.pinnedCommentID&&(this.pinnedCommentID=this.params.pinnedCommentID),this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?t.TextMode.REVIEWS:t.TextMode.COMMENTS;var n=this.params.deviceType?this.params.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==n||"auto"==n&&e.localInfo.isMobile,this.setDefaults(),this.mainComposeBox=new t.NewCommentBox(this,this.getElement("composebox"),null),this.fetchAll(function(){if(s.initUI(),!e.utils.DOM.isVisible(s.container)){var t=new e._.Poller;t.addActions(function(){e.utils.DOM.isVisible(s.container)&&(t.stop(),s.updateAll())}),t.start(300)}s.updateAll(!0),e.events.dispatchForWidget({eventName:"load",version:s.version},s.params)});var a=function(e){e&&e.user?s.setUser(e.user):s.setUser({})};e.socialize.addEventHandlers({listenerType:"component"},{onLogin:a,onLogout:a,onConnectionAdded:a,onConnectionRemoved:a})}return i.prototype.getText=function(t,i,o){return this.params.customLang&&this.params.customLang[t]?this.params.customLang[t].replace(i,o):e.pluginUtils.lang.getLocalizedText("gigya.services.comments.plugins.comments2.js",t,this.params.lang,i,o)},i.prototype.loadState=function(){var t=e.utils.localStorage.getObject("gig-comments",void 0);t&&(this.state=t)},i.prototype.saveState=function(){e.utils.localStorage.setObject("gig-comments",this.state)},i.prototype.setDefaults=function(){this.params.streamID||(this.params.streamID=0);var e=this.getDefaultSort();e&&(this.params.sort=e)},i.prototype.setDefaultShareUserAction=function(){var i,o,s,n,a=new e.socialize.UserAction(this.params.shareUserAction);this.textMode==t.TextMode.REVIEWS?(o=this.getText("username_rated_pagetitle_as_rating_5")+"\n%pagetitle",i=this.getText("username_posted_a_review_on_pagetitle"),s=this.getText("username_commented_on_pagetitle"),n="%commentText"):(o=n="%commentText",i=s=this.getText("username_commented_on_pagetitle")),a.description||a.setDescription(o),a.title||a.setTitle(i),a.linkBack||a.setLinkBack(document.location.href),this.params.shareUserAction=a},i.prototype.getElement=function(t){var i=e.utils.DOM.getElementsByClass(this.container,"gig-comments-"+t);return i.length>0?i[0]:null},i.prototype.initUI=function(){var i="",o=this.params.cssPrefix;if(o||!this.addedCss){var s=this.params.lang;this.isRtl="he"==s||"ar"==s,i+=t.defaultCss.reset,this.isRtl&&(i+=t.defaultCss.resetRtl);var n=e.pluginUtils.css.fixCss(t.defaultCss.global),a=e.pluginUtils.css.fixCss(t.defaultCss.rtl);i+=n,this.isRtl&&(i+=a),this.isMobileUI?(i+=t.defaultCss.mobile,this.isRtl&&(i+=t.defaultCss.mobileRtl)):i+=t.defaultCss.nonMobile,e.localInfo.isMobile&&e.localInfo.isSafari&&(i+=".gig-comments-container * {-webkit-text-size-adjust:none;}"),e._.plugins.utils.css.addCss(i,o),this.addedCss=!0}this.isMobileUI&&(this.container.style.width="100%"),this.container.className="gig-comments-container"+(this.textMode==t.TextMode.REVIEWS?" gig-comments-reviews":"")+(this.autoPixelRatio?" gig-comments-hires-icons":""),this.container.setAttribute("data-version","2");var r="bottom"!=this.settings.newCommentPosition||this.params.templates.commentsPluginComposeBottom?this.templates.commentsPlugin:this.templates.commentsPluginComposeBottom;this.container.innerHTML=r,this.mainComposeBox.container=this.getElement("composebox")},i.prototype.getContainer=function(){return document.getElementById(this.containerID)},i.prototype.fetchComments=function(t,i){var o=this;void 0===t&&(t=!1);var s={threaded:!0,categoryID:this.params.categoryID,streamID:this.params.streamID,includeSettings:!0,includeUserOptions:!0,includeUserHighlighting:!0,pinnedCommentID:this.params.pinnedCommentID,tags:this.params.filterTags,callback:function(e){o.getCommentsCallback(e),i&&i()}};this.pagingDisabled&&(s.threadLimit=0),this.nextPageStart?t||(s.start=this.nextPageStart):s.includeStreamInfo=!0,t&&this.streamInfo.lastCommentTimestamp&&(s.since=this.streamInfo.lastCommentTimestamp),e.comments.getComments(this.params,s)},i.prototype.reset=function(){this.comments=[],this.commentInstances={},this.streamInfo={},this.nextPageStart=null,delete this.params.start},i.prototype.removeUnpublishedComments=function(){for(var e in this.commentInstances){var t=this.commentInstances[e];t.isPost=!1,t.info=null,t.error=null,t.isRemovedComment()?t.updateAll():"published"!==t.data.status&&this.removeComment(t)}},i.prototype.isUserFollowing=function(){return this.userOptions&&"immediate"==this.userOptions.replyNotifications},i.prototype.setUserComments=function(e){if(e){var i=null!=this.getSelfReview();this.userCommentsData=e,this.userComments=[];for(var o=0;o<this.userCommentsData.length;o++){var s=this.commentInstances[this.userCommentsData[o].ID]||new t.Comment(this,this.userCommentsData[o]);this.userComments.push(s)}this.textMode==t.TextMode.REVIEWS&&i!=(null!=this.getSelfReview())&&this.updateUserReview()}},i.prototype.getCommentsCallback=function(i){var o=this;if(0!=i.errorCode)this.broadcastedError||(this.container&&!this.nextPageStart&&(this.container.innerHTML=""),e.events.dispatchErrorFromResponse(this.params,i),this.broadcastedError=!0);else{i.settings&&(this.settings=e.utils.object.merge([{},i.settings])),this.textMode="ratingsOnly"==this.settings.mode||"reviews"==this.settings.mode?t.TextMode.REVIEWS:t.TextMode.COMMENTS,this.setDefaultShareUserAction();var s=!i.requestParams.start&&!i.requestParams.since;if(s){this.comments=[];var n=this.getElement("comments");n&&(n.innerHTML="")}this.buildHighlightsCss();var a=null!=i.requestParams.since;if(this.addComments(t.CommentData.fromRawDataArray(i.comments),0,a,!1),this.setUserComments(t.CommentData.fromRawDataArray(i.userComments)),this.hasMore=i.hasMore,i.streamInfo&&(this.streamInfo=i.streamInfo,this.updateCount()),i.userOptions&&(this.userOptions=i.userOptions),null!=this.params.useSiteLogin&&(this.settings.useSiteLogin=e.utils.validation.isExplicitTrue(this.params.useSiteLogin)),!this.nextPageStart){var r=this.settings.refreshMode,g=1e3*this.settings.refreshInterval||0;g>0&&"off"!=r&&(this.refreshTimeout=window.setInterval(function(){o.checkForNewComments()},g))}i.requestParams.since||(this.nextPageStart=i.next),i.requestParams.userHighlightingGroups||(this.userHighlightingGroups=i.userHighlightingGroups),this.getMoreInProgress=!1,this.updateMore(s),this.updateCount()}},i.prototype.addComments=function(e,i,o,s,n,a){void 0===i&&(i=0);var r=[];o&&e.reverse();for(var g=0;g<e.length;g++){var l=e[g],m=this.commentInstances[l.ID];m?(m.error=n,m.info=a,m.reset(l,!0)):m=new t.Comment(this,l,i,null,s,o,n,a),r.push(m)}},i.prototype.createUserHighlightingBadges=function(i,o){if(!o)return!1;for(var s=this.getHighlightingBadges(o,["user","moderator"]),n=!1,a=!0,r=s.length-1;r>=0;r--){var g=s[r];if(g.showBadge){n=!0;var l=document.createElement("div");e.utils.DOM.addClassToElement(l,"gig-comment-userBadge"),e.utils.DOM.addClassToElement(l,g.className),l.innerHTML="Moderator"==g.badgeText?this.getText("moderator"):g.badgeText,t.BadgeFrameEnum[g.badgeFrame]===t.BadgeFrameEnum.rectangle&&e.utils.DOM.addClassToElement(l,"gig-badge-border"),i.parentNode.insertBefore(l,i.nextSibling)}a&&g.commenterNameColor&&""!==g.commenterNameColor&&(e.utils.DOM.addClassToElement(i,g.userClassName),a=!1)}return n},i.prototype.checkForNewComments=function(){var i=this;"off"==this.settings.refreshMode||this.isPaused||e.comments.getStreamInfo(this.params,{callback:function(e){if(e.streamInfo){var o=i.textMode===t.TextMode.REVIEWS?e.streamInfo.ratingCount:e.streamInfo.commentCount,s=i.textMode===t.TextMode.REVIEWS?i.streamInfo.ratingCount:i.streamInfo.commentCount,n=o-s;i.updatedStreamInfo=e.streamInfo,(n>0||i.lastCommentTimestamp!==e.streamInfo.lastCommentTimestamp)&&(i.newCommentsCount=i.newCommentsCount+n,i.lastCommentTimestamp=e.streamInfo.lastCommentTimestamp,i.hasNewComments())}}})},i.prototype.hasNewComments=function(){var e=this.settings.refreshMode;"countOnly"==e?(this.updateStrip(),this.newCommentsCount=0):"full"==e&&this.fetchNewComments()},i.prototype.isSharePossible=function(){return 0==document.location.href.indexOf("http")&&(!window.__gigAPIAdapterSettings||"http://www.gigya.com/"!=document.location.href)},i.prototype.fetchNewComments=function(){this.streamInfo=this.updatedStreamInfo,this.updatedStreamInfo=null,this.fetchComments(!0),this.updateStrip()},i.prototype.updateStrip=function(i){var o=this,s=this.settings.refreshMode,n=this.getElement("updates");if(n){i&&(n.innerHTML=this.templates.updates);var a=e.utils.DOM.getElementsByClass(n,"gig-comments-updates-text")[0],r=e.utils.DOM.getElementsByClass(n,"gig-comments-updates-link")[0],g="",l="";e.utils.DOM.removeClassFromElement(n,"gig-comments-updates-countonly"),e.utils.DOM.removeClassFromElement(n,"gig-comments-updates-full"),"countOnly"==s?(this.newCommentsCount>0&&(g=this.textMode==t.TextMode.COMMENTS?1==this.newCommentsCount?this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),l=this.getText("click_to_show")),i&&e.utils.DOM.addEventListener(r,"click",function(){o.fetchNewComments()}),e.utils.DOM.addClassToElement(n,"gig-comments-updates-countonly")):"full"==s&&(this.newCommentsCount>0&&(g=this.textMode==t.TextMode.COMMENTS?1==this.newCommentsCount?this.getText("1_new_comment_was_recently_posted"):this.getText("num_new_comments_were_recently_posted","%num",this.newCommentsCount.toString()):1==this.newCommentsCount?this.getText("1_new_review_was_recently_posted"):this.getText("num_new_reviews_were_recently_posted","%num",this.newCommentsCount.toString()),l=this.isPaused?this.getText("resume_stream"):this.getText("pause_stream"),this.isPaused?e.utils.DOM.addClassToElement(n,"gig-comments-updates-paused"):e.utils.DOM.removeClassFromElement(n,"gig-comments-updates-paused")),i&&e.utils.DOM.addEventListener(r,"click",function(){o.isPaused=!o.isPaused,o.updateStrip()}),e.utils.DOM.addClassToElement(n,"gig-comments-updates-full")),g||l?(a&&(a.innerHTML=g),r&&(r.innerHTML=l),e.utils.DOM.addClassToElement(n,"gig-comments-updates-visible")):e.utils.DOM.removeClassFromElement(n,"gig-comments-updates-visible")}},i.prototype.getComment=function(e){return this.commentInstances[e]},i.prototype.removeComment=function(i){for(var o=i.replies.concat(),s=0;s<o.length;s++)o[s].dispose();var n=i.getParent();n?n.removeChild(i.id):e.utils.array.removeByProperty(this.comments,"id",i.id),e.utils.array.removeByProperty(this.userComments,"id",i.id),e.utils.array.removeByProperty(this.userCommentsData,"ID",i.id);var a=i.getContainer();if(a&&a.parentNode.removeChild(a),delete this.commentInstances[i.id],"published"===i.data.status)for(this.streamInfo.commentCount--,n||this.streamInfo.ratingCount--;n;)n.descendantsCount--,n.updateRepliesCount(),n=n.getParent();this.updateCount(),this.textMode==t.TextMode.REVIEWS&&this.updateUserReview()},i.prototype.getUserInfo=function(t){var i=this;e.socialize.getUserInfo(this.params,{callback:function(o){0==o.errorCode?i.setUser(o.user,!0):e.events.dispatchErrorFromResponse(i.params,o),t&&t()}})},i.prototype.filterIdentities=function(t){if(!t||!t.identities)return t;var i=this.params.enabledProviders||"*",o=this.params.disabledProviders||"",s=0,n=e.socialize.getProvidersByName(i+",site");n=e.socialize.hideProvidersByName(n,o);for(var a={},r=0;r<n.length;r++){var g=n[r];t.identities[g.name]&&(s++,a[g.name]=t.identities[g.name])}return t.identities=a,t.loginProvider&&!t.identities[t.loginProvider]&&(delete t.loginProvider,delete t.nickname),0==s&&(t.isConnected=!1),t},i.prototype.setUser=function(t,i){var o=this;this.user=this.filterIdentities(t),i||(this.setUserComments([]),this.streamInfo.isUserSubscribed=!1,this.removeUnpublishedComments(),this.fetchUserVotes(),this.fetchSelfComments(),t.isConnected&&e.comments.getStreamInfo(this.params,{callback:function(e){e.streamInfo&&(o.streamInfo=e.streamInfo,o.updateHeaderLinks())}})),this.updateAll(!1)},i.prototype.fetchAll=function(e){var t=this,i=!1,o=function(){if(!i&&t.user&&t.comments){if(e&&e(),t.hideProgress(),t.settings.repliesCollapsed)for(var o=0;o<t.comments.length;o++)t.comments[o].collapse();if(t.pinnedCommentID){var s=t,n=s.getComment(s.pinnedCommentID);window.setTimeout(function(){var e=n.data.threadID;""==e&&(e=n.id),s.getComment(e).isCollapse()&&s.getComment(e).expand(),s.scrollToPinnedComment(s.pinnedCommentID),s.setPinnedCommentColor(s.pinnedCommentID)},2)}}};this.fetchComments(!1,o),this.getUserInfo(o),this.showProgress()},i.prototype.scrollToPinnedComment=function(e){var t=document.querySelector('[data-comment-id="'+e+'"]');if(t){var i=t.offsetTop;window.scrollTo(0,i-12)}},i.prototype.setPinnedCommentColor=function(t){var i=document.querySelector('[data-comment-id="'+t+'"]');if(i){var o=i.getElementsByClassName("gig-comment-content")[0];e.utils.DOM.addClassToElement(o,"gig-comment-pinned-background"),e.utils.DOM.addClassToElement(o,"gig-comment-colored-background"),e.utils.DOM.removeClassFromElement(o,"gig-comment-badge-pick")}},i.prototype.getUsername=function(){return e.utils.sanitize.sanitizeHTML(this.user.nickname||this.user.firstName||(this.user.isGuest?this.getText("guest"):this.getText("anonymous")))},i.prototype.updateAll=function(e){void 0===e&&(e=!1),this.user&&this.comments&&(this.mainComposeBox&&(e?this.mainComposeBox.render():this.mainComposeBox.updateUI()),this.tempComposeBox&&(e?this.tempComposeBox.render():this.tempComposeBox.updateUI()),this.updateHeaderLinks(e),this.updateComments(e),e&&this.bindAll(),this.updateMore(e),this.updateStrip(e))},i.prototype.fetchUserVotes=function(){var t=this;e.comments.getUserVotes(this.params,{callback:function(e){for(var i in t.commentInstances){var o=t.commentInstances[i];o.voteInProgress||(o.data.vote=e.userVotes?e.userVotes[i]:"none",o.updateVote())}}})},i.prototype.fetchSelfComments=function(){var t=this;e.comments.getUserComments(this.params,{includeReplies:!0,includeUserHighlighting:!0,callback:function(e){if(e&&e.comments){t.setUserComments(e.comments);for(var i=0;i<e.comments.length;i++){var o=e.comments[i].ID;if(t.commentInstances[o]){var s=t.commentInstances[o];s.data.sender.isSelf=!0,s.updateComment(!1)}}}else{t.setUserComments([]);for(var n in t.commentInstances){var s=t.commentInstances[n];s.data.sender.isSelf=!1,s.updateComment(!1)}}e.requestParams.userHighlightingGroups||(t.userHighlightingGroups=e.userHighlightingGroups),t.mainComposeBox.updateUserBadges()}})},i.prototype.showProgress=function(){e.utils.DOM.addClassToElement(this.container,"gig-comments-container-progress")},i.prototype.hideProgress=function(){e.utils.DOM.removeClassFromElement(this.container,"gig-comments-container-progress")},i.prototype.updateHeaderLinks=function(t){var i=this.getElement("header");t&&i&&(i.innerHTML=e.utils.templates.fill(this.templates.header,{sort:this.getText("sort"),subscribe:this.getText("subscribe"),rss:"<a>"+this.getText("rss")+"</a>"}));var o=this.getElement("sort");o&&(o.style.display=this.settings.enableUserSorting?"":"none");var s=this.getElement("rss");s&&(s.style.display=this.settings.disableRSS?"none":"");var n=this.getElement("subscribe");if(n){var a=this.streamInfo.isUserSubscribed||this.unsubscribeToken?this.getText("unsubscribe"):this.getText("subscribe");n.title=a,n.innerHTML=a,n.style.display=this.settings.disableRSS?"none":""}i&&this.setLinks(i)},i.prototype.updateUserReview=function(){this.mainComposeBox.updateUI()},i.prototype.getSelfReview=function(){if(this.textMode==t.TextMode.REVIEWS)for(var e=0;e<this.userComments.length;e++)if(!this.userComments[e].data.parentID)return this.userComments[e]},i.prototype.setLinks=function(t){for(var i,o,s=e.utils.DOM.getElementsByClass(t,"gig-comments-linksContainer"),n=0;n<s.length;n++){i=!1,o=s[n].childNodes;for(var a=o.length-1;a>=0;a--){var r=o[a];"none"==r.style.display||""==r.innerHTML||i?e.utils.DOM.removeClassFromElement(r,"gig-comments-link-lastVisible"):(e.utils.DOM.addClassToElement(r,"gig-comments-link-lastVisible"),i=!0)}}},i.prototype.updateComments=function(e){void 0===e&&(e=!1);var t=this.getElement("comments");if(t){e&&(this.getElement("comments").innerHTML="");for(var i=0;i<this.comments.length;i++)this.comments[i].updateAll();this.updateCount()}},i.prototype.updateCount=function(){var e=this.getElement("count");if(e)if(this.settings.disableCommentsCount)e.innerHTML="";else{var i;if(this.textMode==t.TextMode.REVIEWS){var o=this.streamInfo.ratingCount,s=this.streamInfo.commentCount-this.streamInfo.ratingCount;i=this.getPluralizedCount(o,"review")+(s>0?", "+this.getPluralizedCount(s,"comment"):"")}else i=this.getPluralizedCount(this.streamInfo.commentCount,"comment");e.innerHTML=i}},i.prototype.getPluralizedCount=function(e,t){var i="one_"+t,o="num_"+t+"s",s=this.getText(1==e?i:o,"%num",e.toString());return"fr"==this.params.lang&&0==e&&(s=this.getText(i,"%num",e.toString()),s=s.replace("1","0")),s},i.prototype.updateMore=function(t){var i=this.getElement("more");i&&(this.hasMore?(this.getMoreInProgress?(e.utils.DOM.addClassToElement(i,"gig-comments-more-progress"),i.innerHTML=""):(e.utils.DOM.removeClassFromElement(i,"gig-comments-more-progress"),i.innerHTML="reviews"==this.settings.mode?this.getText("show_more_reviews"):"ratingsOnly"==this.settings.mode?this.getText("show_more_ratings"):this.getText("show_more_comments")),
i.style.display=""):i.style.display="none")},i.prototype.bindAll=function(){var t=this,i=this.getElement("more");i&&e.utils.DOM.addEventListener(i,"click",function(e){t.onMoreClick(i)});var o=this.getElement("subscribe");o&&e.utils.DOM.addEventListener(o,"click",function(e){t.onSubscribeClick()});var s=this.getElement("rss");if(s)for(var n=s.getElementsByTagName("a"),a=0;a<n.length;a++){var r=n[a];r.setAttribute("href",this.streamInfo.rssURL),e.utils.DOM.addEventListener(r,"click",function(e){t.onRssClick(e,!0)}),e.utils.DOM.addEventListener(r,"contextmenu",function(e){t.onRssClick(e)})}var g=this.getElement("sort");e.utils.DOM.addEventListener(g,"mousedown",function(e){t.onSortClick(g)})},i.prototype.onSubscribeClick=function(){var i=this;if(this.streamInfo.isUserSubscribed)e.comments.unsubscribe(this.params,{callback:function(e){return i.onUnsubscribe(e)}});else if(this.unsubscribeToken)e.comments.unsubscribe(this.params,{unsubscribeToken:this.unsubscribeToken,callback:function(e){return i.onUnsubscribe(e)}});else{var o=this.textMode==t.TextMode.REVIEWS?"review":"comment",s=e.utils.templates.fill(this.templates.emailTextboxDialogBody,{text:this.getText("enter_your_email_to_subscribe_to_new_"+o+"s_in_this_stream_colon"),buttonText:this.getText("subscribe"),email:this.user.email||""}),n=this.showDialog(this.getText("notifications_settings"),s),a=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-textbox-button")[0];e.utils.DOM.addEventListener(a,"click",function(t){var o=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-textbox")[0];if(o){var s=o.value;if(e.pluginUtils.validation.isEmailValid(s))i.subscribe(o.value),n.parentNode&&n.parentNode.removeChild(n);else{var a=e.utils.DOM.getElementsByClass(n,"gig-comments-dialog-error")[0];a.innerHTML=i.getText("please_provide_a_valid_email_address")}}})}},i.prototype.subscribe=function(i){var o=this;this.setStreamInfoIfNeeded(null,null,function(){e.comments.subscribe(o.params,{email:i,callback:function(e){o.onSubscribe(e)}})});var s=this.textMode==t.TextMode.REVIEWS?"review":"comment",n='<div class="gig-comments-dialog-subscribe-okIcon"></div>'+this.getText("thank_you_for_subscribing")+"<br />"+this.getText("new_"+s+"s_will_be_sent_directly_to_your_email_inbox"),a=this.showDialog(this.getText("notifications_settings"),n);window.setTimeout(function(){a.parentNode&&a.parentNode.removeChild(a)},3e3)},i.prototype.onUnsubscribe=function(e){if(0==e.errorCode){var t=this.showDialog(this.getText("notifications_settings"),this.getText("you_have_successfully_unsubscribed"));window.setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},3e3),delete this.unsubscribeToken,this.streamInfo.isUserSubscribed=!1,this.updateHeaderLinks()}},i.prototype.onSubscribe=function(e){e&&e.unsubscribeToken&&(this.unsubscribeToken=e.unsubscribeToken),e.unsubscribeToken||(this.streamInfo.isUserSubscribed=!0),this.updateHeaderLinks()},i.prototype.onMoreClick=function(e){this.hasMore&&!this.getMoreInProgress&&(this.getMoreInProgress=!0,this.updateMore(),this.fetchComments())},i.prototype.onRssClick=function(e,t){return t?this.setStreamInfoIfNeeded(e,this.streamInfo.rssURL):void this.setStreamInfoIfNeeded(e)},i.prototype.onSortClick=function(i){var o=this;if(i){var s=e.utils.DOM.getElementPosition(i),n=document.createElement("div");n.style.position="absolute",null!=n.style.zIndex&&(n.style.zIndex=(e.utils.DOM._nextZIndex++).toString()),n.innerHTML=e.utils.templates.fill(this.templates.sortbox,{most_recent:this.getText("most_recent"),oldest:this.getText("oldest"),most_voted:this.getText("most_voted"),ratings:this.getText("ratings")}),n.className="gig-comments-container gig-comments-sortbox";for(var a=n.getElementsByTagName("li"),r=0;r<a.length;r++){var g=a[r],l=g.getAttribute("data-sort"),m=this.params.sort;(l==m||!m&&l==this.settings.sortBy)&&e.utils.DOM.addClassToElement(g,"gig-comments-sortbox-selected"),this.textMode!=t.TextMode.REVIEWS&&0==l.indexOf("rating")?e.utils.DOM.removeElement(g):e.utils.DOM.addEventListener(g,"click",function(e){var t=e.target||e.srcElement,i=t.getAttribute("data-sort");o.params.pinnedCommentID&&delete o.params.pinnedCommentID,i&&(n.parentNode.removeChild(n),o.params.sort=i,o.setDefaultSort(i),o.saveState(),o.reset(),o.fetchComments())})}e.utils.DOM.appendToBody(n),n.style.left=s.left-n.offsetWidth+30+"px",n.style.top=s.top+i.offsetHeight+"px",e.pluginUtils.animation.fadeIn(n),e.pluginUtils.DOM.removeElementOnDocClick(n,function(e,i){i&&t.CommentsUtils.Events.cancelEvent(e)})}},i.prototype.setDefaultSort=function(t){e.utils.cookie.set("_gig_comments_sort",t)},i.prototype.getDefaultSort=function(){return e.utils.cookie.get("_gig_comments_sort")},i.prototype.showDialog=function(t,i,o,s,n,a){var r=this;this.activeDialog&&this.activeDialog.cancelHandler();var g=e.utils.DOM.createTopLevelDiv();g.style.position="fixed",g.className=this.container.className,g.innerHTML=this.templates.dialog,e.utils.DOM.getElementsByClass(g,"gig-comments-dialog-caption")[0].innerHTML=t,e.utils.DOM.getElementsByClass(g,"gig-comments-dialog-body")[0].innerHTML=i;var l=function(){g.parentNode&&g.parentNode.removeChild(g),r.activeDialog=void 0},m=function(){l(),a&&a(g)},d=function(){l(),s&&s(g)},c=e.utils.DOM.getElementsByClass(g,"gig-comments-dialog-close")[0];c&&e.utils.DOM.addEventListener(c,"click",m);var p=e.utils.DOM.getElementsByClass(g,"gig-comments-dialog-button-ok")[0];p&&(e.utils.DOM.addEventListener(p,"click",d),o?p.innerHTML=o:p.style.display="none");var u=e.utils.DOM.getElementsByClass(g,"gig-comments-dialog-button-cancel")[0];u&&(e.utils.DOM.addEventListener(u,"click",m),n?u.innerHTML=n:u.style.display="none"),e.utils.DOM.appendToBody(g);var h=e.utils.viewport.getInnerSize(),x=h.w,b=h.h;return g.style.top=""+Math.max(0,Math.floor((b-g.offsetHeight)/2))+"px",g.style.left=""+Math.max(0,Math.floor((x-g.offsetWidth)/2))+"px",this.activeDialog={el:g,okHandler:d,cancelHandler:m},g},i.prototype.setStreamInfoIfNeeded=function(i,o,s){var n=this,a=this.params.streamTitle;a||(a=document.title),a&&""!=a||(a="Site");var r=this.params.streamURL;return r||(r=document.location.href),this.streamInfo.streamURL&&(!this.params.streamInfoSig||a==this.streamInfo.streamTitle&&r==this.streamInfo.streamURL)?(s&&s(),!0):(e.comments.setStreamInfo(this.params,{streamTitle:a,streamURL:r,callback:function(){n.streamInfo.streamTitle=a,n.streamInfo.streamURL=r,o&&(document.location.href=o),s&&s()}}),void(i&&t.CommentsUtils.Events.cancelEvent(i)))},i.prototype.buildMediaItemElement=function(i,o,s,n){var a=this,r=document.createElement("div");i.appendChild(r),i.style.height="",r.innerHTML=e.utils.templates.fill(this.templates.mediaItem,{displayUrl:o.url,url:o.url,caption:o.title?o.title:o.description?o.description:"",providerIcon:t.CommentsUtils.Images.getPhotoFullName("mediaProviders/"+o.provider.toLowerCase(),this.pixelRatio)});var g=e.utils.DOM.getElementsByClass(r,"gig-media-thumbnail")[0],l=e.utils.DOM.getElementsByClass(r,"gig-media-caption")[0],m=document.createElement("img");e.utils.DOM.addClassToElement(m,"gig-media-thumbnail-image");var d=g.offsetWidth,c=.75*d-l.offsetHeight,p=o.thumbnailHeight,u=o.thumbnailWidth;if("image"==o.type.toLowerCase()&&o.thumbnailWidth<.7*d?(p=o.height,u=o.width,m.src=e.global.getPhotoURL(o.photoUrl)):m.src=e.global.getPhotoURL(o.thumbnailUrl),p>c){var h=c/p;p*=h,u*=h}if(u>d){var h=d/u;p*=h,u*=h}p<c&&(c=p);var x=s?(d-u)/2:0;m.style.width=u+"px",m.style.height=p+"px",m.style.marginRight=x+"px",m.style.marginLeft=x+"px",g.style.height=c+"px";var b=e.utils.DOM.getElementsByClass(r,"gig-media-overlay")[0];if(b&&(b.style.top=-c+"px"),"rich"==o.type.toLowerCase()||"video"==o.type.toLowerCase()){var v=e.utils.DOM.getElementsByClass(r,"gig-media-play")[0];v&&e.utils.DOM.addEventListener(m,"load",function(){v.style.display="block";var t=(p-v.offsetHeight)/2,i=x+(u-v.offsetWidth)/2;a.isRtl?v.style.right=i+"px":v.style.left=i+"px",v.style.top=t+"px",e.utils.DOM.addEventListener(v,"click",function(){a.playMediaItem(o)})})}else m.style.cursor="pointer",e.utils.DOM.addEventListener(m,"click",function(){window.open(o.url)});var f=e.utils.DOM.getElementsByClass(r,"gig-media-cancel")[0];return f&&(s&&n?e.utils.DOM.addEventListener(f,"click",n):f.style.display="none"),g.appendChild(m),r},i.prototype.playMediaItem=function(i){if(this.isMobileUI)window.open(i.url);else{var o=document.body.style.overflow,s=document.createElement("div");s.className="gig-comments-mediaplayer-dimmer",s.style.zIndex=e.utils.DOM._nextZIndex++ +"",e.utils.DOM.appendToBody(s),e.pluginUtils.animation.fadeIn(s,.8),document.body.style.overflow="hidden";var n=document.createElement("div");n.className="gig-comments-mediaplayer",n.innerHTML=e.utils.templates.fill(this.templates.mediaItemPlayer,{playerHeight:i.height,playerHTML:i.html,caption:i.title?i.title:"",providerIcon:t.CommentsUtils.Images.getPhotoFullName("mediaProviders/"+i.provider.toLowerCase(),this.pixelRatio)}),n.style.zIndex=e.utils.DOM._nextZIndex++ +"",e.utils.DOM.appendToBody(n),e.pluginUtils.animation.fadeIn(n),n.style.marginLeft=-n.offsetWidth/2+"px",n.style.marginTop=-n.offsetHeight/2+"px";var a=function(){document.body.style.overflow=o,s.parentElement.removeChild(s),n.parentElement.removeChild(n)},r=e.utils.DOM.getElementsByClass(n,"gig-media-cancel")[0];e.utils.DOM.addEventListener(s,"click",a),e.utils.DOM.addEventListener(r,"click",a)}},i.prototype.removeUserBadges=function(e){if(e)for(var t=e.getElementsByClassName("gig-comment-userBadge");t.length>0;)t[0].parentNode.removeChild(t[0])},i.prototype.buildHighlightsCss=function(){var i="";if(this.settings&&this.settings.highlightGroupsSettings){for(var o=0;o<this.settings.highlightGroupsSettings.length;o++){var s=this.settings.highlightGroupsSettings[o];if(!s.cssRule){s.className="gig-badge-"+s.name.toLowerCase(),s.commentClassName="gig-comment-badge-"+s.name.toLowerCase(),s.userClassName="gig-comment-username-badge-"+s.name.toLowerCase();var n="";if(s.badgeImageURL){var a="https://cdns.gigya.com/gs/i/comments2/editors_pick.png"==s.badgeImageURL?t.CommentsUtils.Images.getPhotoFullName("editors_pick"):e.global.getPhotoURL(s.badgeImageURL);n="background-image:url("+a+"); background-size: 17px 17px;"}s.cssRule=".gig-comments-container *."+s.className+" {color:"+s.badgeColor+";"+n+"} .gig-comments-container *."+s.className+".gig-badge-border {border-color:"+s.badgeColor+";} ",s.commentBackgroundColor&&(s.cssRule+=".gig-comments-container *."+s.commentClassName+" {background-color:"+s.commentBackgroundColor+";} "),s.commenterNameColor&&(s.cssRule+=".gig-comments-container *."+s.userClassName+" {color:"+s.commenterNameColor+";} "),i+=s.cssRule+" "}}e._.plugins.utils.css.addCss(i,this.params.cssPrefix)}},i.prototype.getHighlightingBadges=function(e,t){if(e){for(var i=[],o=0;o<this.settings.highlightGroupsSettings.length;o++){var s=this.settings.highlightGroupsSettings[o];!s.enabled||e.indexOf(s.name)==-1||t&&t.indexOf(s.type)==-1||i.push(s)}return i}},i}();t.CommentsPlugin=i,e._.UI.attachPlugin(i,"comments","comments2","showCommentsUI")}(i=t.comments||(t.comments={}))}(t=e.pluginTypes||(e.pluginTypes={}))}(gigya||(gigya={}));
});